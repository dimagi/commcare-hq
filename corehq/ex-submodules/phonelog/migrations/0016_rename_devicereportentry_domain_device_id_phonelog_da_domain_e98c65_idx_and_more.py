# Generated by Django 4.2.20 on 2025-09-16 12:15

from django.db import migrations


class Migration(migrations.Migration):

    dependencies = [
        ('phonelog', '0015_devicereportentry_android_version_and_more'),
    ]

    operations = [
        migrations.SeparateDatabaseAndState(
            database_operations=[
                migrations.RunSQL(
                    # Bring index names in test dbs in line with production dbs.
                    # It is unclear how they got out of sync.
                    'ALTER INDEX IF EXISTS phonelog_daily_partition_domain_device_id_0f8f03f5_idx RENAME TO phonelog_daily_partitioned_devicereportentr_domain_0f8f03f5_idx',
                    'ALTER INDEX IF EXISTS phonelog_daily_partitioned_devicereportentr_domain_0f8f03f5_idx RENAME TO phonelog_daily_partition_domain_device_id_0f8f03f5_idx',
                ),
                migrations.RunSQL(
                    'ALTER INDEX "phonelog_daily_partitioned_devicereportentr_domain_0f8f03f5_idx" RENAME TO "phonelog_da_domain_e98c65_idx"',
                    'ALTER INDEX "phonelog_da_domain_e98c65_idx" RENAME TO "phonelog_daily_partitioned_devicereportentr_domain_0f8f03f5_idx"',
                ),
            ],
            state_operations=[
                migrations.RenameIndex(
                    model_name='devicereportentry',
                    new_name='phonelog_da_domain_e98c65_idx',
                    old_fields=('domain', 'device_id'),
                ),
            ],
        ),
        migrations.RenameIndex(
            model_name='devicereportentry',
            new_name='phonelog_da_domain_24b7b5_idx',
            old_fields=('domain', 'type'),
        ),
        migrations.RenameIndex(
            model_name='devicereportentry',
            new_name='phonelog_da_domain_b799e5_idx',
            old_fields=('domain', 'username'),
        ),
        migrations.RenameIndex(
            model_name='devicereportentry',
            new_name='phonelog_da_domain_6347bd_idx',
            old_fields=('domain', 'date'),
        ),
        migrations.RenameIndex(
            model_name='forcecloseentry',
            new_name='phonelog_fo_domain_6c269b_idx',
            old_fields=('domain', 'server_date'),
        ),
        migrations.RenameIndex(
            model_name='usererrorentry',
            new_name='phonelog_us_domain_8acfa0_idx',
            old_fields=('domain', 'app_id', 'version_number'),
        ),
    ]
