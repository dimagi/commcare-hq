{% extends "hqwebapp/bootstrap5/base_section.html" %}
{% load hq_shared_tags %}
{% load i18n %}
{% load compress %}

{% block stylesheets %}{{ block.super }}
  {% compress css %}
    <link type="text/css" rel="stylesheet" media="all" href="{% static 'leaflet/dist/leaflet.css' %}" />
    <link rel="stylesheet" href="{% static 'reports/css/maps.css' %}" />
  {% endcompress %}
{% endblock stylesheets %}

{% block head %}{{ block.super }}
  <style>
    .map-container {
      height: 500px;
    }
  </style>
{% endblock %}

{% block title %}{{ report.title|default:"Project Reports" }}{% endblock %}

{% block page_title %}{% endblock %}

{% block page_content %}
  {% initial_page_data 'left_col_fixed_width' report_table.left_col.fixed.width %}
  {% initial_page_data 'left_col_fixed_num' report_table.left_col.fixed.num %}
  {% initial_page_data 'left_col_is_fixed' report_table.left_col.is_fixed %}
  {% initial_page_data 'ajax_method' method %}
  {% initial_page_data 'custom_sort' headers.custom_sort %}
  {% initial_page_data 'render_aoColumns' headers.render_aoColumns %}
  {% initial_page_data 'header_auto_width' headers.auto_width %}
  {% initial_page_data 'table_show_all_rows' report_table.show_all_rows %}
  {% initial_page_data 'table_start_at_row' report_table.start_at_row|default:0 %}
  {% initial_page_data 'table_default_rows' report_table.default_rows|default:10 %}
  {% initial_page_data 'report_slug' report.slug %}
  {% initial_page_data 'MAPBOX_ACCESS_TOKEN' MAPBOX_ACCESS_TOKEN %}
  {% initial_page_data 'map_config' report.spec.map_config %}
  {% initial_page_data 'created_by_builder' report.spec.report_meta.created_by_builder %}
  {% initial_page_data 'charts' report.spec.charts %}
  {% initial_page_data 'url' url %}
  {% initial_page_data 'html_id_suffix' report.html_id_suffix %}

  {% block report_alerts %}
    <div id="report-error{{ report.html_id_suffix }}" class="alert alert-danger d-none">
      {% blocktrans %}
        There was an error rendering your report.
      {% endblocktrans %}
      <div id="error-message{{ report.html_id_suffix }}"></div>
    </div>
    <div id="report-warning{{ report.html_id_suffix }}" class="alert alert-warning d-none">
      {% blocktrans %}
        Warning:
      {% endblocktrans %}
      <div id="warning-message{{ report.html_id_suffix }}"></div>
    </div>
  {% endblock report_alerts %}
  {% block main_column_content %}
    {% block filter_panel %}
      {% include "reports_core/partials/bootstrap5/filter_panel.html" %}
    {% endblock %}
    <hr />
    {% block report_content %}
      {% include "reports_core/partials/bootstrap5/report_content.html" %}
    {% endblock report_content %}
  {% endblock main_column_content %}
{% endblock %}
