{% load i18n %}

<div class="modal fade" tabindex="-1" role="dialog" id="auto-renew-modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="{% trans 'Close' %}"
        >
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">
          {% if plan.is_auto_renew %}
            {% trans "Disable Auto Renewal" %}
          {% else %}
            {% trans "Enable Auto Renewal" %}
          {% endif %}
        </h4>
      </div>
      <div class="modal-body">
        {% if plan.is_auto_renew %}
          <p>{% trans "By disabling auto renewal:" %}</p>
          <ul>
            <li>
              {% blocktrans with plan_name=plan.name date_end=plan.date_end %}
                Your subscription to <b>{{ plan_name }}</b> will end on
                {{ date_end }}.
              {% endblocktrans %}
            </li>
            {% if plan.next_subscription.name %}
              <li>
                {% blocktrans with plan_name=plan.next_subscription.name date_start=plan.next_subscription.date_start %}
                  Your upcoming subscription to <b>{{ plan_name }}</b> beginning
                  {{ date_start }} will be canceled.
                {% endblocktrans %}
              </li>
            {% endif %}
            <li>
              {% blocktrans %}
                Your subscription will <strong>not</strong> automatically renew.
              {% endblocktrans %}
            </li>
          </ul>
        {% else %}
          <p>
            {% blocktrans %}
              Based on currently available software plans, by enabling auto
              renewal:
            {% endblocktrans %}
          </p>
          <ul>
            <li>
              {% blocktrans with plan_name=plan.name date_end=plan.date_end next_plan_name=renewal_plan_preview.name %}
                Your <b>{{ plan_name }}</b> subscription will automatically
                renew to <b>{{ next_plan_name }}</b> on {{ date_end }}.
              {% endblocktrans %}
            </li>
            <li>
              {% blocktrans with price=renewal_plan_preview.price %}
                Your new software plan will cost <b>{{ price }}</b>.
              {% endblocktrans %}
            </li>
            {% if renewal_plan_preview.is_annual_plan %}
              <li>
                {% blocktrans %}
                  Your new subscription will require upfront payment for 12
                  months of software plan fees.
                {% endblocktrans %}
              </li>
            {% endif %}
          </ul>
          <p>
            {% blocktrans %}
              For more information about CommCare software plans, visit
              <a
                href="https://dimagi.atlassian.net/wiki/spaces/commcarepublic/pages/2420015134/CommCare+Pricing+Overview#Detailed-Software-Plan-%26-Feature-Comparisons"
                target="_blank"
                >our help site</a
              >.
            {% endblocktrans %}
          </p>
        {% endif %}
      </div>
      <div class="modal-footer">
        <form
          method="post"
          action="
          {% if plan.is_auto_renew %}
            {% url 'disable_auto_renew' domain %}
          {% else %}
            {% url 'enable_auto_renew' domain %}
          {% endif %}"
        >
          {% csrf_token %}
          <button type="button" class="btn btn-default" data-dismiss="modal">
            {% trans "Cancel" %}
          </button>
          {% if plan.is_auto_renew %}
            <button class="btn btn-danger" type="submit">
              {% trans "Disable Auto Renewal" %}
            </button>
          {% else %}
            <button class="btn btn-primary" type="submit">
              {% trans "Enable Auto Renewal" %}
            </button>
          {% endif %}
        </form>
      </div>
    </div>
  </div>
</div>
