{% extends 'hqwebapp/bootstrap5/base_section.html' %}
{% load hq_shared_tags %}
{% load i18n %}

{% js_entry "hqwebapp/js/htmx_and_alpine" %}

{% block page_title %}
  {% trans 'CSQL Fixture Configuration' %}
{% endblock %}

{% block page_content %}
  <div x-data="{
                expressionConfiguration: {{ csql_fixture_configuration|safe }},
                addExpressionRow() {
                    this.expressionConfiguration.push({ name: '', csql: '', id: ''});
                },
                removeRow(expression) {
                  this.expressionConfiguration = this.expressionConfiguration.filter((item) => item.id !== expression.id);
                }
            }">
    <div id="response-message"></div>
    <p/>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th class="col-sm-2">
            {% trans "Name" %}
          </th>
          <th class="col-sm-7">
            {% trans "Case Search QL Expression" %}
          </th>
          <th class="col-sm-1">
            {% trans "Status" %}
          </th>
          <th class="col-sm-1">
            {% trans "Save" %}
          </th>
          <th class="col-sm-1">
            {% trans "Delete" %}
          </th>
      </thead>
      <tbody>
        <template x-for="expression in expressionConfiguration">
          {% include 'fixtures/partials/expression_row.html' %}
        </template>
      </tbody>
    </table>
    <button type="button" class="btn btn-default" @click="addExpressionRow()">
      <i class="fa fa-plus"></i>
      {% trans "Add Expression" %}
    </button>
  </div>
{% endblock %}
