# Generated by Django 4.2.20 on 2025-04-09 20:59

from django.db import migrations, models


def _rename_community_to_free(apps, schema_editor):
    DefaultProductPlan = apps.get_model('accounting', 'DefaultProductPlan')
    SoftwarePlan = apps.get_model('accounting', 'SoftwarePlan')

    DefaultProductPlan.objects.filter(edition='Community').update(edition='Free')
    SoftwarePlan.objects.filter(edition='Community').update(edition='Free')


def _rename_free_to_community(apps, schema_editor):
    DefaultProductPlan = apps.get_model('accounting', 'DefaultProductPlan')
    SoftwarePlan = apps.get_model('accounting', 'SoftwarePlan')

    DefaultProductPlan.objects.filter(edition='Free').update(edition='Community')
    SoftwarePlan.objects.filter(edition='Free').update(edition='Community')


class Migration(migrations.Migration):

    dependencies = [
        (
            "accounting", "0101_update_standard_plan_pricing_users_and_privs",
        ),
    ]

    operations = [
        migrations.AlterField(
            model_name="defaultproductplan",
            name="edition",
            field=models.CharField(
                choices=[
                    ("Free", "Free"),
                    ("Standard", "Standard"),
                    ("Pro", "Pro"),
                    ("Advanced", "Advanced"),
                    ("Enterprise", "Enterprise"),
                    ("Paused", "Paused"),
                    ("Reseller", "Reseller"),
                    ("Managed Hosting", "Managed Hosting"),
                ],
                default="Free",
                max_length=25,
            ),
        ),
        migrations.AlterField(
            model_name="softwareplan",
            name="edition",
            field=models.CharField(
                choices=[
                    ("Free", "Free"),
                    ("Standard", "Standard"),
                    ("Pro", "Pro"),
                    ("Advanced", "Advanced"),
                    ("Enterprise", "Enterprise"),
                    ("Paused", "Paused"),
                    ("Reseller", "Reseller"),
                    ("Managed Hosting", "Managed Hosting"),
                ],
                default="Enterprise",
                max_length=25,
            ),
        ),
        migrations.RunPython(_rename_community_to_free, reverse_code=_rename_free_to_community),
    ]
