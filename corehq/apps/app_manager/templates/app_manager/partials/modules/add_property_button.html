{% load i18n %}
{% load hq_shared_tags %}
<div class="btn-group">
  <button class="btn btn-default" data-bind="click: addProperty">
    <i class="fa fa-plus"></i>
    {% trans "Add Property" %}
  </button>
  {% if request|toggle_enabled:'GRAPH_CREATION' %}
    <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
      <li data-bind="click: addProperty"><a>{% trans "Property" %}</a></li>

      <!-- ko if: hasGraphing -->
      <li data-bind="click: addGraph"><a>{% trans "Graph" %}</a></li>
      <!-- /ko -->
      <!-- ko ifnot: hasGraphing -->
      <li class="disabled">
        <a>{% trans "Graph <small>(upgrade to 2.17 or greater)</small>" %}</a>
      </li>
      <!-- /ko -->

      <!-- ko if: hasXpathExpressions -->
      <li data-bind="click: addXpathExpression">
        <a>{% trans "Calculated Property" %}</a>
      </li>
      <!-- /ko -->
    </ul>
  {% else %}
    <!-- ko if: hasXpathExpressions -->
    <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
      <li data-bind="click: addProperty"><a>{% trans "Property" %}</a></li>
      <li data-bind="click: addXpathExpression">
        <a>{% trans "Calculated Property" %}</a>
      </li>
    </ul>
    <!-- /ko -->
  {% endif %}
</div>
