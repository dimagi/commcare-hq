{% load i18n %}
{% load xforms_extras %}
{% load hq_shared_tags %}

{% initial_page_data 'lang' lang %}
{% initial_page_data 'translations' translations %}
{% initial_page_data 'smart_lang_display_enabled' smart_lang_display_enabled %}
{% registerurl "edit_app_langs" domain app.id %}
{% registerurl "edit_app_ui_translations" domain app.id %}
{% registerurl "get_app_ui_translations" domain %}

<div class="accordion" id="language-settings-options">
  {% if not is_linked_app %}
    <div class="accordion-item">
        <h5 class="accordion-header">
          <a
            href="#supported-languages"
            class="accordion-button fs-5"
            data-bs-toggle="collapse"
            data-bs-target="#supported-languages"
          >{% trans "Language List" %}
          </a>
        </h5>
      <div
        class="accordion-collapse collapse show"
        id="supported-languages"
        data-bs-parent="#language-settings-options"
      >
        <div class="accordion-body">
          {% include "app_manager/partials/settings/bootstrap5/supported_languages.html" with show_smart_lang_option='true' %}
        </div>
      </div>
    </div>
  {% endif %}

  {% if not is_remote_app and not is_linked_app %}
    <div class="accordion-item">
        <h5 class="accordion-header">
          <a
            href="#commcare-translations"
            class="accordion-button fs-5 collapsed"
            data-bs-toggle="collapse"
            data-bs-target="#commcare-translations"
          >{% trans "CommCare Translations" %}
          </a>
        </h5>
      <div
        class="accordion-collapse collapse"
        id="commcare-translations"
        data-bs-parent="#language-settings-options"
      >
        <div class="accordion-body">
          <section id="translations_ui">
          </section>
        </div>
      </div>
    </div>
  {% endif %}

  {% if not app.is_remote_app %}
    <div class="accordion-item">
        <h5 class="accordion-header">
          <a
            href="#bulk-commcare-translations"
            class="accordion-button fs-5 collapsed"
            data-bs-toggle="collapse"
            data-bs-target="#bulk-commcare-translations"
          >{% trans "Bulk CommCare Translations" %}
          </a>
        </h5>
      <div
        class="accordion-collapse collapse"
        id="bulk-commcare-translations"
        data-bs-parent="#language-settings-options"
      >
        <div class="accordion-body">
          {% include "hqwebapp/partials/bootstrap5/bulk_upload.html" with bulk_upload=bulk_ui_translation_upload bulk_upload_form=bulk_ui_translation_form no_header=True %}
        </div>
      </div>
    </div>
  {% endif %}

  {% if not is_linked_app %}
    <div class="accordion-item">
        <h5 class="accordion-header">
          <a
            href="#bulk-application-translations"
            class="accordion-button fs-5 collapsed"
            data-bs-toggle="collapse"
            data-bs-target="#bulk-application-translations"
          >{% trans "Bulk Application Translations" %}
          </a>
        </h5>
      <div
        class="accordion-collapse collapse"
        id="bulk-application-translations"
        data-bs-parent="#language-settings-options"
      >
        <div class="accordion-body">
          {% include "app_manager/partials/bootstrap5/bulk_upload_app_translations.html" with bulk_upload=bulk_app_translation_upload bulk_upload_form=bulk_app_translation_form no_header=True langs=app.langs %}
        </div>
      </div>
    </div>

  {% endif %}

</div>
