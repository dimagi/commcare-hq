--- 
+++ 
@@ -1,4 +1,4 @@
-{% extends 'app_manager/v1/managed_app.html'%}
+{% extends 'app_manager/v2/managed_app.html'%}
 {% load xforms_extras %}
 {% load hq_shared_tags %}
 {% load i18n %}
@@ -12,6 +12,15 @@
     {% elif vellum_debug == "dev-min" %}
         <link href="{% static 'formdesigner/_build/style.css' %}" type="text/css" rel="stylesheet"/>
     {% endif %}
+{% endblock %}
+
+{% block stylesheets %}{{ block.super }}
+  <style type="text/css">
+    .hq-container {
+      padding-bottom: 0;
+      margin-bottom: 0;
+    }
+  </style>
 {% endblock %}
 
 {% block js %}{{ block.super }}
@@ -56,6 +65,7 @@
                 onFormSave: function (data) {
                     var app_manager = hqImport('app_manager/js/app_manager.js')
                     app_manager.updateDOM(data.update);
+                    $('.js-preview-toggle').removeAttr('disabled');
                     {% if request.couch_user.days_since_created == 0 %}
                         analytics.workflow('Saved the Form Builder within first 24 hours');
                     {% endif %}
@@ -72,6 +82,11 @@
                     {% if request.guided_tour %}
                     form_tour_start();
                     {% endif %}
+                    if ($('.fd-question-tree li').length > 0) {
+                      setTimeout(function () {
+                        $('.js-preview-toggle').removeAttr('disabled');
+                      }, 1500);
+                    }
                     {% if request.couch_user.days_since_created == 0 %}
                         $("#formdesigner").vellum("get").data.core.form.on("question-create", function() {
                             analytics.workflow('Added question in Form Builder within first 24 hours');
@@ -83,6 +98,11 @@
                     {% if request.guided_tour %}
                     form_tour_start();
                     {% endif %}
+                    if ($('.fd-question-tree li').length > 0) {
+                      setTimeout(function () {
+                        $('.js-preview-toggle').removeAttr('disabled');
+                      }, 1500);
+                    }
                 },
                 {% endif %}
                 sessionid: {{ sessionid|JSON }},
@@ -126,12 +146,11 @@
             csrftoken: $.cookie('csrftoken')
         };
 
-        {% include 'app_manager/v1/partials/form_designer_requirejs_config.html' with vellum_debug=vellum_debug %}
+        {% include 'app_manager/v2/partials/form_designer_requirejs_config.html' with vellum_debug=vellum_debug %}
 
         require(["jquery", "jquery.vellum", "moment"], function ($) {
             $(function () {
                 $("#edit").hide();
-                $('#hq-footer').hide();
 
                 $('#formdesigner').vellum(VELLUM_OPTIONS);
 
@@ -148,14 +167,67 @@
             });
         });
         analytics.workflow('Entered the Form Builder');
+        $(function () {
+            var previewApp = hqImport('app_manager/js/preview_app.js');
+
+            {% if form.requires_case or form.get_action_type == 'open' %}
+            // todo make this a more broadly used util, perhaps? actually add buttons to formplayer?
+            var _prependTemplateToSelector = function (selector, layout, attempts, callback) {
+                attempts = attempts || 0;
+                if ($(selector).length) {
+                    var $toggleParent = $(selector);
+                    $toggleParent.prepend(layout);
+                    callback();
+                } else if (attempts <= 30) {
+                    // give up appending element after waiting 30 seconds to load
+                    setTimeout(function () {
+                        _prependTemplateToSelector(selector, layout, attempts++, callback);
+                    }, 1000);
+                }
+            };
+            _prependTemplateToSelector(
+                '.fd-form-actions',
+                $('#js-fd-manage-case').html(),
+                0,
+                function () {
+                    previewApp.appendToggleTo('.fd-form-actions', $('#js-fd-app-preview-btn-template').html());
+                }
+            );
+            {% else %}
+                previewApp.appendToggleTo('.fd-form-actions', $('#js-fd-app-preview-btn-template').html());
+            {% endif %}
+
+        });
 
     </script>
+
+    {% if can_preview_form %}
+    <script type="text/html" id="js-fd-app-preview-btn-template">
+      <div class="btn-group js-preview-toggle-container">
+        <button class="btn btn-info js-preview-toggle" type="button" disabled="disabled">
+          <span class="js-preview-action-show hide"><i class="fa fa-play-circle"></i> {% trans "Preview App" %}</span>
+          <span class="js-preview-action-hide hide"><i class="fa fa-pause-circle"></i> {% trans "Preview App" %}</span>
+        </button>
+      </div>
+    </script>
+    {% endif %}
+
+    <script type="text/html" id="js-fd-manage-case">
+      <div class="btn-group pull-right">
+        <a class="btn btn-manage" href="{% url "view_form" domain app.id module.id form.id %}">
+          <i class="fa fa-cog"></i> {% trans 'Manage Case' %}
+        </a>
+      </div>
+    </script>
+
 {% endblock %}
 
 {% block title %}{{ form.name|clean_trans:langs }}{% endblock %}
 
 {% block form-view %}
-    <div id="formdesigner" class="clearfix"></div>
+    <div id="formdesigner" class="clearfix app-manager-v2"></div>
 {% endblock %}
 
 {% block column_style %}hq-flush-content{% endblock %}
+
+{% block footer %}{% endblock %}
