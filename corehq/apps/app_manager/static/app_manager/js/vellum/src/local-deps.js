(function(){var e=this,t=e._,n={},a=Array.prototype,i=Object.prototype,s=Function.prototype,r=a.push,o=a.slice,l=a.concat,d=i.toString,c=i.hasOwnProperty,h=a.forEach,u=a.map,p=a.reduce,f=a.reduceRight,_=a.filter,g=a.every,m=a.some,v=a.indexOf,x=a.lastIndexOf,j=Array.isArray,y=Object.keys,b=s.bind,k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.5.2";var w=k.each=k.forEach=function(e,t,a){if(null!=e)if(h&&e.forEach===h)e.forEach(t,a);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(a,e[i],i,e)===n)return}else for(var r=k.keys(e),i=0,s=r.length;s>i;i++)if(t.call(a,e[r[i]],r[i],e)===n)return};k.map=k.collect=function(e,t,n){var a=[];return null==e?a:u&&e.map===u?e.map(t,n):(w(e,function(e,i,s){a.push(t.call(n,e,i,s))}),a)};var C="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,n,a){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return a&&(t=k.bind(t,a)),i?e.reduce(t,n):e.reduce(t);if(w(e,function(e,s,r){i?n=t.call(a,n,e,s,r):(n=e,i=!0)}),!i)throw new TypeError(C);return n},k.reduceRight=k.foldr=function(e,t,n,a){var i=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return a&&(t=k.bind(t,a)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var r=k.keys(e);s=r.length}if(w(e,function(o,l,d){l=r?r[--s]:--s,i?n=t.call(a,n,e[l],l,d):(n=e[l],i=!0)}),!i)throw new TypeError(C);return n},k.find=k.detect=function(e,t,n){var a;return S(e,function(e,i,s){return t.call(n,e,i,s)?(a=e,!0):void 0}),a},k.filter=k.select=function(e,t,n){var a=[];return null==e?a:_&&e.filter===_?e.filter(t,n):(w(e,function(e,i,s){t.call(n,e,i,s)&&a.push(e)}),a)},k.reject=function(e,t,n){return k.filter(e,function(e,a,i){return!t.call(n,e,a,i)},n)},k.every=k.all=function(e,t,a){t||(t=k.identity);var i=!0;return null==e?i:g&&e.every===g?e.every(t,a):(w(e,function(e,s,r){return(i=i&&t.call(a,e,s,r))?void 0:n}),!!i)};var S=k.some=k.any=function(e,t,a){t||(t=k.identity);var i=!1;return null==e?i:m&&e.some===m?e.some(t,a):(w(e,function(e,s,r){return i||(i=t.call(a,e,s,r))?n:void 0}),!!i)};k.contains=k.include=function(e,t){return null==e?!1:v&&e.indexOf===v?-1!=e.indexOf(t):S(e,function(e){return e===t})},k.invoke=function(e,t){var n=o.call(arguments,2),a=k.isFunction(t);return k.map(e,function(e){return(a?t:e[t]).apply(e,n)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,t,n){return k.isEmpty(t)?n?void 0:[]:k[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},k.findWhere=function(e,t){return k.where(e,t,!0)},k.max=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&k.isEmpty(e))return-1/0;var a={computed:-1/0,value:-1/0};return w(e,function(e,i,s){var r=t?t.call(n,e,i,s):e;r>a.computed&&(a={value:e,computed:r})}),a.value},k.min=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&k.isEmpty(e))return 1/0;var a={computed:1/0,value:1/0};return w(e,function(e,i,s){var r=t?t.call(n,e,i,s):e;r<a.computed&&(a={value:e,computed:r})}),a.value},k.shuffle=function(e){var t,n=0,a=[];return w(e,function(e){t=k.random(n++),a[n-1]=a[t],a[t]=e}),a},k.sample=function(e,t,n){return arguments.length<2||n?e[k.random(e.length-1)]:k.shuffle(e).slice(0,Math.max(0,t))};var T=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(e,t,n){var a=T(t);return k.pluck(k.map(e,function(e,t,i){return{value:e,index:t,criteria:a.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,a=t.criteria;if(n!==a){if(n>a||void 0===n)return 1;if(a>n||void 0===a)return-1}return e.index-t.index}),"value")};var I=function(e){return function(t,n,a){var i={},s=null==n?k.identity:T(n);return w(t,function(n,r){var o=s.call(a,n,r,t);e(i,o,n)}),i}};k.groupBy=I(function(e,t,n){(k.has(e,t)?e[t]:e[t]=[]).push(n)}),k.indexBy=I(function(e,t,n){e[t]=n}),k.countBy=I(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,n,a){n=null==n?k.identity:T(n);for(var i=n.call(a,t),s=0,r=e.length;r>s;){var o=s+r>>>1;n.call(a,e[o])<i?s=o+1:r=o}return s},k.toArray=function(e){return e?k.isArray(e)?o.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:o.call(e,0,t)},k.initial=function(e,t,n){return o.call(e,0,e.length-(null==t||n?1:t))},k.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return o.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var A=function(e,t,n){return t&&k.every(e,k.isArray)?l.apply(n,e):(w(e,function(e){k.isArray(e)||k.isArguments(e)?t?r.apply(n,e):A(e,t,n):n.push(e)}),n)};k.flatten=function(e,t){return A(e,t,[])},k.without=function(e){return k.difference(e,o.call(arguments,1))},k.uniq=k.unique=function(e,t,n,a){k.isFunction(t)&&(a=n,n=t,t=!1);var i=n?k.map(e,n,a):e,s=[],r=[];return w(i,function(n,a){(t?a&&r[r.length-1]===n:k.contains(r,n))||(r.push(n),s.push(e[a]))}),s},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=o.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.indexOf(t,e)>=0})})},k.difference=function(e){var t=l.apply(a,o.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=k.pluck(arguments,""+n);return t},k.object=function(e,t){if(null==e)return{};for(var n={},a=0,i=e.length;i>a;a++)t?n[e[a]]=t[a]:n[e[a][0]]=e[a][1];return n},k.indexOf=function(e,t,n){if(null==e)return-1;var a=0,i=e.length;if(n){if("number"!=typeof n)return a=k.sortedIndex(e,t),e[a]===t?a:-1;a=0>n?Math.max(0,i+n):n}if(v&&e.indexOf===v)return e.indexOf(t,n);for(;i>a;a++)if(e[a]===t)return a;return-1},k.lastIndexOf=function(e,t,n){if(null==e)return-1;var a=null!=n;if(x&&e.lastIndexOf===x)return a?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=a?n:e.length;i--;)if(e[i]===t)return i;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var a=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(a);a>i;)s[i++]=e,e+=n;return s};var $=function(){};k.bind=function(e,t){var n,a;if(b&&e.bind===b)return b.apply(e,o.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return n=o.call(arguments,2),a=function(){if(!(this instanceof a))return e.apply(t,n.concat(o.call(arguments)));$.prototype=e.prototype;var i=new $;$.prototype=null;var s=e.apply(i,n.concat(o.call(arguments)));return Object(s)===s?s:i}},k.partial=function(e){var t=o.call(arguments,1);return function(){return e.apply(this,t.concat(o.call(arguments)))}},k.bindAll=function(e){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return w(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var n={};return t||(t=k.identity),function(){var a=t.apply(this,arguments);return k.has(n,a)?n[a]:n[a]=e.apply(this,arguments)}},k.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(o.call(arguments,1)))},k.throttle=function(e,t,n){var a,i,s,r=null,o=0;n||(n={});var l=function(){o=n.leading===!1?0:new Date,r=null,s=e.apply(a,i)};return function(){var d=new Date;o||n.leading!==!1||(o=d);var c=t-(d-o);return a=this,i=arguments,0>=c?(clearTimeout(r),r=null,o=d,s=e.apply(a,i)):r||n.trailing===!1||(r=setTimeout(l,c)),s}},k.debounce=function(e,t,n){var a,i,s,r,o;return function(){s=this,i=arguments,r=new Date;var l=function(){var d=new Date-r;t>d?a=setTimeout(l,t-d):(a=null,n||(o=e.apply(s,i)))},d=n&&!a;return a||(a=setTimeout(l,t)),d&&(o=e.apply(s,i)),o}},k.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return function(){var n=[e];return r.apply(n,arguments),t.apply(this,n)}},k.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=y||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)k.has(e,n)&&t.push(n);return t},k.values=function(e){for(var t=k.keys(e),n=t.length,a=new Array(n),i=0;n>i;i++)a[i]=e[t[i]];return a},k.pairs=function(e){for(var t=k.keys(e),n=t.length,a=new Array(n),i=0;n>i;i++)a[i]=[t[i],e[t[i]]];return a},k.invert=function(e){for(var t={},n=k.keys(e),a=0,i=n.length;i>a;a++)t[e[n[a]]]=n[a];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(e){return w(o.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},k.pick=function(e){var t={},n=l.apply(a,o.call(arguments,1));return w(n,function(n){n in e&&(t[n]=e[n])}),t},k.omit=function(e){var t={},n=l.apply(a,o.call(arguments,1));for(var i in e)k.contains(n,i)||(t[i]=e[i]);return t},k.defaults=function(e){return w(o.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var O=function(e,t,n,a){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var i=d.call(e);if(i!=d.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return a[s]==t;var r=e.constructor,o=t.constructor;if(r!==o&&!(k.isFunction(r)&&r instanceof r&&k.isFunction(o)&&o instanceof o))return!1;n.push(e),a.push(t);var l=0,c=!0;if("[object Array]"==i){if(l=e.length,c=l==t.length)for(;l--&&(c=O(e[l],t[l],n,a)););}else{for(var h in e)if(k.has(e,h)&&(l++,!(c=k.has(t,h)&&O(e[h],t[h],n,a))))break;if(c){for(h in t)if(k.has(t,h)&&!l--)break;c=!l}}return n.pop(),a.pop(),c};k.isEqual=function(e,t){return O(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=j||function(e){return"[object Array]"==d.call(e)},k.isObject=function(e){return e===Object(e)},w(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return d.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==d.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return c.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.times=function(e,t,n){for(var a=Array(Math.max(0,e)),i=0;e>i;i++)a[i]=t.call(n,i);return a},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var q={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};q.unescape=k.invert(q.escape);var N={escape:new RegExp("["+k.keys(q.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(q.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(N[e],function(t){return q[e][t]})}}),k.result=function(e,t){if(null==e)return void 0;var n=e[t];return k.isFunction(n)?n.call(e):n},k.mixin=function(e){w(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),P.call(this,n.apply(k,e))}})};var D=0;k.uniqueId=function(e){var t=++D+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,E={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,n){var a;n=k.defaults({},n,k.templateSettings);var i=new RegExp([(n.escape||F).source,(n.interpolate||F).source,(n.evaluate||F).source].join("|")+"|$","g"),s=0,r="__p+='";e.replace(i,function(t,n,a,i,o){return r+=e.slice(s,o).replace(M,function(e){return"\\"+E[e]}),n&&(r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),a&&(r+="'+\n((__t=("+a+"))==null?'':__t)+\n'"),i&&(r+="';\n"+i+"\n__p+='"),s=o+t.length,t}),r+="';\n",n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{a=new Function(n.variable||"obj","_",r)}catch(o){throw o.source=r,o}if(t)return a(t,k);var l=function(e){return a.call(this,e,k)};return l.source="function("+(n.variable||"obj")+"){\n"+r+"}",l},k.chain=function(e){return k(e).chain()};var P=function(e){return this._chain?k(e).chain():e};k.mixin(k),w(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],P.call(this,n)}}),w(["concat","join","slice"],function(e){var t=a[e];k.prototype[e]=function(){return P.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),define("underscore",function(e){return function(){var t;return t||e._}}(this)),define("css/css!../lib/jstree/default/style",[],function(){}),function(){if(!jQuery||!jQuery.jstree){var e=!1,t=!1,n=!1;!function(a){a.vakata={},a.vakata.css={get_css:function(e,t,n){e=e.toLowerCase();var a=n.cssRules||n.rules,i=0;do{if(a.length&&i>a.length+5)return!1;if(a[i].selectorText&&a[i].selectorText.toLowerCase()==e)return t===!0?(n.removeRule&&n.removeRule(i),n.deleteRule&&n.deleteRule(i),!0):a[i]}while(a[++i]);return!1},add_css:function(e,t){return a.jstree.css.get_css(e,!1,t)?!1:(t.insertRule?t.insertRule(e+" { }",0):t.addRule(e,null,0),a.vakata.css.get_css(e))},remove_css:function(e,t){return a.vakata.css.get_css(e,!0,t)},add_sheet:function(e){var t=!1,n=!0;if(e.str)return e.title&&(t=a("style[id='"+e.title+"-stylesheet']")[0]),t?n=!1:(t=document.createElement("style"),t.setAttribute("type","text/css"),e.title&&t.setAttribute("id",e.title+"-stylesheet")),t.styleSheet?n?(document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet.cssText=e.str):t.styleSheet.cssText=t.styleSheet.cssText+" "+e.str:(t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t)),t.sheet||t.styleSheet;if(e.url){if(!document.createStyleSheet)return t=document.createElement("link"),t.rel="stylesheet",t.type="text/css",t.media="all",t.href=e.url,document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet;try{t=document.createStyleSheet(e.url)}catch(i){}}}};var i=[],s=-1,r={},o={};a.fn.jstree=function(e){var t="string"==typeof e,n=Array.prototype.slice.call(arguments,1),s=this;if(t){if("_"==e.substring(0,1))return s;this.each(function(){var t=i[a.data(this,"jstree_instance_id")],r=t&&a.isFunction(t[e])?t[e].apply(t,n):t;return"undefined"!=typeof r&&(0===e.indexOf("is_")||r!==!0&&r!==!1)?(s=r,!1):void 0})}else this.each(function(){var t=a.data(this,"jstree_instance_id"),s=[],o=e?a.extend({},!0,e):{},l=a(this),d=!1,c=[];s=s.concat(n),l.data("jstree")&&s.push(l.data("jstree")),o=s.length?a.extend.apply(null,[!0,o].concat(s)):o,"undefined"!=typeof t&&i[t]&&i[t].destroy(),t=parseInt(i.push({}),10)-1,a.data(this,"jstree_instance_id",t),o.plugins=a.isArray(o.plugins)?o.plugins:a.jstree.defaults.plugins.slice(),o.plugins.unshift("core"),o.plugins=o.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),d=a.extend(!0,{},a.jstree.defaults,o),d.plugins=o.plugins,a.each(r,function(e){-1===a.inArray(e,d.plugins)?(d[e]=null,delete d[e]):c.push(e)}),d.plugins=c,i[t]=new a.jstree._instance(t,a(this).addClass("jstree jstree-"+t),d),a.each(i[t]._get_settings().plugins,function(e,n){i[t].data[n]={}}),a.each(i[t]._get_settings().plugins,function(e,n){r[n]&&r[n].__init.apply(i[t])}),setTimeout(function(){i[t]&&i[t].init()},0)});return s},a.jstree={defaults:{plugins:[]},_focused:function(){return i[s]||null},_reference:function(e){if(i[e])return i[e];var t=a(e);return t.length||"string"!=typeof e||(t=a("#"+e)),t.length?i[t.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(e,t,n){this.data={core:{}},this.get_settings=function(){return a.extend(!0,{},n)},this._get_settings=function(){return n},this.get_index=function(){return e},this.get_container=function(){return t},this.get_container_ul=function(){return t.children("ul:eq(0)")},this._set_settings=function(e){n=a.extend(!0,{},n,e)}},_fn:{},plugin:function(e,t){t=a.extend({},{__init:a.noop,__destroy:a.noop,_fn:{},defaults:!1},t),r[e]=t,a.jstree.defaults[e]=t.defaults,a.each(t._fn,function(t,n){n.plugin=e,n.old=a.jstree._fn[t],a.jstree._fn[t]=function(){var e,i=n,s=Array.prototype.slice.call(arguments),r=new a.Event("before.jstree"),o=!1;if(this.data.core.locked!==!0||"unlock"===t||"is_locked"===t){do{if(i&&i.plugin&&-1!==a.inArray(i.plugin,this._get_settings().plugins))break;i=i.old}while(i);if(i){if(0===t.indexOf("_"))e=i.apply(this,s);else{if(e=this.get_container().triggerHandler(r,{func:t,inst:this,args:s,plugin:i.plugin}),e===!1)return;"undefined"!=typeof e&&(s=e),e=i.apply(a.extend({},this,{__callback:function(e){this.get_container().triggerHandler(t+".jstree",{inst:this,args:s,rslt:e,rlbk:o})},__rollback:function(){return o=this.get_rollback()},__call_old:function(e){return i.old.apply(this,e?Array.prototype.slice.call(arguments,1):s)}}),s)}return e}}},a.jstree._fn[t].old=n.old,a.jstree._fn[t].plugin=e})},rollback:function(e){e&&(a.isArray(e)||(e=[e]),a.each(e,function(e,t){i[t.i].set_rollback(t.h,t.d)}))}},a.jstree._fn=a.jstree._instance.prototype={},a(function(){var i=navigator.userAgent.toLowerCase(),s=(i.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],r=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(/msie/.test(i)&&6==parseInt(s,10)){e=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(o){}r+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(i)&&7==parseInt(s,10)&&(t=!0,r+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),!/compatible/.test(i)&&/mozilla/.test(i)&&parseFloat(s,10)<1.9&&(n=!0,r+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "),a.vakata.css.add_sheet({str:r,title:"jstree"})}),a.jstree.plugin("core",{__init:function(){this.data.core.locked=!1,this.data.core.to_open=this.get_settings().core.initially_open,this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus(),this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl"),this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>"),this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",a.proxy(function(e){var t=a(e.target);this.toggle_node(t)},this)).bind("mousedown.jstree",a.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(){var e;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(t){}}}),this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",a.proxy(function(e,t){var n=this._get_node(t.rslt.obj),i=this;-1===n&&(n=this.get_container_ul()),n.length&&n.find("li").each(function(){var e=a(this);e.data("jstree")&&a.each(e.data("jstree"),function(t,n){i.data[t]&&a.isFunction(i["_"+t+"_notify"])&&i["_"+t+"_notify"].call(i,e,n)})})},this)),this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",a.proxy(function(e,t){var n=this._get_node(t.rslt.obj),i=this;-1===n&&(n=this.get_container_ul()),n.length&&n.find("li.jstree-open:not(:has(ul))").each(function(){i.load_node(this,a.noop,a.noop)})},this)),this.__callback(),this.load_node(-1,function(){this.loaded(),this.reload_nodes()})},destroy:function(){var e,t=this.get_index(),n=this._get_settings(),o=this;if(a.each(n.plugins,function(e,t){try{r[t].__destroy.apply(o)}catch(n){}}),this.__callback(),this.is_focused())for(e in i)if(i.hasOwnProperty(e)&&e!=t){i[e].set_focus();break}t===s&&(s=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),a(document).unbind(".jstree-"+t).undelegate(".jstree-"+t),i[t]=null,delete i[t]},_core_notify:function(e,t){t.opened&&this.open_node(e,!1,!0)},lock:function(){this.data.core.locked=!0,this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7"),this.__callback({})},unlock:function(){this.data.core.locked=!1,this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1"),this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var e=this;this.data.core.to_open=[],this.get_container_ul().find("li.jstree-open").each(function(){this.id&&e.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(e.data.core.to_open)},save_loaded:function(){},reload_nodes:function(e){var t=this,n=!0,i=[],s=[];e||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=a.map(a.makeArray(this.data.core.to_open),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=a.map(a.makeArray(this.data.core.to_load),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open))),this.data.core.to_load.length&&(a.each(this.data.core.to_load,function(e,t){return"#"==t?!0:void(a(t).length?i.push(t):s.push(t))}),i.length&&(this.data.core.to_load=s,a.each(i,function(e,a){t._is_loaded(a)||(t.load_node(a,function(){t.reload_nodes(!0)},function(){t.reload_nodes(!0)}),n=!1)}))),this.data.core.to_open.length&&a.each(this.data.core.to_open,function(e,n){t.open_node(n,!1,!0)}),n&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){t.__callback({},t)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var e=this;this.data.core.to_open.length&&a.each(this.data.core.to_open,function(t,n){e.open_node(n,!1,!0)}),this.__callback({})},refresh:function(e){var t=this;this.save_opened(),e||(e=-1),e=this._get_node(e),e||(e=-1),-1!==e?e.children("UL").remove():this.get_container_ul().empty(),this.load_node(e,function(){t.__callback({obj:e}),t.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var e=a.jstree._focused();e&&e.unset_focus(),this.get_container().addClass("jstree-focused"),s=this.get_index(),this.__callback()}},is_focused:function(){return s==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),s=-1),this.__callback()},_get_node:function(e){var t=a(e,this.get_container());return t.is(".jstree")||-1==e?-1:(t=t.closest("li",this.get_container()),t.length?t:!1)},_get_next:function(e,t){return e=this._get_node(e),-1===e?this.get_container().find("> ul > li:first-child"):e.length?t?e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):!1:e.hasClass("jstree-open")?e.find("li:eq(0)"):e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):e.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(e,t){if(e=this._get_node(e),-1===e)return this.get_container().find("> ul > li:last-child");if(!e.length)return!1;if(t)return e.prevAll("li").length>0?e.prevAll("li:eq(0)"):!1;if(e.prev("li").length){for(e=e.prev("li").eq(0);e.hasClass("jstree-open");)e=e.children("ul:eq(0)").children("li:last");return e}var n=e.parentsUntil(".jstree","li:eq(0)");return n.length?n:!1},_get_parent:function(e){if(e=this._get_node(e),-1==e||!e.length)return!1;var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},_get_children:function(e){return e=this._get_node(e),-1===e?this.get_container().children("ul:eq(0)").children("li"):e.length?e.children("ul:eq(0)").children("li"):!1},get_path:function(e,t){var n=[],a=this;return e=this._get_node(e),-1!==e&&e&&e.length?(e.parentsUntil(".jstree","li").each(function(){n.push(t?this.id:a.get_text(this))}),n.reverse(),n.push(t?e.attr("id"):this.get_text(e)),n):!1},_get_string:function(e){return this._get_settings().core.strings[e]||e},is_open:function(e){return e=this._get_node(e),e&&-1!==e&&e.hasClass("jstree-open")},is_closed:function(e){return e=this._get_node(e),e&&-1!==e&&e.hasClass("jstree-closed")},is_leaf:function(e){return e=this._get_node(e),e&&-1!==e&&e.hasClass("jstree-leaf")},correct_state:function(e){return e=this._get_node(e),e&&-1!==e?(e.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove(),void this.__callback({obj:e})):!1},open_node:function(t,n,a){if(t=this._get_node(t),!t.length)return!1;if(!t.hasClass("jstree-closed"))return n&&n.call(),!1;var i=a||e?0:this._get_settings().core.animation,s=this;this._is_loaded(t)?(this._get_settings().core.open_parents&&t.parentsUntil(".jstree",".jstree-closed").each(function(){s.open_node(this,!1,!0)}),i&&t.children("ul").css("display","none"),t.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),i?t.children("ul").stop(!0,!0).slideDown(i,function(){this.style.display="",s.after_open(t)}):s.after_open(t),this.__callback({obj:t}),n&&n.call()):(t.children("a").addClass("jstree-loading"),this.load_node(t,function(){s.open_node(t,n,a)},n))},after_open:function(e){this.__callback({obj:e})},close_node:function(t,n){t=this._get_node(t);var a=n||e?0:this._get_settings().core.animation,i=this;return t.length&&t.hasClass("jstree-open")?(a&&t.children("ul").attr("style","display:block !important"),t.removeClass("jstree-open").addClass("jstree-closed"),a?t.children("ul").stop(!0,!0).slideUp(a,function(){this.style.display="",i.after_close(t)}):i.after_close(t),void this.__callback({obj:t})):!1},after_close:function(e){this.__callback({obj:e})},toggle_node:function(e){return e=this._get_node(e),e.hasClass("jstree-closed")?this.open_node(e):e.hasClass("jstree-open")?this.close_node(e):void 0},open_all:function(e,t,n){e=e?this._get_node(e):-1,e&&-1!==e||(e=this.get_container_ul()),n?e=e.find("li.jstree-closed"):(n=e,e=e.is(".jstree-closed")?e.find("li.jstree-closed").andSelf():e.find("li.jstree-closed"));var a=this;e.each(function(){var e=this;a._is_loaded(this)?a.open_node(this,!1,!t):a.open_node(this,function(){a.open_all(e,t,n)},!t)}),0===n.find("li.jstree-closed").length&&this.__callback({obj:n})},close_all:function(e,t){var n=this;e=e?this._get_node(e):this.get_container(),e&&-1!==e||(e=this.get_container_ul()),e.find("li.jstree-open").andSelf().each(function(){n.close_node(this,!t)}),this.__callback({obj:e})},clean_node:function(e){e=e&&-1!=e?a(e):this.get_container_ul(),e=e.is("li")?e.find("li").andSelf():e.find("li"),e.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),e.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(e,t){this.get_container().empty().append(e),this.data=t,this.__callback()},load_node:function(e){this.__callback({obj:e})},_is_loaded:function(){return!0},create_node:function(e,t,n,i,s){e=this._get_node(e),t="undefined"==typeof t?"last":t;var r,o=a("<li />"),l=this._get_settings().core;if(-1!==e&&!e.length)return!1;if(!s&&!this._is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,n,i,!0)}),!1;switch(this.__rollback(),"string"==typeof n&&(n={data:n}),n||(n={}),n.attr&&o.attr(n.attr),n.metadata&&o.data(n.metadata),n.state&&o.addClass("jstree-"+n.state),n.data||(n.data=this._get_string("new_node")),a.isArray(n.data)||(r=n.data,n.data=[],n.data.push(r)),a.each(n.data,function(e,t){r=a("<a />"),a.isFunction(t)&&(t=t.call(this,n)),"string"==typeof t?r.attr("href","#")[l.html_titles?"html":"text"](t):(t.attr||(t.attr={}),t.attr.href||(t.attr.href="#"),r.attr(t.attr)[l.html_titles?"html":"text"](t.title),t.language&&r.addClass(t.language)),r.prepend("<ins class='jstree-icon'>&#160;</ins>"),!t.icon&&n.icon&&(t.icon=n.icon),t.icon&&(-1===t.icon.indexOf("/")?r.children("ins").addClass(t.icon):r.children("ins").css("background","url('"+t.icon+"') center center no-repeat")),o.append(r)}),o.prepend("<ins class='jstree-icon'>&#160;</ins>"),-1===e&&(e=this.get_container(),"before"===t&&(t="first"),"after"===t&&(t="last")),t){case"before":e.before(o),r=this._get_parent(e);break;case"after":e.after(o),r=this._get_parent(e);break;case"inside":case"first":e.children("ul").length||e.append("<ul />"),e.children("ul").prepend(o),r=e;
break;case"last":e.children("ul").length||e.append("<ul />"),e.children("ul").append(o),r=e;break;default:e.children("ul").length||e.append("<ul />"),t||(t=0),r=e.children("ul").children("li").eq(t),r.length?r.before(o):e.children("ul").append(o),r=e}return(-1===r||r.get(0)===this.get_container().get(0))&&(r=-1),this.clean_node(r),this.__callback({obj:o,parent:r}),i&&i.call(this,o),o},get_text:function(e){if(e=this._get_node(e),!e.length)return!1;var t=this._get_settings().core.html_titles;return e=e.children("a:eq(0)"),t?(e=e.clone(),e.children("INS").remove(),e.html()):(e=e.contents().filter(function(){return 3==this.nodeType})[0],e.nodeValue)},set_text:function(e,t){if(e=this._get_node(e),!e.length)return!1;if(e=e.children("a:eq(0)"),this._get_settings().core.html_titles){var n=e.children("INS").clone();return e.html(t).prepend(n),this.__callback({obj:e,name:t}),!0}return e=e.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:e,name:t}),e.nodeValue=t},rename_node:function(e,t){e=this._get_node(e),this.__rollback(),e&&e.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:e,name:t})},delete_node:function(e){if(e=this._get_node(e),!e.length)return!1;this.__rollback();var t=this._get_parent(e),n=a([]),i=this;return e.each(function(){n=n.add(i._get_prev(this))}),e=e.detach(),-1!==t&&0===t.find("> ul > li").length&&t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(t),this.__callback({obj:e,prev:n,parent:t}),e},prepare_move:function(e,t,n,i,s){var r={};if(r.ot=a.jstree._reference(e)||this,r.o=r.ot._get_node(e),r.r=-1===t?-1:this._get_node(t),r.p="undefined"==typeof n||n===!1?"last":n,!s&&o.o&&o.o[0]===r.o[0]&&o.r[0]===r.r[0]&&o.p===r.p)return this.__callback(o),void(i&&i.call(this,o));if(r.ot=a.jstree._reference(r.o)||this,r.rt=a.jstree._reference(r.r)||this,-1!==r.r&&r.r){if(!/^(before|after)$/.test(r.p)&&!this._is_loaded(r.r))return this.load_node(r.r,function(){this.prepare_move(e,t,n,i,!0)});switch(r.p){case"before":r.cp=r.r.index(),r.cr=r.rt._get_parent(r.r);break;case"after":r.cp=r.r.index()+1,r.cr=r.rt._get_parent(r.r);break;case"inside":case"first":r.cp=0,r.cr=r.r;break;case"last":r.cp=r.r.find(" > ul > li").length,r.cr=r.r;break;default:r.cp=r.p,r.cr=r.r}}else switch(r.cr=-1,r.p){case"first":case"before":case"inside":r.cp=0;break;case"after":case"last":r.cp=r.rt.get_container().find(" > ul > li").length;break;default:r.cp=r.p}r.np=-1==r.cr?r.rt.get_container():r.cr,r.op=r.ot._get_parent(r.o),r.cop=r.o.index(),-1===r.op&&(r.op=r.ot?r.ot.get_container():this.get_container()),!/^(before|after)$/.test(r.p)&&r.op&&r.np&&r.op[0]===r.np[0]&&r.o.index()<r.cp&&r.cp++,r.or=r.np.find(" > ul > li:nth-child("+(r.cp+1)+")"),o=r,this.__callback(o),i&&i.call(this,o)},check_move:function(){var e=o,t=!0,n=-1===e.r?this.get_container():e.r;return e&&e.o&&e.or[0]!==e.o[0]?e.op&&e.np&&e.op[0]===e.np[0]&&e.cp-1===e.o.index()?!1:(e.o.each(function(){return-1!==n.parentsUntil(".jstree","li").andSelf().index(this)?(t=!1,!1):void 0}),t):!1},move_node:function(e,t,n,i,s,r){if(!s)return this.prepare_move(e,t,n,function(e){this.move_node(e,!1,!1,i,!0,r)});if(i&&(o.cy=!0),!r&&!this.check_move())return!1;this.__rollback();var l=!1;i?(l=e.o.clone(!0),l.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):l=e.o,e.or.length?e.or.before(l):(e.np.children("ul").length||a("<ul />").appendTo(e.np),e.np.children("ul:eq(0)").append(l));try{e.ot.clean_node(e.op),e.rt.clean_node(e.np),e.op.find("> ul > li").length||e.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(d){}return i&&(o.cy=!0,o.oc=l),this.__callback(o),o},_get_move:function(){return o}}})}(jQuery),function(e){var t,n,a;e(function(){/msie/.test(navigator.userAgent.toLowerCase())?(n=e('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),a=e('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),t=n.width()-a.width(),n.add(a).remove()):(n=e("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),t=100-n.width(),n.parent().remove())}),e.jstree.plugin("ui",{__init:function(){this.data.ui.selected=e(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",e.proxy(function(t){t.preventDefault(),t.currentTarget.blur(),e(t.currentTarget).hasClass("jstree-loading")||this.select_node(t.currentTarget,!0,t)},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.hover_node(t.target)},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.dehover_node(t.target)},this)).bind("reopen.jstree",e.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",e.proxy(function(){this.dehover_node(),this.save_selected()},this)).bind("set_rollback.jstree",e.proxy(function(){this.reselect()},this)).bind("close_node.jstree",e.proxy(function(t,n){var a=this._get_settings().ui,i=this._get_node(n.rslt.obj),s=i&&i.length?i.children("ul").find("a.jstree-clicked"):e(),r=this;a.selected_parent_close!==!1&&s.length&&s.each(function(){r.deselect_node(this),"select_parent"===a.selected_parent_close&&r.select_node(i)})},this)).bind("delete_node.jstree",e.proxy(function(e,t){var n=this._get_settings().ui.select_prev_on_delete,a=this._get_node(t.rslt.obj),i=a&&a.length?a.find("a.jstree-clicked"):[],s=this;i.each(function(){s.deselect_node(this)}),n&&i.length&&t.rslt.prev.each(function(){return this.parentNode?(s.select_node(this),!1):void 0})},this)).bind("move_node.jstree",e.proxy(function(e,t){t.rslt.cy&&t.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(t,n){if("undefined"==typeof t||null===t)return n?this.data.ui.selected:this.data.ui.last_selected;var a=e(t,this.get_container());return a.is(".jstree")||-1==t?-1:(a=a.closest("li",this.get_container()),a.length?a:!1)},_ui_notify:function(e,t){t.selected&&this.select_node(e,!1)},save_selected:function(){var e=this;this.data.ui.to_select=[],this.data.ui.selected.each(function(){this.id&&e.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(this.data.ui.to_select)},reselect:function(){var t=this,n=this.data.ui.to_select;n=e.map(e.makeArray(n),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),e.each(n,function(e,n){n&&"#"!==n&&t.select_node(n)}),this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode}),this.__callback()},refresh:function(){return this.save_selected(),this.__call_old()},hover_node:function(e){return e=this._get_node(e),e.length?(e.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent(),this._fix_scroll(e),void this.__callback({obj:e})):!1},dehover_node:function(){var e,t=this.data.ui.hovered;return t&&t.length?(e=t.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===e[0]&&(this.data.ui.hovered=null),void this.__callback({obj:t})):!1},select_node:function(e,t,n){if(e=this._get_node(e),-1==e||!e||!e.length)return!1;var a=this._get_settings().ui,i="on"==a.select_multiple_modifier||a.select_multiple_modifier!==!1&&n&&n[a.select_multiple_modifier+"Key"],s=a.select_range_modifier!==!1&&n&&n[a.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==e[0]&&this.data.ui.last_selected.parent()[0]===e.parent()[0],r=this.is_selected(e),o=!0,l=this;if(t){if(a.disable_selecting_children&&i&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked").length||e.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;switch(o=!1,!0){case s:this.data.ui.last_selected.addClass("jstree-last-selected"),e=e[e.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf(),-1==a.select_limit||e.length<a.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==l.data.ui.last_selected[0]&&l.deselect_node(this)}),r=!1,o=!0):o=!1;break;case r&&!i:this.deselect_all(),r=!1,o=!0;break;case!r&&!i:(-1==a.select_limit||a.select_limit>0)&&(this.deselect_all(),o=!0);break;case r&&i:this.deselect_node(e);break;case!r&&i:(-1==a.select_limit||this.data.ui.selected.length+1<=a.select_limit)&&(o=!0)}}o&&!r&&(s||(this.data.ui.last_selected=e),e.children("a").addClass("jstree-clicked"),a.selected_parent_open&&e.parents(".jstree-closed").each(function(){l.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(e),this._fix_scroll(e.eq(0)),this.__callback({obj:e,e:n}))},_fix_scroll:function(e){var n,a=this.get_container()[0];if(a.scrollHeight>a.offsetHeight){if(e=this._get_node(e),!e||-1===e||!e.length||!e.is(":visible"))return;n=e.offset().top-this.get_container().offset().top,0>n&&(a.scrollTop=a.scrollTop+n-1),n+this.data.core.li_height+(a.scrollWidth>a.offsetWidth?t:0)>a.offsetHeight&&(a.scrollTop=a.scrollTop+(n-a.offsetHeight+this.data.core.li_height+1+(a.scrollWidth>a.offsetWidth?t:0)))}},deselect_node:function(e){return e=this._get_node(e),e.length?void(this.is_selected(e)&&(e.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(e),this.data.ui.last_selected.get(0)===e.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:e}))):!1},toggle_select:function(e){return e=this._get_node(e),e.length?void(this.is_selected(e)?this.deselect_node(e):this.select_node(e)):!1},is_selected:function(e){return this.data.ui.selected.index(this._get_node(e))>=0},get_selected:function(t){return t?e(t).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(t){var n=t?e(t).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();n.children("a.jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=e([]),this.data.ui.last_selected=!1,this.__callback({obj:n})}}}),e.jstree.defaults.plugins.push("ui")}(jQuery),function(e){e.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",e.proxy(function(e,t){if(this._get_settings().crrm.move.open_onmove){var n=this;t.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){n.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(){return!0}}},_fn:{_show_input:function(t,n){t=this._get_node(t);var a=this._get_settings().core.rtl,i=this._get_settings().crrm.input_width_limit,s=t.children("ins").width(),r=t.find("> a:visible > ins").width()*t.find("> a:visible > ins").length,o=this.get_text(t),l=e("<div />",{css:{position:"absolute",top:"-200px",left:a?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),d=t.css("position","relative").append(e("<input />",{value:o,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:a?"auto":s+r+4+"px",right:a?s+r+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:e.proxy(function(){var e=t.children(".jstree-rename-input"),a=e.val();""===a&&(a=o),l.remove(),e.remove(),this.set_text(t,o),this.rename_node(t,a),n.call(this,t,a,o),t.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;return 27==t?(this.value=o,void this.blur()):13==t?void this.blur():void d.width(Math.min(l.text("pW"+this.value).width(),i))},keypress:function(e){var t=e.keyCode||e.which;return 13==t?!1:void 0}})).children(".jstree-rename-input");this.set_text(t,""),l.css({fontFamily:d.css("fontFamily")||"",fontSize:d.css("fontSize")||"",fontWeight:d.css("fontWeight")||"",fontStyle:d.css("fontStyle")||"",fontStretch:d.css("fontStretch")||"",fontVariant:d.css("fontVariant")||"",letterSpacing:d.css("letterSpacing")||"",wordSpacing:d.css("wordSpacing")||""}),d.width(Math.min(l.text("pW"+d[0].value).width(),i))[0].select()},rename:function(e){e=this._get_node(e),this.__rollback();var t=this.__callback;this._show_input(e,function(e,n,a){t.call(this,{obj:e,new_name:n,old_name:a})})},create:function(t,n,a,i,s){var r,o=this;return t=this._get_node(t),t||(t=-1),this.__rollback(),r=this.create_node(t,n,a,function(t){var n=this._get_parent(t),a=e(t).index();i&&i.call(this,t),n.length&&n.hasClass("jstree-closed")&&this.open_node(n,!1,!0),s?o.__callback({obj:t,name:this.get_text(t),parent:n,position:a}):this._show_input(t,function(e,t){o.__callback({obj:e,name:t,parent:n,position:a})})})},remove:function(e){e=this._get_node(e,!0);var t=this._get_parent(e),n=this._get_prev(e);this.__rollback(),e=this.delete_node(e),e!==!1&&this.__callback({obj:e,prev:n,parent:t})},check_move:function(){if(!this.__call_old())return!1;var e=this._get_settings().crrm.move;return e.check_move.call(this,this._get_move())?!0:!1},move_node:function(e,t,n,a,i,s){var r=this._get_settings().crrm.move;return i?((r.always_copy===!0||"multitree"===r.always_copy&&e.rt.get_index()!==e.ot.get_index())&&(a=!0),void this.__call_old(!0,e,t,n,a,!0,s)):("undefined"==typeof n&&(n=r.default_position),"inside"!==n||r.default_position.match(/^(before|after)$/)||(n=r.default_position),this.__call_old(!0,e,t,n,a,!1,s))},cut:function(e){return e=this._get_node(e,!0),e&&e.length?(this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=e,void this.__callback({obj:e})):!1},copy:function(e){return e=this._get_node(e,!0),e&&e.length?(this.data.crrm.ct_nodes=!1,this.data.crrm.cp_nodes=e,void this.__callback({obj:e})):!1},paste:function(e){if(e=this._get_node(e),!e||!e.length)return!1;var t=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;return this.data.crrm.ct_nodes||this.data.crrm.cp_nodes?(this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,e),this.data.crrm.ct_nodes=!1),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,e,!1,!0),void this.__callback({obj:e,nodes:t})):!1}}})}(jQuery),function(e){var t=[];e.jstree._themes=!1,e.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",e.proxy(function(){var e=this._get_settings().themes;this.data.themes.dots=e.dots,this.data.themes.icons=e.icons,this.set_theme(e.theme,e.url)},this)).bind("loaded.jstree",e.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(n,a){return n?(a||(a=e.jstree._themes+n+"/style.css"),-1==e.inArray(a,t)&&t.push(a),this.data.themes.theme!=n&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=n),this.get_container().addClass("jstree-"+n),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),void this.__callback()):!1},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),e(function(){e.jstree._themes===!1&&e("script").each(function(){return this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)?(e.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1):void 0}),e.jstree._themes===!1&&(e.jstree._themes="themes/")}),e.jstree.defaults.plugins.push("themes")}(jQuery),function(e){function t(t,n){var a,i=e.jstree._focused();return i&&i.data&&i.data.hotkeys&&i.data.hotkeys.enabled&&(a=i._get_settings().hotkeys[t])?a.call(i,n):void 0}var n=[];e.jstree.plugin("hotkeys",{__init:function(){if("undefined"==typeof e.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";e.each(this._get_settings().hotkeys,function(a,i){i!==!1&&-1==e.inArray(a,n)&&(e(document).bind("keydown",a,function(e){return t(a,e)}),n.push(a))}),this.get_container().bind("lock.jstree",e.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",e.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this)),this.enable_hotkeys()},defaults:{up:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"ctrl+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"shift+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},down:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"ctrl+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"shift+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},left:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"ctrl+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"shift+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},right:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"ctrl+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"shift+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},space:function(){return this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click(),!1},"ctrl+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},"shift+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})}(jQuery),function(e){e.jstree.plugin("json_data",{__init:function(){var e=this._get_settings().json_data;e.progressive_unload&&this.get_container().bind("after_close.jstree",function(e,t){t.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(e,t,n){var a=this;this.load_node_json(e,function(){a.__callback({obj:a._get_node(e)}),t.call(this)},n)},_is_loaded:function(t){var n=this._get_settings().json_data;return t=this._get_node(t),-1==t||!t||!n.ajax&&!n.progressive_render&&!e.isFunction(n.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").length>0},refresh:function(t){t=this._get_node(t);var n=this._get_settings().json_data;return t&&-1!==t&&n.progressive_unload&&(e.isFunction(n.data)||n.ajax)&&t.removeData("jstree_children"),this.__call_old()},load_node_json:function(t,n,a){var i,s=this.get_settings().json_data,r=function(){},o=function(){};if(t=this._get_node(t),t&&-1!==t&&(s.progressive_render||s.progressive_unload)&&!t.is(".jstree-open, .jstree-leaf")&&0===t.children("ul").children("li").length&&t.data("jstree_children"))return i=this._parse_json(t.data("jstree_children"),t),i&&(t.append(i),s.progressive_unload||t.removeData("jstree_children")),this.clean_node(t),void(n&&n.call(this));if(t&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!s.data&&!s.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(s.data):s.data.call(this,t,e.proxy(function(e){e=this._parse_json(e,t),e?(-1!==t&&t?(t.append(e).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),this.clean_node(t),n&&n.call(this)):(-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&this.correct_state(t)):s.correct_state&&this.get_container().children("ul").empty(),a&&a.call(this))},this));break;case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!t||-1===t):t&&-1!=t||(i=this._parse_json(s.data,t),i?(this.get_container().children("ul").empty().append(i.children()),this.clean_node()):s.correct_state&&this.get_container().children("ul").empty()),n&&n.call(this);break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&t&&-1!==t:r=function(e,n,i){var r=this.get_settings().json_data.ajax.error;r&&r.call(this,e,n,i),-1!=t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===n&&s.correct_state&&this.correct_state(t)):"success"===n&&s.correct_state&&this.get_container().children("ul").empty(),a&&a.call(this)},o=function(a,i,o){var l=this.get_settings().json_data.ajax.success;return l&&(a=l.call(this,a,i,o)||a),""===a||a&&a.toString&&""===a.toString().replace(/^[\s\n]+$/,"")||!e.isArray(a)&&!e.isPlainObject(a)?r.call(this,o,i,""):(a=this._parse_json(a,t),void(a?(-1!==t&&t?(t.append(a).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(a.children()),this.clean_node(t),n&&n.call(this)):-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),n&&n.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this))))},s.ajax.context=this,s.ajax.error=r,s.ajax.success=o,s.ajax.dataType||(s.ajax.dataType="json"),e.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,t)),e.ajax(s.ajax)}},_parse_json:function(t,n,a){var i,s,r,o,l,d=!1,c=this._get_settings(),h=c.json_data,u=c.core.html_titles;if(!t)return d;if(h.progressive_unload&&n&&-1!==n&&n.data("jstree_children",d),e.isArray(t)){if(d=e(),!t.length)return!1;for(s=0,r=t.length;r>s;s++)i=this._parse_json(t[s],n,!0),i.length&&(d=d.add(i))}else{if("string"==typeof t&&(t={data:t}),!t.data&&""!==t.data)return d;d=e("<li />"),t.attr&&d.attr(t.attr),t.metadata&&d.data(t.metadata),t.state&&d.addClass("jstree-"+t.state),e.isArray(t.data)||(i=t.data,t.data=[],t.data.push(i)),e.each(t.data,function(n,a){i=e("<a />"),e.isFunction(a)&&(a=a.call(this,t)),"string"==typeof a?i.attr("href","#")[u?"html":"text"](a):(a.attr||(a.attr={}),a.attr.href||(a.attr.href="#"),i.attr(a.attr)[u?"html":"text"](a.title),a.language&&i.addClass(a.language)),i.prepend("<ins class='jstree-icon'>&#160;</ins>"),!a.icon&&t.icon&&(a.icon=t.icon),a.icon&&(-1===a.icon.indexOf("/")?i.children("ins").addClass(a.icon):i.children("ins").css("background","url('"+a.icon+"') center center no-repeat")),d.append(i)}),d.prepend("<ins class='jstree-icon'>&#160;</ins>"),t.children&&(h.progressive_render&&"open"!==t.state?d.addClass("jstree-closed").data("jstree_children",t.children):(h.progressive_unload&&d.data("jstree_children",t.children),e.isArray(t.children)&&t.children.length&&(i=this._parse_json(t.children,n,!0),i.length&&(l=e("<ul />"),l.append(i),d.append(l)))))}return a||(o=e("<ul />"),o.append(d),d=o),d},get_json:function(t,n,a,i){var s,r,o,l,d,c,h=[],u=this._get_settings(),p=this;return t=this._get_node(t),t&&-1!==t||(t=this.get_container().find("> ul > li")),n=e.isArray(n)?n:["id","class"],!i&&this.data.types&&n.push(u.types.type_attr),a=e.isArray(a)?a:[],t.each(function(){o=e(this),s={data:[]},n.length&&(s.attr={}),e.each(n,function(e,t){r=o.attr(t),r&&r.length&&r.replace(/jstree[^ ]*/gi,"").length&&(s.attr[t]=(" "+r).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))}),o.hasClass("jstree-open")&&(s.state="open"),o.hasClass("jstree-closed")&&(s.state="closed"),o.data()&&(s.metadata=o.data()),l=o.children("a"),l.each(function(){d=e(this),a.length||-1!==e.inArray("languages",u.plugins)||d.children("ins").get(0).style.backgroundImage.length||d.children("ins").get(0).className&&d.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").length?(c=!1,-1!==e.inArray("languages",u.plugins)&&e.isArray(u.languages)&&u.languages.length&&e.each(u.languages,function(e,t){return d.hasClass(t)?(c=t,!1):void 0}),r={attr:{},title:p.get_text(d,c)},e.each(a,function(e,t){r.attr[t]=(" "+(d.attr(t)||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")}),-1!==e.inArray("languages",u.plugins)&&e.isArray(u.languages)&&u.languages.length&&e.each(u.languages,function(e,t){return d.hasClass(t)?(r.language=t,!0):void 0}),d.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(r.icon=d.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")),d.children("ins").get(0).style.backgroundImage.length&&(r.icon=d.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):r=p.get_text(d),l.length>1?s.data.push(r):s.data=r}),o=o.find("> ul > li"),o.length&&(s.children=p.get_json(o,n,a,!0)),h.push(s)}),h}}})}(jQuery),function(e){e.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(t){var n=this._get_settings().languages,a=!1,i=".jstree-"+this.get_index()+" a";if(!e.isArray(n)||0===n.length)return!1;if(-1==e.inArray(t,n)){if(!n[t])return!1;t=n[t]}return t==this.data.languages.current_language?!0:(a=e.vakata.css.get_css(i+"."+this.data.languages.current_language,!1,this.data.languages.language_css),a!==!1&&(a.style.display="none"),a=e.vakata.css.get_css(i+"."+t,!1,this.data.languages.language_css),a!==!1&&(a.style.display=""),this.data.languages.current_language=t,this.__callback(t),!0)},get_lang:function(){return this.data.languages.current_language},_get_string:function(t,n){var a=this._get_settings().languages,i=this._get_settings().core.strings;return e.isArray(a)&&a.length&&(n=n&&-1!=e.inArray(n,a)?n:this.data.languages.current_language),i[n]&&i[n][t]?i[n][t]:i[t]?i[t]:t},get_text:function(t,n){if(t=this._get_node(t)||this.data.ui.last_selected,!t.size())return!1;var a=this._get_settings().languages,i=this._get_settings().core.html_titles;return e.isArray(a)&&a.length?(n=n&&-1!=e.inArray(n,a)?n:this.data.languages.current_language,t=t.children("a."+n)):t=t.children("a:eq(0)"),i?(t=t.clone(),t.children("INS").remove(),t.html()):(t=t.contents().filter(function(){return 3==this.nodeType})[0],t.nodeValue)},set_text:function(t,n,a){if(t=this._get_node(t)||this.data.ui.last_selected,!t.size())return!1;var i,s=this._get_settings().languages,r=this._get_settings().core.html_titles;return e.isArray(s)&&s.length?(a=a&&-1!=e.inArray(a,s)?a:this.data.languages.current_language,t=t.children("a."+a)):t=t.children("a:eq(0)"),r?(i=t.children("INS").clone(),t.html(n).prepend(i),this.__callback({obj:t,name:n,lang:a}),!0):(t=t.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:t,name:n,lang:a}),t.nodeValue=n)},_load_css:function(){var t,n=this._get_settings().languages,a="/* languages css */",i=".jstree-"+this.get_index()+" a";if(e.isArray(n)&&n.length){for(this.data.languages.current_language=n[0],t=0;t<n.length;t++)a+=i+"."+n[t]+" {",n[t]!=this.data.languages.current_language&&(a+=" display:none; "),a+=" } ";this.data.languages.language_css=e.vakata.css.add_sheet({str:a,title:"jstree-languages"})}},create_node:function(t,n,a,i){var s=this.__call_old(!0,t,n,a,function(t){var n,a=this._get_settings().languages,s=t.children("a");if(e.isArray(a)&&a.length){for(n=0;n<a.length;n++)s.is("."+a[n])||t.append(s.eq(0).clone().removeClass(a.join(" ")).addClass(a[n]));s.not("."+a.join(", .")).remove()}i&&i.call(this,t)});return s}}})}(jQuery),function(e){e.jstree.plugin("cookies",{__init:function(){if("undefined"==typeof e.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var t,n=this._get_settings().cookies;n.save_loaded&&(t=e.cookie(n.save_loaded),t&&t.length&&(this.data.core.to_load=t.split(","))),n.save_opened&&(t=e.cookie(n.save_opened),t&&t.length&&(this.data.core.to_open=t.split(","))),n.save_selected&&(t=e.cookie(n.save_selected),t&&t.length&&this.data.ui&&(this.data.ui.to_select=t.split(","))),this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",e.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",e.proxy(function(e){this._get_settings().cookies.auto_save&&this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(t){if(!this.data.core.refreshing){var n=this._get_settings().cookies;if(!t)return n.save_loaded&&(this.save_loaded(),e.cookie(n.save_loaded,this.data.core.to_load.join(","),n.cookie_options)),n.save_opened&&(this.save_opened(),e.cookie(n.save_opened,this.data.core.to_open.join(","),n.cookie_options)),void(n.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(n.save_selected,this.data.ui.to_select.join(","),n.cookie_options)));switch(t){case"open_node":case"close_node":n.save_opened&&(this.save_opened(),e.cookie(n.save_opened,this.data.core.to_open.join(","),n.cookie_options)),n.save_loaded&&(this.save_loaded(),e.cookie(n.save_loaded,this.data.core.to_load.join(","),n.cookie_options));break;case"select_node":case"deselect_node":n.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(n.save_selected,this.data.ui.to_select.join(","),n.cookie_options))}}}}})}(jQuery),function(e){e.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",e.proxy(function(e,t){var n=this._get_node(t.rslt.obj);n=-1===n?this.get_container().children("ul"):n.children("ul"),this.sort(n)},this)).bind("rename_node.jstree create_node.jstree create.jstree",e.proxy(function(e,t){this.sort(t.rslt.obj.parent())},this)).bind("move_node.jstree",e.proxy(function(e,t){var n=-1==t.rslt.np?this.get_container():t.rslt.np;this.sort(n.children("ul"))},this))},defaults:function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},_fn:{sort:function(t){var n=this._get_settings().sort,a=this;
t.append(e.makeArray(t.children("li")).sort(e.proxy(n,a))),t.find("> li > ul").each(function(){a.sort(e(this))}),this.clean_node(t)}}})}(jQuery),function(e){var t=!1,n=!1,a=!1,i=!1,s=!1,r=!1,o=!1,l=!1,d=!1;e.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(t,n,a){e.vakata.dnd.is_drag&&e.vakata.drag_stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.MozUserSelect="none")}catch(i){}return e.vakata.dnd.init_x=t.pageX,e.vakata.dnd.init_y=t.pageY,e.vakata.dnd.user_data=n,e.vakata.dnd.is_down=!0,e.vakata.dnd.helper=e("<div id='vakata-dragged' />").html(a),e(document).bind("mousemove",e.vakata.dnd.drag),e(document).bind("mouseup",e.vakata.dnd.drag_stop),!1},drag:function(t){if(e.vakata.dnd.is_down){if(!e.vakata.dnd.is_drag){if(!(Math.abs(t.pageX-e.vakata.dnd.init_x)>5||Math.abs(t.pageY-e.vakata.dnd.init_y)>5))return;e.vakata.dnd.helper.appendTo("body"),e.vakata.dnd.is_drag=!0,e(document).triggerHandler("drag_start.vakata",{event:t,data:e.vakata.dnd.user_data})}if("mousemove"===t.type){var n=e(document),a=n.scrollTop(),i=n.scrollLeft();t.pageY-a<20?(r&&"down"===o&&(clearInterval(r),r=!1),r||(o="up",r=setInterval(function(){e(document).scrollTop(e(document).scrollTop()-e.vakata.dnd.scroll_spd)},150))):r&&"up"===o&&(clearInterval(r),r=!1),e(window).height()-(t.pageY-a)<20?(r&&"up"===o&&(clearInterval(r),r=!1),r||(o="down",r=setInterval(function(){e(document).scrollTop(e(document).scrollTop()+e.vakata.dnd.scroll_spd)},150))):r&&"down"===o&&(clearInterval(r),r=!1),t.pageX-i<20?(s&&"right"===l&&(clearInterval(s),s=!1),s||(l="left",s=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()-e.vakata.dnd.scroll_spd)},150))):s&&"left"===l&&(clearInterval(s),s=!1),e(window).width()-(t.pageX-i)<20?(s&&"left"===l&&(clearInterval(s),s=!1),s||(l="right",s=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()+e.vakata.dnd.scroll_spd)},150))):s&&"right"===l&&(clearInterval(s),s=!1)}e.vakata.dnd.helper.css({left:t.pageX+e.vakata.dnd.helper_left+"px",top:t.pageY+e.vakata.dnd.helper_top+"px"}),e(document).triggerHandler("drag.vakata",{event:t,data:e.vakata.dnd.user_data})}},drag_stop:function(t){s&&clearInterval(s),r&&clearInterval(r),e(document).unbind("mousemove",e.vakata.dnd.drag),e(document).unbind("mouseup",e.vakata.dnd.drag_stop),e(document).triggerHandler("drag_stop.vakata",{event:t,data:e.vakata.dnd.user_data}),e.vakata.dnd.helper.remove(),e.vakata.dnd.init_x=0,e.vakata.dnd.init_y=0,e.vakata.dnd.user_data={},e.vakata.dnd.is_down=!1,e.vakata.dnd.is_drag=!1}},e(function(){var t="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ";e.vakata.css.add_sheet({str:t,title:"vakata"})}),e.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1},this.get_container().bind("mouseenter.jstree",e.proxy(function(n){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.themes&&(a.attr("class","jstree-"+this.data.themes.theme),i&&i.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),n.currentTarget===n.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==n.target)){var s,r=e.jstree._reference(n.target);r.data.dnd.foreign?(s=r._get_settings().dnd.drag_check.call(this,{o:t,r:r.get_container(),is_root:!0}),(s===!0||s.inside===!0||s.before===!0||s.after===!0)&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(r.prepare_move(t,r.get_container(),"last"),r.check_move()&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))}},this)).bind("mouseup.jstree",e.proxy(function(n){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&n.currentTarget===n.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==n.target){var a,i=e.jstree._reference(n.currentTarget);i.data.dnd.foreign?(a=i._get_settings().dnd.drag_check.call(this,{o:t,r:i.get_container(),is_root:!0}),(a===!0||a.inside===!0||a.before===!0||a.after===!0)&&i._get_settings().dnd.drag_finish.call(this,{o:t,r:i.get_container(),is_root:!0})):i.move_node(t,i.get_container(),"last",n[i._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",e.proxy(function(t){return t.relatedTarget&&t.relatedTarget.id&&"jstree-marker-line"===t.relatedTarget.id?!1:void(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")))},this)).bind("mousemove.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){var n=this.get_container()[0];t.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft+=e.vakata.dnd.scroll_spd},n),100)):t.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft-=e.vakata.dnd.scroll_spd},n),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1),t.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop+=e.vakata.dnd.scroll_spd},n),100)):t.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop-=e.vakata.dnd.scroll_spd},n),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",e.proxy(function(){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&a&&i&&(a.hide(),i.hide())},this)).delegate("a","mousedown.jstree",e.proxy(function(e){return 1===e.which?(this.start_drag(e.currentTarget,e),!1):void 0},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_enter(t.currentTarget)},this)).delegate("a","mousemove.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(n&&n.length&&n.children("a")[0]===t.currentTarget||this.dnd_enter(t.currentTarget),"undefined"==typeof this.data.dnd.off.top&&(this.data.dnd.off=e(t.target).offset()),this.data.dnd.w=(t.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,this.data.dnd.w<0&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(t.relatedTarget&&t.relatedTarget.id&&"jstree-marker-line"===t.relatedTarget.id)return!1;a&&a.hide(),i&&i.hide(),this.data.dnd.mto=setTimeout(function(e){return function(){e.dnd_leave(t)}}(this),0)}},this)).delegate("a","mouseup.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_finish(t)},this)),e(document).bind("drag_stop.vakata",e.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,this.data.dnd.off=!1,this.data.dnd.prepared=!1,this.data.dnd.w=!1,this.data.dnd.to1=!1,this.data.dnd.to2=!1,this.data.dnd.i1=!1,this.data.dnd.i2=!1,this.data.dnd.active=!1,this.data.dnd.foreign=!1,a&&a.css({top:"-2000px"}),i&&i.css({top:"-2000px"})},this)).bind("drag_start.vakata",e.proxy(function(t,n){if(n.data.jstree){var a=e(n.event.target);a.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(a)}},this));var s=this._get_settings().dnd;s.drag_target&&e(document).delegate(s.drag_target,"mousedown.jstree-"+this.get_index(),e.proxy(function(n){t=n.target,e.vakata.dnd.drag_start(n,{jstree:!0,obj:n.target},"<ins class='jstree-icon'></ins>"+e(n.target).text()),this.data.themes&&(a&&a.attr("class","jstree-"+this.data.themes.theme),i&&i.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var s=this.get_container();this.data.dnd.cof=s.offset(),this.data.dnd.cw=parseInt(s.width(),10),this.data.dnd.ch=parseInt(s.height(),10),this.data.dnd.foreign=!0,n.preventDefault()},this)),s.drop_target&&e(document).delegate(s.drop_target,"mouseenter.jstree-"+this.get_index(),e.proxy(function(n){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:t,r:e(n.target),e:n})&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(s.drop_target,"mouseleave.jstree-"+this.get_index(),e.proxy(function(){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(s.drop_target,"mouseup.jstree-"+this.get_index(),e.proxy(function(n){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:t,r:e(n.target),e:n})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(){return!0},drop_finish:e.noop,drag_target:".jstree-draggable",drag_finish:e.noop,drag_check:function(){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(n&&n.length){if(this.data.dnd.off=n.offset(),this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+n.width()),this.data.dnd.foreign){var e=this._get_settings().dnd.drag_check.call(this,{o:t,r:n});return this.data.dnd.after=e.after,this.data.dnd.before=e.before,this.data.dnd.inside=e.inside,this.data.dnd.prepared=!0,this.dnd_show()}return this.prepare_move(t,n,"before"),this.data.dnd.before=this.check_move(),this.prepare_move(t,n,"after"),this.data.dnd.after=this.check_move(),this._is_loaded(n)?(this.prepare_move(t,n,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1,this.data.dnd.prepared=!0,this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var t,n=["before","inside","after"],s=!1,r=this._get_settings().core.rtl;switch(n=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"],e.each(n,e.proxy(function(t,n){return this.data.dnd[n]?(e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),s=n,!1):void 0},this)),s===!1&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),t=r?this.data.dnd.off.right-18:this.data.dnd.off.left+10,s){case"before":a.css({left:t+"px",top:this.data.dnd.off.top-6+"px"}).show(),i&&i.css({left:t+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case"after":a.css({left:t+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show(),i&&i.css({left:t+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case"inside":a.css({left:t+(r?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show(),i&&i.hide();break;default:a.hide(),i&&i.hide()}return d=s,s}},dnd_open:function(){this.data.dnd.to2=!1,this.open_node(n,e.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(e){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:t,r:n,p:d}):(this.dnd_prepare(),this.move_node(t,n,d,e[this._get_settings().dnd.copy_modifier+"Key"])),t=!1,n=!1,a.hide(),i&&i.hide()},dnd_enter:function(t){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var a=this._get_settings().dnd;this.data.dnd.prepared=!1,n=this._get_node(t),a.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(e.proxy(this.dnd_prepare,this),a.check_timeout)):this.dnd_prepare(),a.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),n&&n.length&&n.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(e.proxy(this.dnd_open,this),a.open_timeout))):n&&n.length&&n.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(t){this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),a.hide(),i&&i.hide(),n&&n[0]===t.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(n,s){t=this._get_node(n),this.data.ui&&this.is_selected(t)&&(t=this._get_node(null,!0));var r=t.length>1?this._get_string("multiple_selection"):this.get_text(t),o=this.get_container();this._get_settings().core.html_titles||(r=r.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")),e.vakata.dnd.drag_start(s,{jstree:!0,obj:t},"<ins class='jstree-icon'></ins>"+r),this.data.themes&&(a&&a.attr("class","jstree-"+this.data.themes.theme),i&&i.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),this.data.dnd.cof=o.offset(),this.data.dnd.cw=parseInt(o.width(),10),this.data.dnd.ch=parseInt(o.height(),10),this.data.dnd.active=!0}}}),e(function(){var t="#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }";e.vakata.css.add_sheet({str:t,title:"jstree"}),a=e("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(e){return a.hide(),i.hide(),e.preventDefault(),e.stopImmediatePropagation(),!1}).appendTo("body"),i=e("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(e){return n&&n.length?(n.children("a").trigger(e),e.preventDefault(),e.stopImmediatePropagation(),!1):void 0}).bind("mouseleave",function(t){var s=e(t.relatedTarget);return(s.is(".jstree")||0===s.closest(".jstree").length)&&n&&n.length?(n.children("a").trigger(t),a.hide(),i.hide(),t.preventDefault(),t.stopImmediatePropagation(),!1):void 0}).appendTo("body"),e(document).bind("drag_start.vakata",function(e,t){t.data.jstree&&(a.show(),i&&i.show())}),e(document).bind("drag_stop.vakata",function(e,t){t.data.jstree&&(a.hide(),i&&i.hide())})})}(jQuery),function(e){e.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui,this.data.ui&&this.data.checkbox.noui&&(this.select_node=this.deselect_node=this.deselect_all=e.noop,this.get_selected=this.get_checked),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",e.proxy(function(e,t){this._prepare_checkboxes(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",e.proxy(function(e){return e.preventDefault(),this._get_node(e.target).hasClass("jstree-checked")?this.uncheck_node(e.target):this.check_node(e.target),this.data.ui&&this.data.checkbox.noui?(this.save_selected(),void(this.data.cookies&&this.save_cookie("select_node"))):(e.stopImmediatePropagation(),!1)},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(e){return["check_"+(e[0].id||Math.ceil(1e4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(e,t){t.checked&&this.check_node(e,!1)},_prepare_checkboxes:function(t){if(t=t&&-1!=t?this._get_node(t):this.get_container().find("> ul > li"),t!==!1){var n,a,i=this,s=this._get_settings().checkbox.two_state,r=this._get_settings().checkbox.real_checkboxes,o=this._get_settings().checkbox.real_checkboxes_names;t.each(function(){a=e(this),n=a.is("li")&&(a.hasClass("jstree-checked")||r&&a.children(":checked").length)?"jstree-checked":"jstree-unchecked",a.find("li").andSelf().each(function(){var t,a=e(this);a.children("a"+(i.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(s?"jstree-unchecked":n),r&&(a.children(":checkbox").length?a.children(":checkbox").addClass("jstree-real-checkbox"):(t=o.call(i,a),a.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+t[0]+"' name='"+t[0]+"' value='"+t[1]+"' />"))),s?(a.hasClass("jstree-checked")||a.children(":checked").length)&&a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===n||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})}),s||t.find(".jstree-checked").parent().parent().each(function(){i._repair_state(this)})}},change_state:function(t,n){t=this._get_node(t);var a=!1,i=this._get_settings().checkbox.real_checkboxes;if(!t||-1===t)return!1;if(n=n===!1||n===!0?n:t.hasClass("jstree-checked"),this._get_settings().checkbox.two_state)n?(t.removeClass("jstree-checked").addClass("jstree-unchecked"),i&&t.children(":checkbox").prop("checked",!1)):(t.removeClass("jstree-unchecked").addClass("jstree-checked"),i&&t.children(":checkbox").prop("checked",!0));else{if(n){if(a=t.find("li").andSelf(),!a.filter(".jstree-checked, .jstree-undetermined").length)return!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),i&&a.children(":checkbox").prop("checked",!1)}else{if(a=t.find("li").andSelf(),!a.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),i&&a.children(":checkbox").prop("checked",!0),this.data.ui&&(this.data.ui.last_selected=t),this.data.checkbox.last_selected=t}t.parentsUntil(".jstree","li").each(function(){var t=e(this);if(n){if(t.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),i&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),i&&t.children(":checkbox").prop("checked",!1)}else{if(t.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),i&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),i&&t.children(":checkbox").prop("checked",!0)}})}return this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked()),this.__callback(t),!0},check_node:function(e){if(this.change_state(e,!1)){if(e=this._get_node(e),this._get_settings().checkbox.checked_parent_open){var t=this;e.parents(".jstree-closed").each(function(){t.open_node(this,!1,!0)})}this.__callback({obj:e})}},uncheck_node:function(e){this.change_state(e,!0)&&this.__callback({obj:this._get_node(e)})},check_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,!1)}),this.__callback()},uncheck_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,!0)}),this.__callback()},is_checked:function(e){return e=this._get_node(e),e.length?e.is(".jstree-checked"):!1},get_checked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),e.find(t||this._get_settings().checkbox.two_state?".jstree-checked":"> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),e.find(t||this._get_settings().checkbox.two_state?".jstree-unchecked":"> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(e){if(e=this._get_node(e),e.length){if(this._get_settings().checkbox.two_state)return void e.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);var t=this._get_settings().checkbox.real_checkboxes,n=e.find("> ul > .jstree-checked").length,a=e.find("> ul > .jstree-undetermined").length,i=e.find("> ul > li").length;0===i?e.hasClass("jstree-undetermined")&&this.change_state(e,!1):0===n&&0===a?this.change_state(e,!0):n===i?this.change_state(e,!1):(e.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),t&&e.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var t=this,n=this.data.ui.to_select;n=e.map(e.makeArray(n),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.deselect_all(),e.each(n,function(e,n){t.check_node(n)}),this.__callback()}else this.__call_old()},save_loaded:function(){var e=this;this.data.core.to_load=[],this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&e.data.core.to_load.push("#"+this.id)})}}}),e(function(){var t=".jstree .jstree-real-checkbox { display:none; } ";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery),function(e){e.vakata.xslt=function(t,n,a){var i,s,r,o,l="";return document.recalc?(i=document.createElement("xml"),s=document.createElement("xml"),i.innerHTML=t,s.innerHTML=n,e("body").append(i).append(s),setTimeout(function(t,n,a){return function(){a.call(null,t.transformNode(n.XMLDocument)),setTimeout(function(t,n){return function(){e(t).remove(),e(n).remove()}}(t,n),200)}}(i,s,a),100),!0):("undefined"!=typeof window.DOMParser&&"undefined"!=typeof window.XMLHttpRequest&&"undefined"==typeof window.XSLTProcessor&&(t=(new DOMParser).parseFromString(t,"text/xml"),n=(new DOMParser).parseFromString(n,"text/xml")),"undefined"!=typeof window.DOMParser&&"undefined"!=typeof window.XMLHttpRequest&&"undefined"!=typeof window.XSLTProcessor?(r=new XSLTProcessor,(o=e.isFunction(r.transformDocument)?"undefined"!=typeof window.XMLSerializer:!0)?(t=(new DOMParser).parseFromString(t,"text/xml"),n=(new DOMParser).parseFromString(n,"text/xml"),e.isFunction(r.transformDocument)?(l=document.implementation.createDocument("","",null),r.transformDocument(t,n,l,null),a.call(null,(new XMLSerializer).serializeToString(l)),!0):(r.importStylesheet(n),l=r.transformToFragment(t,document),a.call(null,e("<div />").append(l).html()),!0)):!1):!1)};var t={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">	<xsl:call-template name="nodes">		<xsl:with-param name="node" select="/root" />	</xsl:call-template></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<ul>	<xsl:for-each select="$node/item">		<xsl:variable name="children" select="count(./item) &gt; 0" />		<li>			<xsl:attribute name="class">				<xsl:if test="position() = last()">jstree-last </xsl:if>				<xsl:choose>					<xsl:when test="@state = \'open\'">jstree-open </xsl:when>					<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>					<xsl:otherwise>jstree-leaf </xsl:otherwise>				</xsl:choose>				<xsl:value-of select="@class" />			</xsl:attribute>			<xsl:for-each select="@*">				<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">					<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>				</xsl:if>			</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>			<xsl:for-each select="content/name">				<a>				<xsl:attribute name="href">					<xsl:choose>					<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>					<xsl:otherwise>#</xsl:otherwise>					</xsl:choose>				</xsl:attribute>				<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>				<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>				<xsl:for-each select="@*">					<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">						<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>					</xsl:if>				</xsl:for-each>					<ins>						<xsl:attribute name="class">jstree-icon 							<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>						</xsl:attribute>						<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>						<xsl:text>&#xa0;</xsl:text>					</ins>					<xsl:copy-of select="./child::node()" />				</a>			</xsl:for-each>			<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>		</li>	</xsl:for-each>	</ul></xsl:template></xsl:stylesheet>',flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">	<ul>	<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">		<xsl:call-template name="nodes">			<xsl:with-param name="node" select="." />			<xsl:with-param name="is_last" select="number(position() = last())" />		</xsl:call-template>	</xsl:for-each>	</ul></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<xsl:param name="is_last" />	<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />	<li>	<xsl:attribute name="class">		<xsl:if test="$is_last = true()">jstree-last </xsl:if>		<xsl:choose>			<xsl:when test="@state = \'open\'">jstree-open </xsl:when>			<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>			<xsl:otherwise>jstree-leaf </xsl:otherwise>		</xsl:choose>		<xsl:value-of select="@class" />	</xsl:attribute>	<xsl:for-each select="@*">		<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">		<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>		</xsl:if>	</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>	<xsl:for-each select="content/name">		<a>		<xsl:attribute name="href">			<xsl:choose>			<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>			<xsl:otherwise>#</xsl:otherwise>			</xsl:choose>		</xsl:attribute>		<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>		<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>		<xsl:for-each select="@*">			<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">				<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>			</xsl:if>		</xsl:for-each>			<ins>				<xsl:attribute name="class">jstree-icon 					<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>				</xsl:attribute>				<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>				<xsl:text>&#xa0;</xsl:text>			</ins>			<xsl:copy-of select="./child::node()" />		</a>	</xsl:for-each>	<xsl:if test="$children">		<ul>		<xsl:for-each select="//item[@parent_id=$node/attribute::id]">			<xsl:call-template name="nodes">				<xsl:with-param name="node" select="." />				<xsl:with-param name="is_last" select="number(position() = last())" />			</xsl:call-template>		</xsl:for-each>		</ul>	</xsl:if>	</li></xsl:template></xsl:stylesheet>'},n=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};e.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(e,t,n){var a=this;this.load_node_xml(e,function(){a.__callback({obj:a._get_node(e)}),t.call(this)},n)},_is_loaded:function(t){var n=this._get_settings().xml_data;return t=this._get_node(t),-1==t||!t||!n.ajax&&!e.isFunction(n.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_xml:function(t,n,a){var i=this.get_settings().xml_data,s=function(){},r=function(){};if(t=this._get_node(t),t&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!i.data&&!i.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(i.data):i.data.call(this,t,e.proxy(function(a){this.parse_xml(a,e.proxy(function(a){a&&(a=a.replace(/ ?xmlns="[^"]*"/gi,""),a.length>10?(a=e(a),-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(a),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(a.children()),i.clean_node&&this.clean_node(t),n&&n.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),i.correct_state&&(this.correct_state(t),n&&n.call(this))):i.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this)))},this))},this));break;case!!i.data&&!i.ajax||!!i.data&&!!i.ajax&&(!t||-1===t):t&&-1!=t||this.parse_xml(i.data,e.proxy(function(a){a?(a=a.replace(/ ?xmlns="[^"]*"/gi,""),a.length>10&&(a=e(a),this.get_container().children("ul").empty().append(a.children()),i.clean_node&&this.clean_node(t),n&&n.call(this))):i.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this))
},this));break;case!i.data&&!!i.ajax||!!i.data&&!!i.ajax&&t&&-1!==t:s=function(e,n,s){var r=this.get_settings().xml_data.ajax.error;r&&r.call(this,e,n,s),-1!==t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===n&&i.correct_state&&this.correct_state(t)):"success"===n&&i.correct_state&&this.get_container().children("ul").empty(),a&&a.call(this)},r=function(a,r,o){a=o.responseText;var l=this.get_settings().xml_data.ajax.success;return l&&(a=l.call(this,a,r,o)||a),""===a||a&&a.toString&&""===a.toString().replace(/^[\s\n]+$/,"")?s.call(this,o,r,""):void this.parse_xml(a,e.proxy(function(a){a&&(a=a.replace(/ ?xmlns="[^"]*"/gi,""),a.length>10?(a=e(a),-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(a),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(a.children()),i.clean_node&&this.clean_node(t),n&&n.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),i.correct_state&&(this.correct_state(t),n&&n.call(this))):i.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this)))},this))},i.ajax.context=this,i.ajax.error=s,i.ajax.success=r,i.ajax.dataType||(i.ajax.dataType="xml"),e.isFunction(i.ajax.url)&&(i.ajax.url=i.ajax.url.call(this,t)),e.isFunction(i.ajax.data)&&(i.ajax.data=i.ajax.data.call(this,t)),e.ajax(i.ajax)}},parse_xml:function(n,a){var i=this._get_settings().xml_data;e.vakata.xslt(n,t[i.xsl],a)},get_xml:function(t,a,i,s,r){var o,l,d,c,h,u="",p=this._get_settings(),f=this;return t||(t="flat"),r||(r=0),a=this._get_node(a),a&&-1!==a||(a=this.get_container().find("> ul > li")),i=e.isArray(i)?i:["id","class"],!r&&this.data.types&&-1===e.inArray(p.types.type_attr,i)&&i.push(p.types.type_attr),s=e.isArray(s)?s:[],r||(p.xml_data.get_include_preamble&&(u+='<?xml version="1.0" encoding="UTF-8"?>'),u+="<root>"),a.each(function(){u+="<item",d=e(this),e.each(i,function(e,t){var a=d.attr(t);p.xml_data.get_skip_empty&&"undefined"==typeof a||(u+=" "+t+'="'+n((" "+(a||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),d.hasClass("jstree-open")&&(u+=' state="open"'),d.hasClass("jstree-closed")&&(u+=' state="closed"'),"flat"===t&&(u+=' parent_id="'+n(r)+'"'),u+=">",u+="<content>",c=d.children("a"),c.each(function(){o=e(this),h=!1,u+="<name",-1!==e.inArray("languages",p.plugins)&&e.each(p.languages,function(e,t){return o.hasClass(t)?(u+=' lang="'+n(t)+'"',h=t,!1):void 0}),s.length&&e.each(s,function(e,t){var a=o.attr(t);p.xml_data.get_skip_empty&&"undefined"==typeof a||(u+=" "+t+'="'+n((" "+a||"").replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),o.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(u+=' icon="'+n(o.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"'),o.children("ins").get(0).style.backgroundImage.length&&(u+=' icon="'+n(o.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/gi,"").replace(/"/gi,""))+'"'),u+=">",u+="<![CDATA["+f.get_text(o,h)+"]]>",u+="</name>"}),u+="</content>",l=d[0].id||!0,d=d.find("> ul > li"),l=d.length?f.get_xml(t,d,i,s,l):"","nest"==t&&(u+=l),u+="</item>","flat"==t&&(u+=l)}),r||(u+="</root>"),u}}})}(jQuery),function(e){e.expr[":"].jstree_contains=function(e,t,n){return(e.textContent||e.innerText||"").toLowerCase().indexOf(n[3].toLowerCase())>=0},e.expr[":"].jstree_title_contains=function(e,t,n){return(e.getAttribute("title")||"").toLowerCase().indexOf(n[3].toLowerCase())>=0},e.jstree.plugin("search",{__init:function(){this.data.search.str="",this.data.search.result=e(),this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(t,n){e(this).children("ul").find("li").hide().removeClass("jstree-last"),n.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){e(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){e(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(t,n){if(""===e.trim(t))return void this.clear_search();var a=this.get_settings().search,i=this,s=function(){},r=function(){};return this.data.search.str=t,!n&&a.ajax!==!1&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0?(this.search.supress_callback=!0,s=function(){},r=function(e,t,n){var a=this.get_settings().search.ajax.success;a&&(e=a.call(this,e,t,n)||e),this.data.search.to_open=e,this._search_open()},a.ajax.context=this,a.ajax.error=s,a.ajax.success=r,e.isFunction(a.ajax.url)&&(a.ajax.url=a.ajax.url.call(this,t)),e.isFunction(a.ajax.data)&&(a.ajax.data=a.ajax.data.call(this,t)),a.ajax.data||(a.ajax.data={search_string:t}),(!a.ajax.dataType||/^json/.exec(a.ajax.dataType))&&(a.ajax.dataType="json"),void e.ajax(a.ajax)):(this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+a.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){i.open_node(this,!1,!0)}),void this.__callback({nodes:this.data.search.result,str:t}))},clear_search:function(){this.data.search.result.removeClass("jstree-search"),this.__callback(this.data.search.result),this.data.search.result=e()},_search_open:function(){var t=this,n=!0,a=[],i=[];this.data.search.to_open.length&&(e.each(this.data.search.to_open,function(t,n){return"#"==n?!0:void(e(n).length&&e(n).is(".jstree-closed")?a.push(n):i.push(n))}),a.length&&(this.data.search.to_open=i,e.each(a,function(e,n){t.open_node(n,function(){t._search_open(!0)})}),n=!1)),n&&this.search(this.data.search.str,!0)}}})}(jQuery),function(e){e.vakata.context={hide_on_mouseleave:!1,cnt:e("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(t,n,a,i,s,r,o){e.vakata.context.rtl=!!o;var l,d,c=e.vakata.context.parse(t);c&&(e.vakata.context.vis=!0,e.vakata.context.tgt=n,e.vakata.context.par=r||n||null,e.vakata.context.data=s||null,e.vakata.context.cnt.html(c).css({visibility:"hidden",display:"block",left:0,top:0}),e.vakata.context.hide_on_mouseleave&&e.vakata.context.cnt.one("mouseleave",function(){e.vakata.context.hide()}),l=e.vakata.context.cnt.height(),d=e.vakata.context.cnt.width(),a+d>e(document).width()&&(a=e(document).width()-(d+5),e.vakata.context.cnt.find("li > ul").addClass("right")),i+l>e(document).height()&&(i-=l+n[0].offsetHeight,e.vakata.context.cnt.find("li > ul").addClass("bottom")),e.vakata.context.cnt.css({left:a,top:i}).find("li:has(ul)").bind("mouseenter",function(){var t=e(document).width(),n=e(document).height(),a=e(this).children("ul").show();t!==e(document).width()&&a.toggleClass("right"),n!==e(document).height()&&a.toggleClass("bottom")}).bind("mouseleave",function(){e(this).children("ul").hide()}).end().css({visibility:"visible"}).show(),e(document).triggerHandler("context_show.vakata"))},hide:function(){e.vakata.context.vis=!1,e.vakata.context.cnt.attr("class","").css({visibility:"hidden"}),e(document).triggerHandler("context_hide.vakata")},parse:function(t,n){if(!t)return!1;var a="",i=!1,s=!0;return n||(e.vakata.context.func={}),a+="<ul>",e.each(t,function(t,n){return n?(e.vakata.context.func[t]=n.action,!s&&n.separator_before&&(a+="<li class='vakata-separator vakata-separator-before'></li>"),s=!1,a+="<li class='"+(n._class||"")+(n._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ",n.icon&&-1===n.icon.indexOf("/")&&(a+=" class='"+n.icon+"' "),n.icon&&-1!==n.icon.indexOf("/")&&(a+=" style='background:url("+n.icon+") center center no-repeat;' "),a+=">&#160;</ins><a href='#' rel='"+t+"'>",n.submenu&&(a+="<span style='float:"+(e.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"),a+=n.label+"</a>",n.submenu&&(i=e.vakata.context.parse(n.submenu,!0),i&&(a+=i)),a+="</li>",void(n.separator_after&&(a+="<li class='vakata-separator vakata-separator-after'></li>",s=!0))):!0}),a=a.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,""),a+="</ul>",e(document).triggerHandler("context_parse.vakata"),a.length>10?a:!1},exec:function(t){return e.isFunction(e.vakata.context.func[t])?(e.vakata.context.func[t].call(e.vakata.context.data,e.vakata.context.par),!0):!1}},e(function(){var t="#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";e.vakata.css.add_sheet({str:t,title:"vakata"}),e.vakata.context.cnt.delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(){!e(this).parent().hasClass("jstree-contextmenu-disabled")&&e.vakata.context.exec(e(this).attr("rel"))?e.vakata.context.hide():e(this).blur()}).delegate("a","mouseover",function(){e.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body"),e(document).bind("mousedown",function(t){e.vakata.context.vis&&!e.contains(e.vakata.context.cnt[0],t.target)&&e.vakata.context.hide()}),"undefined"!=typeof e.hotkeys&&e(document).bind("keydown","up",function(t){if(e.vakata.context.vis){var n=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();n.length||(n=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()),n.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","down",function(t){if(e.vakata.context.vis){var n=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();n.length||(n=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()),n.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","right",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","left",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","esc",function(t){e.vakata.context.hide(),t.preventDefault()}).bind("keydown","space",function(t){e.vakata.context.cnt.find(".vakata-hover").last().children("a").click(),t.preventDefault()})}),e.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",e.proxy(function(t){t.preventDefault(),e(t.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(t.currentTarget,t.pageX,t.pageY)},this)).delegate("a","click.jstree",e.proxy(function(){this.data.contextmenu&&e.vakata.context.hide()},this)).bind("destroy.jstree",e.proxy(function(){this.data.contextmenu&&e.vakata.context.hide()},this)),e(document).bind("context_hide.vakata",e.proxy(function(){this.data.contextmenu=!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(e){this.create(e)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(e){this.rename(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(e){this.is_selected(e)?this.remove():this.remove(e)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){this.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){this.copy(e)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(e){this.paste(e)}}}}}},_fn:{show_contextmenu:function(t,n,a){t=this._get_node(t);var i=this.get_settings().contextmenu,s=t.children("a:visible:eq(0)"),r=!1,o=!1;i.select_node&&this.data.ui&&!this.is_selected(t)&&(this.deselect_all(),this.select_node(t,!0)),(i.show_at_node||"undefined"==typeof n||"undefined"==typeof a)&&(r=s.offset(),n=r.left,a=r.top+this.data.core.li_height),o=t.data("jstree")&&t.data("jstree").contextmenu?t.data("jstree").contextmenu:i.items,e.isFunction(o)&&(o=o.call(this,t)),this.data.contextmenu=!0,e.vakata.context.show(o,s,n,a,this,t,this._get_settings().core.rtl),this.data.themes&&e.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})}(jQuery),function(t){t.jstree.plugin("types",{__init:function(){var n=this._get_settings().types;this.data.types.attach_to=[],this.get_container().bind("init.jstree",t.proxy(function(){var e=n.types,a=n.type_attr,i="",s=this;t.each(e,function(e,n){return t.each(n,function(e){/^(max_depth|max_children|icon|valid_children)$/.test(e)||s.data.types.attach_to.push(e)}),n.icon?void((n.icon.image||n.icon.position)&&(i+="default"==e?".jstree-"+s.get_index()+" a > .jstree-icon { ":".jstree-"+s.get_index()+" li["+a+'="'+e+'"] > a > .jstree-icon { ',n.icon.image&&(i+=" background-image:url("+n.icon.image+"); "),i+=n.icon.position?" background-position:"+n.icon.position+"; ":" background-position:0 0; ",i+="} ")):!0}),""!==i&&t.vakata.css.add_sheet({str:i,title:"jstree-types"})},this)).bind("before.jstree",t.proxy(function(e,n){var a,i,s=this._get_settings().types.use_data?this._get_node(n.args[0]):!1,r=s&&-1!==s&&s.length?s.data("jstree"):!1;if(r&&r.types&&r.types[n.func]===!1)return e.stopImmediatePropagation(),!1;if(-1!==t.inArray(n.func,this.data.types.attach_to)){if(!n.args[0]||!n.args[0].tagName&&!n.args[0].jquery)return;if(a=this._get_settings().types.types,i=this._get_type(n.args[0]),(a[i]&&"undefined"!=typeof a[i][n.func]||a["default"]&&"undefined"!=typeof a["default"][n.func])&&this._check(n.func,n.args[0])===!1)return e.stopImmediatePropagation(),!1}},this)),e&&this.get_container().bind("load_node.jstree set_type.jstree",t.proxy(function(e,n){var a=n&&n.rslt&&n.rslt.obj&&-1!==n.rslt.obj?this._get_node(n.rslt.obj).parent():this.get_container_ul(),i=!1,s=this._get_settings().types;t.each(s.types,function(e,t){t.icon&&(t.icon.image||t.icon.position)&&(i=a.find("default"===e?"li > a > .jstree-icon":"li["+s.type_attr+"='"+e+"'] > a > .jstree-icon"),t.icon.image&&i.css("backgroundImage","url("+t.icon.image+")"),i.css("backgroundPosition",t.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(e,t){t.type&&this._get_settings().types.use_data&&this.set_type(t.type,e)},_get_type:function(e){return e=this._get_node(e),e&&e.length?e.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(e,t){t=this._get_node(t);var n=t.length&&e?t.attr(this._get_settings().types.type_attr,e):!1;return n&&this.__callback({obj:t,type:e}),n},_check:function(e,n,a){n=this._get_node(n);var i=!1,s=this._get_type(n),r=0,o=this,l=this._get_settings().types,d=!1;if(-1===n){if(!l[e])return;i=l[e]}else{if(s===!1)return;d=l.use_data?n.data("jstree"):!1,d&&d.types&&"undefined"!=typeof d.types[e]?i=d.types[e]:l.types[s]&&"undefined"!=typeof l.types[s][e]?i=l.types[s][e]:l.types["default"]&&"undefined"!=typeof l.types["default"][e]&&(i=l.types["default"][e])}return t.isFunction(i)&&(i=i.call(this,n)),"max_depth"===e&&-1!==n&&a!==!1&&-2!==l.max_depth&&0!==i&&n.children("a:eq(0)").parentsUntil(".jstree","li").each(function(t){return-1!==l.max_depth&&l.max_depth-(t+1)<=0?(i=0,!1):(r=0===t?i:o._check(e,this,!1),-1!==r&&0>=r-(t+1)?(i=0,!1):(r>=0&&(i>r-(t+1)||0>i)&&(i=r-(t+1)),void(l.max_depth>=0&&(l.max_depth-(t+1)<i||0>i)&&(i=l.max_depth-(t+1)))))}),i},check_move:function(){if(!this.__call_old())return!1;var e,n=this._get_move(),a=n.rt._get_settings().types,i=n.rt._check("max_children",n.cr),s=n.rt._check("max_depth",n.cr),r=n.rt._check("valid_children",n.cr),o=0,l=1;if("none"===r)return!1;if(t.isArray(r)&&n.ot&&n.ot._get_type&&(n.o.each(function(){return-1===t.inArray(n.ot._get_type(this),r)?(l=!1,!1):void 0}),l===!1))return!1;if(-2!==a.max_children&&-1!==i&&(o=-1===n.cr?this.get_container().find("> ul > li").not(n.o).length:n.cr.find("> ul > li").not(n.o).length,o+n.o.length>i))return!1;if(-2!==a.max_depth&&-1!==s){if(l=0,0===s)return!1;if("undefined"==typeof n.o.d){for(e=n.o;e.length>0;)e=e.find("> ul > li"),l++;n.o.d=l}if(s-n.o.d<0)return!1}return!0},create_node:function(e,n,a,i,s,r){if(!r&&(s||this._is_loaded(e))){var o,l="string"==typeof n&&n.match(/^before|after$/i)&&-1!==e?this._get_parent(e):this._get_node(e),d=this._get_settings().types,c=this._check("max_children",l),h=this._check("max_depth",l),u=this._check("valid_children",l);if("string"==typeof a&&(a={data:a}),a||(a={}),"none"===u)return!1;if(t.isArray(u))if(a.attr&&a.attr[d.type_attr]){if(-1===t.inArray(a.attr[d.type_attr],u))return!1}else a.attr||(a.attr={}),a.attr[d.type_attr]=u[0];if(-2!==d.max_children&&-1!==c&&(o=-1===l?this.get_container().find("> ul > li").length:l.find("> ul > li").length,o+1>c))return!1;if(-2!==d.max_depth&&-1!==h&&0>h-1)return!1}return this.__call_old(!0,e,n,a,i,s,r)}}})}(jQuery),function(e){e.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(e,t,n){var a=this;this.load_node_html(e,function(){a.__callback({obj:a._get_node(e)}),t.call(this)},n)},_is_loaded:function(t){return t=this._get_node(t),-1==t||!t||!this._get_settings().html_data.ajax&&!e.isFunction(this._get_settings().html_data.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_html:function(t,n,a){var i,s=this.get_settings().html_data,r=function(){},o=function(){};if(t=this._get_node(t),t&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case e.isFunction(s.data):s.data.call(this,t,e.proxy(function(a){a&&""!==a&&a.toString&&""!==a.toString().replace(/^[\s\n]+$/,"")?(a=e(a),a.is("ul")||(a=e("<ul />").append(a)),-1!=t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(a).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(a.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),n&&n.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),n&&n.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this))},this));break;case!s.data&&!s.ajax:t&&-1!=t||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),n&&n.call(this);break;case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!t||-1===t):t&&-1!=t||(i=e(s.data),i.is("ul")||(i=e("<ul />").append(i)),this.get_container().children("ul").empty().append(i.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),n&&n.call(this);break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&t&&-1!==t:t=this._get_node(t),r=function(e,n,i){var r=this.get_settings().html_data.ajax.error;r&&r.call(this,e,n,i),-1!=t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===n&&s.correct_state&&this.correct_state(t)):"success"===n&&s.correct_state&&this.get_container().children("ul").empty(),a&&a.call(this)},o=function(a,i,o){var l=this.get_settings().html_data.ajax.success;return l&&(a=l.call(this,a,i,o)||a),""===a||a&&a.toString&&""===a.toString().replace(/^[\s\n]+$/,"")?r.call(this,o,i,""):void(a?(a=e(a),a.is("ul")||(a=e("<ul />").append(a)),-1!=t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(a).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(a.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),n&&n.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),n&&n.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this)))},s.ajax.context=this,s.ajax.error=r,s.ajax.success=o,s.ajax.dataType||(s.ajax.dataType="html"),e.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,t)),e.ajax(s.ajax)}}}}),e.jstree.defaults.plugins.push("html_data")}(jQuery),function(e){e.jstree.plugin("themeroller",{__init:function(){var t=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(n){e(n.currentTarget).hasClass("jstree-loading")||e(this).addClass(t.item_h)}).delegate("a","mouseleave.jstree",function(){e(this).removeClass(t.item_h)}).bind("init.jstree",e.proxy(function(e,t){t.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh"),this._themeroller(t.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",e.proxy(function(){this._themeroller()},this)).bind("close_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("delete_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.parent)},this)).bind("correct_state.jstree",e.proxy(function(e,n){n.rslt.obj.children("ins.jstree-icon").removeClass(t.opened+" "+t.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_open+" "+t.item_clsd).addClass(t.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",e.proxy(function(e,n){n.rslt.obj.children("a").addClass(t.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",e.proxy(function(){this.get_container().find("a."+t.item_a).removeClass(t.item_a).end().find("a.jstree-clicked").addClass(t.item_a)},this)).bind("dehover_node.jstree",e.proxy(function(e,n){n.rslt.obj.children("a").removeClass(t.item_h)},this)).bind("hover_node.jstree",e.proxy(function(e,n){this.get_container().find("a."+t.item_h).not(n.rslt.obj).removeClass(t.item_h),n.rslt.obj.children("a").addClass(t.item_h)},this)).bind("move_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.o),this._themeroller(t.rslt.op)},this))},__destroy:function(){var t=this._get_settings().themeroller,n=["ui-icon"];e.each(t,function(e,t){t=t.split(" "),t.length&&(n=n.concat(t))}),this.get_container().removeClass("ui-widget-content").find("."+n.join(", .")).removeClass(n.join(" "))},_fn:{_themeroller:function(e){var t=this._get_settings().themeroller;e=e&&-1!=e?this._get_node(e).parent():this.get_container_ul(),e.find("li.jstree-closed").children("ins.jstree-icon").removeClass(t.opened).addClass("ui-icon "+t.closed).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_leaf+" "+t.item_open).addClass(t.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(t.closed).addClass("ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_leaf+" "+t.item_clsd).addClass(t.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(t.closed+" ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_clsd+" "+t.item_open).addClass(t.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}}),e(function(){var t=".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery),function(e){e.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",e.proxy(function(t,n){var a,i,s=[],r=!0;return"move_node"==n.func&&n.args[4]===!0&&n.args[0].o&&n.args[0].o.length&&(n.args[0].o.children("a").each(function(){s.push(e(this).text().replace(/^\s+/g,""))}),r=this._check_unique(s,n.args[0].np.find("> ul > li").not(n.args[0].o),"move_node")),"create_node"==n.func&&(n.args[4]||this._is_loaded(n.args[0]))&&(a=this._get_node(n.args[0]),!n.args[1]||"before"!==n.args[1]&&"after"!==n.args[1]||(a=this._get_parent(n.args[0]),a&&-1!==a||(a=this.get_container())),s.push("string"==typeof n.args[2]?n.args[2]:n.args[2]&&n.args[2].data?n.args[2].data:this._get_string("new_node")),r=this._check_unique(s,a.find("> ul > li"),"create_node")),"rename_node"==n.func&&(s.push(n.args[1]),i=this._get_node(n.args[0]),a=this._get_parent(i),a&&-1!==a||(a=this.get_container()),r=this._check_unique(s,a.find("> ul > li").not(i),"rename_node")),r?void 0:(t.stopPropagation(),!1)},this))},defaults:{error_callback:e.noop},_fn:{_check_unique:function(t,n,a){var i=[];return n.children("a").each(function(){i.push(e(this).text().replace(/^\s+/g,""))}),i.length&&t.length?(i=i.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),i.length+t.length!=i.concat(t).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?(this._get_settings().unique.error_callback.call(null,t,n,a),!1):!0):!0},check_move:function(){if(!this.__call_old())return!1;var t=this._get_move(),n=[];return t.o&&t.o.length?(t.o.children("a").each(function(){n.push(e(this).text().replace(/^\s+/g,""))}),this._check_unique(n,t.np.find("> ul > li").not(t.o),"check_move")):!0}}})}(jQuery),function(a){a.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1,this.data.wholerow.to=!1,this.get_container().bind("init.jstree",a.proxy(function(){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",a.proxy(function(e,t){this._prepare_wholerow_span(t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",a.proxy(function(e,t){this.data.to&&clearTimeout(this.data.to),this.data.to=setTimeout(function(e,t){return function(){e._prepare_wholerow_ul(t)}}(this,t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",a.proxy(function(){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",a.proxy(function(e,t){t.rslt.obj.each(function(){var e=t.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((a(this).offset().top-t.inst.get_container().offset().top+t.inst.get_container()[0].scrollTop)/t.inst.data.core.li_height,10)+")");e.children("a").attr("class",t.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",a.proxy(function(e,t){if(this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:"")),"hover_node"===e.type){var n=this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((t.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")");n.children("a").attr("class",t.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(e){var t=a(e.currentTarget);"A"===e.target.tagName||"INS"===e.target.tagName&&t.closest("li").is(".jstree-open, .jstree-closed")||(t.closest("li").children("a:visible:eq(0)").click(),e.stopImmediatePropagation())}).delegate("li","mouseover.jstree",a.proxy(function(e){return e.stopImmediatePropagation(),a(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length?!1:(this.hover_node(e.currentTarget),!1)},this)).delegate("li","mouseleave.jstree",a.proxy(function(e){a(e.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(e.currentTarget)
},this)),(t||e)&&a.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove(),this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(e){e=e&&-1!=e?this._get_node(e):this.get_container().find("> ul > li"),e!==!1&&e.each(function(){a(this).find("li").andSelf().each(function(){var e=a(this);return e.children(".jstree-wholerow-span").length?!0:void e.prepend("<span class='jstree-wholerow-span' style='width:"+18*e.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var e=this.get_container().children("ul").eq(0),n=e.html();e.addClass("jstree-wholerow-real"),this.data.wholerow.last_html!==n&&(this.data.wholerow.last_html=n,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(e.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(e.parent()[0].scrollWidth).css("top",-1*(e.height()+(t?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}}),a(function(){var i=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";n&&(i+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } "),(t||e)&&(i+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } "),a.vakata.css.add_sheet({str:i,title:"jstree"})})}(jQuery),function(e){var t=["getChildren","getChildrenCount","getAttr","getName","getProps"],n=function(t,n){var a=!0;return t=t||{},n=[].concat(n),e.each(n,function(n,i){return e.isFunction(t[i])?void 0:(a=!1,!1)}),a};e.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(a,i){var s=-1==a?this._get_settings().model.object:a.data("jstree_model");return n(s,t)?void(this._get_settings().model.async?s.getChildren(e.proxy(function(e){this.model_done(e,i)},this)):this.model_done(s.getChildren(),i)):i.call(null,!1)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(t,n){var a=[],i=this._get_settings(),s=this;e.isArray(t)||(t=[t]),e.each(t,function(t,n){var r=n.getProps()||{};r.attr=n.getAttr()||{},n.getChildrenCount()&&(r.state="closed"),r.data=n.getName(),e.isArray(r.data)||(r.data=[r.data]),s.data.types&&e.isFunction(n.getType)&&(r.attr[i.types.type_attr]=n.getType()),r.attr.id&&i.model.id_prefix&&(r.attr.id=i.model.id_prefix+r.attr.id),r.metadata||(r.metadata={}),r.metadata.jstree_model=n,a.push(r)}),n.call(null,a)}}})}(jQuery)}}(),define("jquery.jstree",["jquery","css!../lib/jstree/default/style"],function(e){return function(){var t;return t||e.$.fn.jstree}}(this)),define("css/css!../lib/fancybox/jquery.fancybox-1.3.4",[],function(){}),function(e){var t,n,a,i,s,r,o,l,d,c,h,u,p,f=0,_={},g=[],m=0,v={},x=[],j=null,y=new Image,b=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,k=/[^\.]\.(swf)\s*$/i,w=1,C=0,S="",T=!1,I=e.extend(e("<div/>")[0],{prop:0}),A=e.browser.msie&&e.browser.version<7&&!window.XMLHttpRequest,$=function(){n.hide(),y.onerror=y.onload=null,j&&j.abort(),t.empty()},O=function(){return!1===_.onError(g,f,_)?(n.hide(),void(T=!1)):(_.titleShow=!1,_.width="auto",_.height="auto",t.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),void N())},q=function(){var a,i,s,o,l,d,c=g[f];if($(),_=e.extend({},e.fn.fancybox.defaults,"undefined"==typeof e(c).data("fancybox")?_:e(c).data("fancybox")),d=_.onStart(g,f,_),d===!1)return void(T=!1);if("object"==typeof d&&(_=e.extend(_,d)),s=_.title||(c.nodeName?e(c).attr("title"):c.title)||"",c.nodeName&&!_.orig&&(_.orig=e(c).children("img:first").length?e(c).children("img:first"):e(c)),""===s&&_.orig&&_.titleFromAlt&&(s=_.orig.attr("alt")),a=_.href||(c.nodeName?e(c).attr("href"):c.href)||null,(/^(?:javascript)/i.test(a)||"#"==a)&&(a=null),_.type?(i=_.type,a||(a=_.content)):_.content?i="html":a&&(i=a.match(b)?"image":a.match(k)?"swf":e(c).hasClass("iframe")?"iframe":0===a.indexOf("#")?"inline":"ajax"),!i)return void O();switch("inline"==i&&(c=a.substr(a.indexOf("#")),i=e(c).length>0?"inline":"ajax"),_.type=i,_.href=a,_.title=s,_.autoDimensions&&("html"==_.type||"inline"==_.type||"ajax"==_.type?(_.width="auto",_.height="auto"):_.autoDimensions=!1),_.modal&&(_.overlayShow=!0,_.hideOnOverlayClick=!1,_.hideOnContentClick=!1,_.enableEscapeButton=!1,_.showCloseButton=!1),_.padding=parseInt(_.padding,10),_.margin=parseInt(_.margin,10),t.css("padding",_.padding+_.margin),e(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){e(this).replaceWith(r.children())}),i){case"html":t.html(_.content),N();break;case"inline":if(e(c).parent().is("#fancybox-content")===!0)return void(T=!1);e('<div class="fancybox-inline-tmp" />').hide().insertBefore(e(c)).bind("fancybox-cleanup",function(){e(this).replaceWith(r.children())}).bind("fancybox-cancel",function(){e(this).replaceWith(t.children())}),e(c).appendTo(t),N();break;case"image":T=!1,e.fancybox.showActivity(),y=new Image,y.onerror=function(){O()},y.onload=function(){T=!0,y.onerror=y.onload=null,D()},y.src=a;break;case"swf":_.scrolling="no",o='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+_.width+'" height="'+_.height+'"><param name="movie" value="'+a+'"></param>',l="",e.each(_.swf,function(e,t){o+='<param name="'+e+'" value="'+t+'"></param>',l+=" "+e+'="'+t+'"'}),o+='<embed src="'+a+'" type="application/x-shockwave-flash" width="'+_.width+'" height="'+_.height+'"'+l+"></embed></object>",t.html(o),N();break;case"ajax":T=!1,e.fancybox.showActivity(),_.ajax.win=_.ajax.success,j=e.ajax(e.extend({},_.ajax,{url:a,data:_.ajax.data||{},error:function(e){e.status>0&&O()},success:function(e,i,s){var r="object"==typeof s?s:j;if(200==r.status){if("function"==typeof _.ajax.win){if(d=_.ajax.win(a,e,i,s),d===!1)return void n.hide();("string"==typeof d||"object"==typeof d)&&(e=d)}t.html(e),N()}}}));break;case"iframe":F()}},N=function(){var n=_.width,a=_.height;n=n.toString().indexOf("%")>-1?parseInt((e(window).width()-2*_.margin)*parseFloat(n)/100,10)+"px":"auto"==n?"auto":n+"px",a=a.toString().indexOf("%")>-1?parseInt((e(window).height()-2*_.margin)*parseFloat(a)/100,10)+"px":"auto"==a?"auto":a+"px",t.wrapInner('<div style="width:'+n+";height:"+a+";overflow: "+("auto"==_.scrolling?"auto":"yes"==_.scrolling?"scroll":"hidden")+';position:relative;"></div>'),_.width=t.width(),_.height=t.height(),F()},D=function(){_.width=y.width,_.height=y.height,e("<img />").attr({id:"fancybox-img",src:y.src,alt:_.title}).appendTo(t),F()},F=function(){var s,h;return n.hide(),i.is(":visible")&&!1===v.onCleanup(x,m,v)?(e.event.trigger("fancybox-cancel"),void(T=!1)):(T=!0,e(r.add(a)).unbind(),e(window).unbind("resize.fb scroll.fb"),e(document).unbind("keydown.fb"),i.is(":visible")&&"outside"!==v.titlePosition&&i.css("height",i.height()),x=g,m=f,v=_,v.overlayShow?(a.css({"background-color":v.overlayColor,opacity:v.overlayOpacity,cursor:v.hideOnOverlayClick?"pointer":"auto",height:e(document).height()}),a.is(":visible")||(A&&e("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"}),a.show())):a.hide(),p=Q(),M(),i.is(":visible")?(e(o.add(d).add(c)).hide(),s=i.position(),u={top:s.top,left:s.left,width:i.width(),height:i.height()},h=u.width==p.width&&u.height==p.height,void r.fadeTo(v.changeFade,.3,function(){var n=function(){r.html(t.contents()).fadeTo(v.changeFade,1,R)};e.event.trigger("fancybox-change"),r.empty().removeAttr("filter").css({"border-width":v.padding,width:p.width-2*v.padding,height:_.autoDimensions?"auto":p.height-C-2*v.padding}),h?n():(I.prop=0,e(I).animate({prop:1},{duration:v.changeSpeed,easing:v.easingChange,step:L,complete:n}))})):(i.removeAttr("style"),r.css("border-width",v.padding),"elastic"==v.transitionIn?(u=H(),r.html(t.contents()),i.show(),v.opacity&&(p.opacity=0),I.prop=0,void e(I).animate({prop:1},{duration:v.speedIn,easing:v.easingIn,step:L,complete:R})):("inside"==v.titlePosition&&C>0&&l.show(),r.css({width:p.width-2*v.padding,height:_.autoDimensions?"auto":p.height-C-2*v.padding}).html(t.contents()),void i.css(p).fadeIn("none"==v.transitionIn?0:v.speedIn,R))))},E=function(e){return e&&e.length?"float"==v.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+e+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+v.titlePosition+'">'+e+"</div>":!1},M=function(){if(S=v.title||"",C=0,l.empty().removeAttr("style").removeClass(),v.titleShow===!1)return void l.hide();if(S=e.isFunction(v.titleFormat)?v.titleFormat(S,x,m,v):E(S),!S||""===S)return void l.hide();switch(l.addClass("fancybox-title-"+v.titlePosition).html(S).appendTo("body").show(),v.titlePosition){case"inside":l.css({width:p.width-2*v.padding,marginLeft:v.padding,marginRight:v.padding}),C=l.outerHeight(!0),l.appendTo(s),p.height+=C;break;case"over":l.css({marginLeft:v.padding,width:p.width-2*v.padding,bottom:v.padding}).appendTo(s);break;case"float":l.css("left",-1*parseInt((l.width()-p.width-40)/2,10)).appendTo(i);break;default:l.css({width:p.width-2*v.padding,paddingLeft:v.padding,paddingRight:v.padding}).appendTo(i)}l.hide()},P=function(){return(v.enableEscapeButton||v.enableKeyboardNav)&&e(document).bind("keydown.fb",function(t){27==t.keyCode&&v.enableEscapeButton?(t.preventDefault(),e.fancybox.close()):37!=t.keyCode&&39!=t.keyCode||!v.enableKeyboardNav||"INPUT"===t.target.tagName||"TEXTAREA"===t.target.tagName||"SELECT"===t.target.tagName||(t.preventDefault(),e.fancybox[37==t.keyCode?"prev":"next"]())}),v.showNavArrows?((v.cyclic&&x.length>1||0!==m)&&d.show(),void((v.cyclic&&x.length>1||m!=x.length-1)&&c.show())):(d.hide(),void c.hide())},R=function(){e.support.opacity||(r.get(0).style.removeAttribute("filter"),i.get(0).style.removeAttribute("filter")),_.autoDimensions&&r.css("height","auto"),i.css("height","auto"),S&&S.length&&l.show(),v.showCloseButton&&o.show(),P(),v.hideOnContentClick&&r.bind("click",e.fancybox.close),v.hideOnOverlayClick&&a.bind("click",e.fancybox.close),e(window).bind("resize.fb",e.fancybox.resize),v.centerOnScroll&&e(window).bind("scroll.fb",e.fancybox.center),"iframe"==v.type&&e('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(e.browser.msie?'allowtransparency="true""':"")+' scrolling="'+_.scrolling+'" src="'+v.href+'"></iframe>').appendTo(r),i.show(),T=!1,e.fancybox.center(),v.onComplete(x,m,v),z()},z=function(){var e,t;x.length-1>m&&(e=x[m+1].href,"undefined"!=typeof e&&e.match(b)&&(t=new Image,t.src=e)),m>0&&(e=x[m-1].href,"undefined"!=typeof e&&e.match(b)&&(t=new Image,t.src=e))},L=function(e){var t={width:parseInt(u.width+(p.width-u.width)*e,10),height:parseInt(u.height+(p.height-u.height)*e,10),top:parseInt(u.top+(p.top-u.top)*e,10),left:parseInt(u.left+(p.left-u.left)*e,10)};"undefined"!=typeof p.opacity&&(t.opacity=.5>e?.5:e),i.css(t),r.css({width:t.width-2*v.padding,height:t.height-C*e-2*v.padding})},B=function(){return[e(window).width()-2*v.margin,e(window).height()-2*v.margin,e(document).scrollLeft()+v.margin,e(document).scrollTop()+v.margin]},Q=function(){var e,t=B(),n={},a=v.autoScale,i=2*v.padding;return n.width=v.width.toString().indexOf("%")>-1?parseInt(t[0]*parseFloat(v.width)/100,10):v.width+i,n.height=v.height.toString().indexOf("%")>-1?parseInt(t[1]*parseFloat(v.height)/100,10):v.height+i,a&&(n.width>t[0]||n.height>t[1])&&("image"==_.type||"swf"==_.type?(e=v.width/v.height,n.width>t[0]&&(n.width=t[0],n.height=parseInt((n.width-i)/e+i,10)),n.height>t[1]&&(n.height=t[1],n.width=parseInt((n.height-i)*e+i,10))):(n.width=Math.min(n.width,t[0]),n.height=Math.min(n.height,t[1]))),n.top=parseInt(Math.max(t[3]-20,t[3]+.5*(t[1]-n.height-40)),10),n.left=parseInt(Math.max(t[2]-20,t[2]+.5*(t[0]-n.width-40)),10),n},U=function(e){var t=e.offset();return t.top+=parseInt(e.css("paddingTop"),10)||0,t.left+=parseInt(e.css("paddingLeft"),10)||0,t.top+=parseInt(e.css("border-top-width"),10)||0,t.left+=parseInt(e.css("border-left-width"),10)||0,t.width=e.width(),t.height=e.height(),t},H=function(){var t,n,a=_.orig?e(_.orig):!1,i={};return a&&a.length?(t=U(a),i={width:t.width+2*v.padding,height:t.height+2*v.padding,top:t.top-v.padding-20,left:t.left-v.padding-20}):(n=B(),i={width:2*v.padding,height:2*v.padding,top:parseInt(n[3]+.5*n[1],10),left:parseInt(n[2]+.5*n[0],10)}),i},X=function(){return n.is(":visible")?(e("div",n).css("top",-40*w+"px"),void(w=(w+1)%12)):void clearInterval(h)};e.fn.fancybox=function(t){return e(this).length?(e(this).data("fancybox",e.extend({},t,e.metadata?e(this).metadata():{})).unbind("click.fb").bind("click.fb",function(t){if(t.preventDefault(),!T){T=!0,e(this).blur(),g=[],f=0;var n=e(this).attr("rel")||"";n&&""!=n&&"nofollow"!==n?(g=e("a[rel="+n+"], area[rel="+n+"]"),f=g.index(this)):g.push(this),q()}}),this):this},e.fancybox=function(t){var n;if(!T){if(T=!0,n="undefined"!=typeof arguments[1]?arguments[1]:{},g=[],f=parseInt(n.index,10)||0,e.isArray(t)){for(var a=0,i=t.length;i>a;a++)"object"==typeof t[a]?e(t[a]).data("fancybox",e.extend({},n,t[a])):t[a]=e({}).data("fancybox",e.extend({content:t[a]},n));g=jQuery.merge(g,t)}else"object"==typeof t?e(t).data("fancybox",e.extend({},n,t)):t=e({}).data("fancybox",e.extend({content:t},n)),g.push(t);(f>g.length||0>f)&&(f=0),q()}},e.fancybox.showActivity=function(){clearInterval(h),n.show(),h=setInterval(X,66)},e.fancybox.hideActivity=function(){n.hide()},e.fancybox.next=function(){return e.fancybox.pos(m+1)},e.fancybox.prev=function(){return e.fancybox.pos(m-1)},e.fancybox.pos=function(e){T||(e=parseInt(e),g=x,e>-1&&e<x.length?(f=e,q()):v.cyclic&&x.length>1&&(f=e>=x.length?0:x.length-1,q()))},e.fancybox.cancel=function(){T||(T=!0,e.event.trigger("fancybox-cancel"),$(),_.onCancel(g,f,_),T=!1)},e.fancybox.close=function(){function t(){a.fadeOut("fast"),l.empty().hide(),i.hide(),e.event.trigger("fancybox-cleanup"),r.empty(),v.onClosed(x,m,v),x=_=[],m=f=0,v=_={},T=!1}if(!T&&!i.is(":hidden")){if(T=!0,v&&!1===v.onCleanup(x,m,v))return void(T=!1);if($(),e(o.add(d).add(c)).hide(),e(r.add(a)).unbind(),e(window).unbind("resize.fb scroll.fb"),e(document).unbind("keydown.fb"),r.find("iframe").attr("src",A&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==v.titlePosition&&l.empty(),i.stop(),"elastic"==v.transitionOut){u=H();var n=i.position();p={top:n.top,left:n.left,width:i.width(),height:i.height()},v.opacity&&(p.opacity=1),l.empty().hide(),I.prop=1,e(I).animate({prop:0},{duration:v.speedOut,easing:v.easingOut,step:L,complete:t})}else i.fadeOut("none"==v.transitionOut?0:v.speedOut,t)}},e.fancybox.resize=function(){a.is(":visible")&&a.css("height",e(document).height()),e.fancybox.center(!0)},e.fancybox.center=function(){var e,t;T||(t=arguments[0]===!0?1:0,e=B(),(t||!(i.width()>e[0]||i.height()>e[1]))&&i.stop().animate({top:parseInt(Math.max(e[3]-20,e[3]+.5*(e[1]-r.height()-40)-v.padding)),left:parseInt(Math.max(e[2]-20,e[2]+.5*(e[0]-r.width()-40)-v.padding))},"number"==typeof arguments[0]?arguments[0]:200))},e.fancybox.init=function(){e("#fancybox-wrap").length||(e("body").append(t=e('<div id="fancybox-tmp"></div>'),n=e('<div id="fancybox-loading"><div></div></div>'),a=e('<div id="fancybox-overlay"></div>'),i=e('<div id="fancybox-wrap"></div>')),s=e('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(i),s.append(r=e('<div id="fancybox-content"></div>'),o=e('<a id="fancybox-close"></a>'),l=e('<div id="fancybox-title"></div>'),d=e('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),c=e('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),o.click(e.fancybox.close),n.click(e.fancybox.cancel),d.click(function(t){t.preventDefault(),e.fancybox.prev()}),c.click(function(t){t.preventDefault(),e.fancybox.next()}),e.fn.mousewheel&&i.bind("mousewheel.fb",function(t,n){T?t.preventDefault():(0==e(t.target).get(0).clientHeight||e(t.target).get(0).scrollHeight===e(t.target).get(0).clientHeight)&&(t.preventDefault(),e.fancybox[n>0?"prev":"next"]())}),e.support.opacity||i.addClass("fancybox-ie"),A&&(n.addClass("fancybox-ie6"),i.addClass("fancybox-ie6"),e('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(s)))},e.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},e(document).ready(function(){e.fancybox.init()})}(jQuery),define("jquery.fancybox",["jquery","css!../lib/fancybox/jquery.fancybox-1.3.4"],function(e){return function(){var t;return t||e.$.fn.fancybox}}(this)),!function(e){var t=function(e,t){this.init("popout",e,t)};t.prototype=e.extend({},e.fn.popover.Constructor.prototype,{constructor:t,show:function(){var t,n,a,i,s,r,o,l;if(this.hasContent()&&this.enabled){switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,n=/in/.test(r),t.detach().css({top:0,left:0,display:"block",position:"absolute"}),e(this.options.container).append(t),a=this.getPosition(n),i=t[0].offsetWidth,s=t[0].offsetHeight,l=this.$element.offset(),a.top=l.top,a.left=l.left,n?r.split(" ")[1]:r){case"bottom":o={top:a.top+a.height,left:a.left+a.width/2-i/2};break;case"top":o={top:a.top-s+1.5*a.height,left:a.left+a.width/2-i/2};break;case"left":o={top:a.top+a.height/2-s/2,left:a.left-i};break;case"right":o={top:a.top-s+2*this.$element.height(),left:a.left+a.width}}t.offset(o).addClass(r).addClass("in")}}}),e.fn.popout=function(n){return this.each(function(){var a=e(this),i=a.data("popout"),s="object"==typeof n&&n;i||a.data("popout",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.popout.Constructor=t,e.fn.popout.defaults=e.extend({},e.fn.popover.defaults,{container:"body"})}(window.jQuery),define("jquery.bootstrap-popout",["jquery.bootstrap"],function(e){return function(){var t;return t||e.$.fn.popout}}(this)),!function(e){var t={lookup:function(){var t;return this.query=this.$element.val()||"",this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?(this.query.length&&(t=t.slice(0,this.options.items)),this.render(t).show()):this.shown?this.hide():this},render:function(t){var n=this;return t=e(t).map(function(t,a){return t=e(n.options.item).attr("data-value",a),t.find("a").html(n.highlighter(a)),t[0]}),this.query.length>0&&t.first().addClass("active"),this.$menu.html(t),this},keydown:function(t){if(this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),9===t.keyCode){if(!this.shown)return;this.select()}else this.move(t)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0,this.mousedover||this.lookup(e)}};e.extend(e.fn.typeahead.Constructor.prototype,t)}(window.jQuery),define("jquery.bootstrap-better-typeahead",["jquery.bootstrap"],function(){});var SaveButton={init:function(e){var t={disabled:!1,$save:$("<span/>").text(SaveButton.message.SAVE).click(function(){t.fire("save")}).addClass("btn btn-success"),$retry:$("<span/>").text(SaveButton.message.RETRY).click(function(){t.fire("save")}).addClass("btn btn-success"),$saving:$("<span/>").text(SaveButton.message.SAVING).prepend('<i class="icon-refresh icon-spin"></i> ').addClass("btn disabled"),$saved:$("<span/>").text(SaveButton.message.SAVED).addClass("btn disabled"),ui:$("<div/>").addClass("pull-right"),setStateWhenReady:function(e){"saving"===this.state?this.nextState=e:this.setState(e)},setState:function(e){this.state!==e&&(this.state=e,this.$save.detach(),this.$saving.detach(),this.$saved.detach(),this.$retry.detach(),"save"===e?this.ui.append(this.$save):"saving"===e?this.ui.append(this.$saving):"saved"===e?this.ui.append(this.$saved):"retry"===e&&this.ui.append(this.$retry),this.fire("state:change"))},ajaxOptions:function(e){var e=e||{},t=e.beforeSend||function(){},n=e.success||function(){},a=e.error||function(){},i=this;return e.beforeSend=function(){i.setState("saving"),i.nextState="saved",t.apply(this,arguments)},e.success=function(){i.setState(i.nextState),n.apply(this,arguments)},e.error=function(){i.nextState=null,i.setState("retry"),alert(SaveButton.message.ERROR_SAVING),a.apply(this,arguments)},e},ajax:function(e){e=t.ajaxOptions(e),"function"==typeof e.url?(e.beforeSend(),e.url(e.data),e.success({})):$.ajax(e)},beforeunload:function(){var n="html"==t.ui.parents()[t.ui.parents().length-1].tagName.toLowerCase();return"saved"!==t.state&&n?e.unsavedMessage||"":void 0}};return eventize(t),t.setState("saved"),t.on("change",function(){this.setStateWhenReady("save")}),t.on("disable",function(){this.disabled=!0,this.$save.addClass("disabled"),this.$saving.addClass("disabled"),this.$retry.addClass("disabled")}),t.on("enable",function(){this.disabled=!1,this.$save.removeClass("disabled"),this.$saving.removeClass("disabled"),this.$retry.removeClass("disabled")}),t.on("save",function(){if(!t.disabled)if(e.save)e.save();else if(e.saveRequest){var n=t.ajaxOptions();n.beforeSend(),e.saveRequest().success(n.success).error(n.error)}}),t},initForm:function(e,t){var n=e.attr("action"),a=SaveButton.init({unsavedMessage:t.unsavedMessage,save:function(){a.ajax({url:n,type:"POST",dataType:"json",data:e.serialize(),success:t.success})}}),i=function(){a.fire("change")};return e.find("*").change(i),e.find("input, textarea").bind("textchange",i),a},message:{SAVE:"Save",SAVING:"Saving",SAVED:"Saved",RETRY:"Try Again",ERROR_SAVING:"There was an error saving"}},eventize=function(e){var t={};return e.on=function(n,a){return void 0===t[n]&&(t[n]=[]),t[n].push(a),e},e.fire=function(n,a){var i;if(void 0!==t[n])for(i=0;i<t[n].length;i+=1)t[n][i].apply(e,[a]);return e},e};define("save-button",["jquery"],function(e){return function(){var t;return t||e.SaveButton}}(this)),define("css/css!../lib/codemirror/codemirror",[],function(){}),define("css/css!yui-combo",[],function(){}),define("local-deps",function(){});