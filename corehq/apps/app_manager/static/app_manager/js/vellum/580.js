"use strict";(self.webpackChunkvellum=self.webpackChunkvellum||[]).push([[580],{4580:(t,e,n)=>{var o=n(8324),i=n.n(o),a=n(1134),l=n(2660),u=n(8077),r=i().assert,s=a.A.call;describe("The exporter",(function(){beforeEach((function(t){a.A.init({core:{onReady:function(){t()}},features:{rich_text:!1,case_micro_image:!0,use_custom_repeat_button_text:!0}})})),it("should include question type in TSV",(function(){a.A.loadXML(l),r.equal(s("getData").core.form.getExportTSV(),"Question\tType\tText (en)\tText (hin)\tAudio (en)\tAudio (hin)\tImage (en)\tImage (hin)\tVideo (en)\tVideo (hin)\tVideo Inline (en)\tVideo Inline (hin)\tDisplay Condition\tValidation Condition\tValidation Message\tCalculate Condition\tRequired\tHint Text\tHelp Text\tComment\t'Add New' Button Text\t'Add Another' Button Text\n/question1\tText\tquestion1 en label\tquestion1 hin label\tjr://file/commcare/audio/data/question1.mp3\tjr://file/commcare/audio/data/question1.mp3\tjr://file/commcare/image/data/question1.png\tjr://file/commcare/image/data/question1.png\tjr://file/commcare/video/data/question1.3gp\tjr://file/commcare/video/data/question1.3gp\tjr://file/commcare/video-inline/data/question1.3gp\tjr://file/commcare/video-inline/data/question1.3gp\t#form/question20\t#form/question20 = 2\tquestion1 en validation\t\tyes\tquestion1 en hint\tquestion1 en help\t\"question 1 comment\n* with __markdown__\"\t\t\n/question2\tLabel\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\tquestion 2 comment\t\t\n/question30\tLabel\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question3\tMultiple Choice\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question3-choice1\tChoice\tchoice1\tchoice1\tjr://file/commcare/audio/data/question3-choice1.mp3\tjr://file/commcare/audio/data/question3-choice1.mp3\tjr://file/commcare/image/data/question3-choice1.png\tjr://file/commcare/image/data/question3-choice1.png\tjr://file/commcare/video/data/question3-choice1.3gp\tjr://file/commcare/video/data/question3-choice1.3gp\tjr://file/commcare/video-inline/data/question3-choice1.3gp\tjr://file/commcare/video-inline/data/question3-choice1.3gp\t\t\t\t\t\t\t\t\t\t\n/question3-choice2\tChoice\tchoice2\tchoice2\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/question6\tCheckbox\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question13\tInteger\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question14\tPhone Number or Numeric ID\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question15\tDecimal\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question16\tLong\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question17\tDate\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question18\tTime\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question19\tDate and Time\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question21\tGroup\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question21/question31\tRepeat Group\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22\tRepeat Group\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\tadd new\tadd another\n/question22/question23\tQuestion List\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22/question23/question40\tGroup\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22/question23/question41\tRepeat Group\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22/question23/question24\tImage Capture\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22/question23/question25\tAudio Capture\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22/question23/question26\tVideo Capture\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22/question23/question27\tGPS\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22/question23/question28\tPassword\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22/question23/question29\tSignature Capture\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22/question23/question33\tDocument Upload\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22/question23/question7\tAndroid App Callout\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question22/question23/question35\tMicro-Image\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question20\tHidden Value\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t\n/question32\tHidden Value\t\t\t\t\t\t\t\t\t\t\t\t\t\t1 + 2\tno\t\t\t\t\t\n\tBase\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\t\t")})),it("should include item values in TSV",(function(){a.A.loadXML('<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/A65D7357-3B8A-427E-8D11-356A8BA32173" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<group>\n\t\t\t\t\t\t<question1 />\n\t\t\t\t\t</group>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/group" nodeset="/data/group" />\n\t\t\t<bind vellum:nodeset="#form/group/question1" nodeset="/data/group/question1" />\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="group-label">\n\t\t\t\t\t\t<value>group</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question1-label">\n\t\t\t\t\t\t<value>question1</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question1-1x-label">\n\t\t\t\t\t\t<value>item1</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question1-2x-label">\n\t\t\t\t\t\t<value>item2</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<group vellum:ref="#form/group" ref="/data/group">\n\t\t\t<label ref="jr:itext(\'group-label\')" />\n\t\t\t<select1 vellum:ref="#form/group/question1" ref="/data/group/question1">\n\t\t\t\t<label ref="jr:itext(\'question1-label\')" />\n\t\t\t\t<item>\n\t\t\t\t\t<label ref="jr:itext(\'question1-1x-label\')" />\n\t\t\t\t\t<value>1x</value>\n\t\t\t\t</item>\n\t\t\t\t<item>\n\t\t\t\t\t<label ref="jr:itext(\'question1-2x-label\')" />\n\t\t\t\t\t<value>2x</value>\n\t\t\t\t</item>\n\t\t\t</select1>\n\t\t</group>\n\t</h:body>\n</h:html>\n'),r.equal(s("getData").core.form.getExportTSV(),"Question\tType\tText (en)\tText (hin)\tAudio (en)\tAudio (hin)\tImage (en)\tImage (hin)\tVideo (en)\tVideo (hin)\tVideo Inline (en)\tVideo Inline (hin)\tDisplay Condition\tValidation Condition\tValidation Message\tCalculate Condition\tRequired\tHint Text\tHelp Text\tComment\n/group\tGroup\tgroup\tgroup\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\n/group/question1\tMultiple Choice\tquestion1\tquestion1\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t\n/group/question1-1x\tChoice\titem1\titem1\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n/group/question1-2x\tChoice\titem2\titem2\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")})),it("should include video references in TSV",(function(){a.A.loadXML('<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/48883BF5-AE38-44B7-B08C-77BA528EDA8E" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question1 />\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question1" nodeset="/data/question1" type="xsd:string" />\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question1-label">\n\t\t\t\t\t\t<value>question1</value>\n\t\t\t\t\t\t<value form="video">jr://file/commcare/video/data/question1.3gp</value>\n\t\t\t\t\t\t<value form="video-inline">jr://file/commcare/video-inline/data/question1.3gp</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t\t<translation lang="hin">\n\t\t\t\t\t<text id="question1-label">\n\t\t\t\t\t\t<value>question1</value>\n\t\t\t\t\t\t<value form="video">jr://file/commcare/video/data/question1.3gp</value>\n\t\t\t\t\t\t<value form="video-inline">jr://file/commcare/video-inline/data/question1.3gp</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input vellum:ref="#form/question1" ref="/data/question1">\n\t\t\t<label ref="jr:itext(\'question1-label\')" />\n\t\t</input>\n\t</h:body>\n</h:html>\n'),r.equal(s("getData").core.form.getExportTSV(),"Question\tType\tText (en)\tText (hin)\tAudio (en)\tAudio (hin)\tImage (en)\tImage (hin)\tVideo (en)\tVideo (hin)\tVideo Inline (en)\tVideo Inline (hin)\tDisplay Condition\tValidation Condition\tValidation Message\tCalculate Condition\tRequired\tHint Text\tHelp Text\tComment\n/question1\tText\tquestion1\tquestion1\t\t\t\t\tjr://file/commcare/video/data/question1.3gp\tjr://file/commcare/video/data/question1.3gp\tjr://file/commcare/video-inline/data/question1.3gp\tjr://file/commcare/video-inline/data/question1.3gp\t\t\t\t\tno\t\t\t")})),it("should properly escape special characters",(function(){a.A.loadXML(u),r.equal(s("getData").core.form.getExportTSV(),'Question\tType\tText (en)\tText (hin)\tAudio (en)\tAudio (hin)\tImage (en)\tImage (hin)\tVideo (en)\tVideo (hin)\tVideo Inline (en)\tVideo Inline (hin)\tDisplay Condition\tValidation Condition\tValidation Message\tCalculate Condition\tRequired\tHint Text\tHelp Text\tComment\n/text\tText\t"""Text"\t"""Text"\t\t\t\t\t\t\t\t\t\t\t\t\tno\t\t\t')}))}))},8077:t=>{t.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/8AC3DA3F-68C7-4451-A399-4553BB0A138F" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<text />\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/text" nodeset="/data/text" type="xsd:string" />\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="text-label">\n\t\t\t\t\t\t<value>"Text</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t\t<translation lang="hin">\n\t\t\t\t\t<text id="text-label">\n\t\t\t\t\t\t<value>"Text</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input vellum:ref="#form/text" ref="/data/text">\n\t\t\t<label ref="jr:itext(\'text-label\')" />\n\t\t</input>\n\t</h:body>\n</h:html>\n'}}]);