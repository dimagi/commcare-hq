"use strict";(self.webpackChunkvellum=self.webpackChunkvellum||[]).push([[720],{3720:(t,e,n)=>{var o=n(1134);const r='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/4552C9DD-F297-49CD-8606-AB59AD2C4EA7" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question/>\n\t\t\t\t\t<case vellum:ignore="retain" xmlns="http://commcarehq.org/case/transaction/v2" case_id="" date_modified="" user_id="">\n\t\t\t\t\t\t<update>\n\t\t\t\t\t\t\t<case_name/>\n\t\t\t\t\t\t\t<owner_id/>\n\t\t\t\t\t\t</update>\n\t\t\t\t\t</case>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question" nodeset="/data/question" type="xsd:string"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question-label">\n\t\t\t\t\t\t<value>question</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input vellum:ref="#form/question" ref="/data/question">\n\t\t\t<label ref="jr:itext(\'question-label\')"/>\n\t\t</input>\n\t</h:body>\n</h:html>\n',a='<?xml version="1.0" encoding="UTF-8"?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/398C9010-61DC-42D3-8A85-B857AC3A9CA0" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question1/>\n\t\t\t\t\t<case>\n\n\t\t\t\t\t<update vellum:ignore="retain"/></case>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question1" nodeset="/data/question1" type="xsd:string" />\n\t\t\t<bind vellum:nodeset="#form/case" nodeset="/data/case"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default=""/>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body></h:body>\n</h:html>\n',l='<?xml version="1.0" encoding="UTF-8"?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/398C9010-61DC-42D3-8A85-B857AC3A9CA0" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question1 />\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question1" nodeset="/data/question1" type="xsd:string" />\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default=""/>\n\t\t\t</itext>\n\t\t</model>\n\t\t<odkx:intent vellum:ignore="retain" xmlns:odkx="http://opendatakit.org/xforms" id="search" class="com.biometrac.core.PIPE">\n\t\t</odkx:intent>\r\n\t</h:head>\n\t<h:body></h:body>\n</h:html>\n',i='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/4552C9DD-F297-49CD-8606-AB59AD2C4EA7" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question vellum:ignore="retain"/>\n\t\t\t\t\t<question2/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind nodeset="/data/question" type="xsd:string"/>\n\t\t\t<bind nodeset="/data/question/extra/path" type="xsd:string"/>\n\t\t\t<bind nodeset="/data/question[extra = path]" type="xsd:string"/>\n\t\t\t<bind nodeset="/data/question[with][extra = path]" type="xsd:string"/>\n\t\t\t<bind vellum:nodeset="#form/question2" nodeset="/data/question2" type="xsd:string"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question2-label">\n\t\t\t\t\t\t<value>question2</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input vellum:ref="#form/question2" ref="/data/question2">\n\t\t\t<label ref="jr:itext(\'question2-label\')"/>\n\t\t</input>\n\t</h:body>\n</h:html>\n',s='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/4552C9DD-F297-49CD-8606-AB59AD2C4EA7" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question" nodeset="/data/question" type="xsd:string"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question-label" vellum:ignore="retain">\n\t\t\t\t\t\t<value>question</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input ref="/data/question" vellum:ignore="retain">\n\t\t\t<label ref="jr:itext(\'question-label\')"/>\n\t\t</input>\n\t</h:body>\n</h:html>\n',m='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/4552C9DD-F297-49CD-8606-AB59AD2C4EA7" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question vellum:ignore="retain"/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind nodeset="/data/question" type="xsd:string"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question-label" vellum:ignore="retain">\n\t\t\t\t\t\t<value>question</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input ref="/data/question">\n\t\t\t<label ref="jr:itext(\'question-label\')"/>\n\t\t</input>\n\t</h:body>\n</h:html>\n',u='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<ext vellum:ignore="retain"><content /></ext>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/4552C9DD-F297-49CD-8606-AB59AD2C4EA7" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question" nodeset="/data/question" type="xsd:string"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question-label">\n\t\t\t\t\t\t<value>question</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input vellum:ref="#form/question" ref="/data/question">\n\t\t\t<label ref="jr:itext(\'question-label\')"/>\n\t\t</input>\n\t</h:body>\n</h:html>\n',d='<?xml version="1.0" encoding="UTF-8"?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/398C9010-61DC-42D3-8A85-B857AC3A9CA0" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question1 />\n\t\t\t\t\t<question9 vellum:ignore="retain" />\n\t\t\t\t\t<question4 vellum:ignore="retain" />\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question1" nodeset="/data/question1" type="xsd:string" />\n\t\t\t<bind nodeset="/data/question9" vellum:ignore="retain" />\n\t\t\t<bind nodeset="/data/question4" vellum:ignore="retain" />\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default=""/>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body></h:body>\n</h:html>\n',h='<?xml version="1.0" encoding="UTF-8"?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/398C9010-61DC-42D3-8A85-B857AC3A9CA0" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question1/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question1" nodeset="/data/question1" type="xsd:string"/>\n\t\t\t<bind nodeset="/data/question1" vellum:ignore="retain"/>\n\t\t\t<bind nodeset="/data/question1" vellum:ignore="retain"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default=""/>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body></h:body>\n</h:html>\n',x='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/4552C9DD-F297-49CD-8606-AB59AD2C4EA7" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question" nodeset="/data/question" type="xsd:string"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question-label">\n\t\t\t\t\t\t<value>question</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t\t<ext vellum:ignore="retain">\n\t\t\t<one vellum:ignore="retain"/>\n\t\t\t<x><two vellum:ignore="retain"/></x>\n\t\t</ext>\n\t</h:head>\n\t<h:body>\n\t\t<input vellum:ref="#form/question" ref="/data/question">\n\t\t\t<label ref="jr:itext(\'question-label\')"/>\n\t\t</input>\n\t</h:body>\n</h:html>\n',f='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/4552C9DD-F297-49CD-8606-AB59AD2C4EA7" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question />\n\t\t\t\t\t<question2 vellum:ignore="retain"/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question" nodeset="/data/question" type="xsd:string" />\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="" />\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<unknown vellum:ref="#form/question" ref="/data/question" />\n\t</h:body>\n</h:html>\n';var g=o.A.assertXmlEqual,p=o.A.call;describe("The Ignore-But-Retain plugin",(function(){before((function(t){o.A.init({javaRosa:{langs:["en"]},core:{onReady:function(){t()}}})}));var t=function(t,e){o.A.loadXML(t),g(p("createXML"),t),p("getData").ignore.ignoredNodes=[],g(p("createXML"),e)};it("ignores data, bind, body, and setvalue nodes with various edge cases (see XML)",(function(){t('<?xml version="1.0" encoding="UTF-8"?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/B3D39778-3AF6-4163-8D51-52DC9A105662" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question1/>\n\t\t\t\t\t<question9>\n\t\t\t\t\t\t<question10 vellum:ignore="retain"/>\n\t\t\t\t\t\t<question11/>\n\t\t\t\t\t</question9>\n\t\t\t\t\t<question4 vellum:ignore="retain"/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question1" nodeset="/data/question1" type="xsd:string"/>\n\t\t\t<bind vellum:nodeset="#form/question9" nodeset="/data/question9"/>\n\t\t\t<bind nodeset="/data/question9/question10" type="xsd:int" vellum:ignore="retain"/>\n\t\t\t<bind vellum:nodeset="#form/question9/question11" nodeset="/data/question9/question11" type="xsd:int"/>\n\t\t\t<bind nodeset="/data/question4" vellum:ignore="retain"/>\n\t\t\t<setvalue event="xforms-revalidate" vellum:ref="#form/question1" ref="/data/question1" value="0"/>\n\t\t\t<setvalue event="xforms-ready" ref="/data/question1" value="1" vellum:ignore="retain"/>\n\t\t\t<setvalue event="xforms-ready" ref="/data/question2" value="2" vellum:ignore="retain"/>\n\t\t\t<setvalue event="xforms-ready" ref="/data/question3" value="3"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question1-label">\n\t\t\t\t\t\t<value>question1</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question9-label">\n\t\t\t\t\t\t<value>question9</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question11-label">\n\t\t\t\t\t\t<value>question11</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t\x3c!-- body nodes, including nesting --\x3e\n\t<h:body>\n\t\t<input vellum:ref="#form/question1" ref="/data/question1">\n\t\t\t<label ref="jr:itext(\'question1-label\')"/>\n\t\t</input>\n\t\t<group vellum:ref="#form/question9" ref="/data/question9">\n\t\t\t<label ref="jr:itext(\'question9-label\')"/>\n\t\t\t\x3c!-- ignored node after an inner label --\x3e\n\t\t\t<input ref="/data/question9/question10" vellum:ignore="retain">\n\t\t\t\t<label ref="jr:itext(\'question10-label\')"/>\n\t\t\t</input>\n\t\t\t<input vellum:ref="#form/question9/question11" ref="/data/question9/question11">\n\t\t\t\t<label ref="jr:itext(\'question11-label\')"/>\n\t\t\t</input>\n\t\t</group>\n\t\t<select1 ref="/data/question4" vellum:ignore="retain">\n\t\t\t<label ref="jr:itext(\'question4-label\')"/>\n\t\t\t<item>\n\t\t\t\t<label ref="jr:itext(\'question4-item5-label\')"/>\n\t\t\t\t<value>item5</value>\n\t\t\t</item>\n\t\t\t<item>\n\t\t\t\t<label ref="jr:itext(\'question4-item6-label\')"/>\n\t\t\t\t<value>item6</value>\n\t\t\t</item>\n\t\t</select1>\n\t</h:body>\n</h:html>\n','<?xml version="1.0" encoding="UTF-8"?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/B3D39778-3AF6-4163-8D51-52DC9A105662" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question1/>\n\t\t\t\t\t<question9>\n\t\t\t\t\t\t<question10 vellum:ignore="retain"/>\n\t\t\t\t\t\t<question11/>\n\t\t\t\t\t</question9>\n\t\t\t\t\t<question4 vellum:ignore="retain"/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question1" nodeset="/data/question1" type="xsd:string"/>\n\t\t\t<bind vellum:nodeset="#form/question9" nodeset="/data/question9"/>\n\t\t\t<bind nodeset="/data/question9/question10" type="xsd:int" vellum:ignore="retain"/>\n\t\t\t<bind vellum:nodeset="#form/question9/question11" nodeset="/data/question9/question11" type="xsd:int"/>\n\t\t\t<bind nodeset="/data/question4" vellum:ignore="retain"/>\n\t\t\t<setvalue event="xforms-revalidate" vellum:ref="#form/question1" ref="/data/question1" value="0"/>\n\t\t\t<setvalue event="xforms-ready" ref="/data/question3" value="3"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question1-label">\n\t\t\t\t\t\t<value>question1</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question9-label">\n\t\t\t\t\t\t<value>question9</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question11-label">\n\t\t\t\t\t\t<value>question11</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t\x3c!-- body nodes, including nesting --\x3e\n\t<h:body>\n\t\t<input vellum:ref="#form/question1" ref="/data/question1">\n\t\t\t<label ref="jr:itext(\'question1-label\')"/>\n\t\t</input>\n\t\t<group vellum:ref="#form/question9" ref="/data/question9">\n\t\t\t<label ref="jr:itext(\'question9-label\')"/>\n\t\t\t\x3c!-- ignored node after an inner label --\x3e\n\t\t\t<input ref="/data/question9/question10" vellum:ignore="retain">\n\t\t\t\t<label ref="jr:itext(\'question10-label\')"/>\n\t\t\t</input>\n\t\t\t<input vellum:ref="#form/question9/question11" ref="/data/question9/question11">\n\t\t\t\t<label ref="jr:itext(\'question11-label\')"/>\n\t\t\t</input>\n\t\t</group>\n\t\t<select1 ref="/data/question4" vellum:ignore="retain">\n\t\t\t<label ref="jr:itext(\'question4-label\')"/>\n\t\t\t<item>\n\t\t\t\t<label ref="jr:itext(\'question4-item5-label\')"/>\n\t\t\t\t<value>item5</value>\n\t\t\t</item>\n\t\t\t<item>\n\t\t\t\t<label ref="jr:itext(\'question4-item6-label\')"/>\n\t\t\t\t<value>item6</value>\n\t\t\t</item>\n\t\t</select1>\n\t</h:body>\n</h:html>\n')})),it("can insert ignored element into empty parent",(function(){o.A.loadXML(a),g(p("createXML"),a)})),it("does not insert multiple copies of ignored nodes",(function(){o.A.loadXML(h),g(p("createXML"),h)})),it("can ignore elements in <head>",(function(){o.A.loadXML(l),g(p("createXML"),l)})),it("preserves position when first tag in <HEAD> is ignored",(function(){o.A.loadXML(u),g(p("createXML"),u)})),it("handles multiple ignore nodes in a row",(function(){t(d,d)})),it("handles an ignore node's reference node being renamed",(function(){o.A.loadXML('<?xml version="1.0" encoding="UTF-8"?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/398C9010-61DC-42D3-8A85-B857AC3A9CA0" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question1 />\n\t\t\t\t\t<question9>\n\t\t\t\t\t\t<question10 vellum:ignore="retain" />\n\t\t\t\t\t\t<question11 />\n\t\t\t\t\t</question9>\n\t\t\t\t\t<question4 vellum:ignore="retain" />\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question1" nodeset="/data/question1" type="xsd:string" />\n\t\t\t<bind vellum:nodeset="#form/question9" nodeset="/data/question9" />\n\t\t\t<bind nodeset="/data/question9/question10" type="xsd:int" vellum:ignore="retain" />\n\t\t\t<bind vellum:nodeset="#form/question9/question11" nodeset="/data/question9/question11" type="xsd:int" />\n\t\t\t<bind nodeset="/data/question4" vellum:ignore="retain" />\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question1-label">\n\t\t\t\t\t\t<value>question1</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question9-label">\n\t\t\t\t\t\t<value>question9</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question10-label" vellum:ignore="retain">\n\t\t\t\t\t\t<value>question10</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question11-label">\n\t\t\t\t\t\t<value>question11</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question4-label" vellum:ignore="retain">\n\t\t\t\t\t\t<value>question4</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input vellum:ref="#form/question1" ref="/data/question1">\n\t\t\t<label ref="jr:itext(\'question1-label\')" />\n\t\t</input>\n\t\t<group vellum:ref="#form/question9" ref="/data/question9">\n\t\t\t<label ref="jr:itext(\'question9-label\')" />\n\t\t\t<input ref="/data/question9/question10" vellum:ignore="retain">\n\t\t\t\t<label ref="jr:itext(\'question10-label\')" />\n\t\t\t</input>\n\t\t\t<input vellum:ref="#form/question9/question11" ref="/data/question9/question11">\n\t\t\t\t<label ref="jr:itext(\'question11-label\')" />\n\t\t\t</input>\n\t\t</group>\n\t\t<select1 ref="/data/question4" vellum:ignore="retain">\n\t\t\t<label ref="jr:itext(\'question4-label\')" />\n\t\t\t<item>\n\t\t\t\t<label ref="jr:itext(\'question4-item5-label\')" />\n\t\t\t\t<value>item5</value>\n\t\t\t</item>\n\t\t\t<item>\n\t\t\t\t<label ref="jr:itext(\'question4-item6-label\')" />\n\t\t\t\t<value>item6</value>\n\t\t\t</item>\n\t\t</select1>\n\t</h:body>\n</h:html>\n'),p("getMugByPath","/data/question9").p.nodeID="question9a",g(p("createXML"),'<?xml version="1.0" encoding="UTF-8"?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/398C9010-61DC-42D3-8A85-B857AC3A9CA0" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question1/>\n\t\t\t\t\t<question9a>\n\t\t\t\t\t\t<question10 vellum:ignore="retain"/>\n\t\t\t\t\t\t<question11/>\n\t\t\t\t\t</question9a>\n\t\t\t\t\t<question4 vellum:ignore="retain"/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question1" nodeset="/data/question1" type="xsd:string"/>\n\t\t\t<bind vellum:nodeset="#form/question9a" nodeset="/data/question9a"/>\n\t\t\t<bind type="xsd:int" vellum:ignore="retain" nodeset="/data/question9a/question10"/>\n\t\t\t<bind vellum:nodeset="#form/question9a/question11" nodeset="/data/question9a/question11" type="xsd:int"/>\n\t\t\t<bind vellum:ignore="retain" nodeset="/data/question4"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question1-label">\n\t\t\t\t\t\t<value>question1</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question9a-label">\n\t\t\t\t\t\t<value>question9</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question10-label" vellum:ignore="retain">\n\t\t\t\t\t\t<value>question10</value>\n\t\t\t\t\t</text><text id="question11-label">\n\t\t\t\t\t\t<value>question11</value>\n\t\t\t\t\t</text><text id="question4-label" vellum:ignore="retain">\n\t\t\t\t\t\t<value>question4</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input vellum:ref="#form/question1" ref="/data/question1">\n\t\t\t<label ref="jr:itext(\'question1-label\')"/>\n\t\t</input>\n\t\t<group vellum:ref="#form/question9a" ref="/data/question9a">\n\t\t\t<label ref="jr:itext(\'question9a-label\')"/>\n\t\t\t<input vellum:ignore="retain" ref="/data/question9a/question10">\n\t\t\t\t<label ref="jr:itext(\'question10-label\')"/>\n\t\t\t</input>\n\t\t\t<input vellum:ref="#form/question9a/question11" ref="/data/question9a/question11">\n\t\t\t\t<label ref="jr:itext(\'question11-label\')"/>\n\t\t\t</input>\n\t\t</group>\n\t\t<select1 vellum:ignore="retain" ref="/data/question4">\n\t\t\t<label ref="jr:itext(\'question4-label\')"/>\n\t\t\t<item>\n\t\t\t\t<label ref="jr:itext(\'question4-item5-label\')"/>\n\t\t\t\t<value>item5</value>\n\t\t\t</item>\n\t\t\t<item>\n\t\t\t\t<label ref="jr:itext(\'question4-item6-label\')"/>\n\t\t\t\t<value>item6</value>\n\t\t\t</item>\n\t\t</select1>\n\t</h:body>\n</h:html>\n')})),it("handles a node being renamed that's referenced in an ignore node's XML",(function(){o.A.loadXML('<?xml version="1.0" encoding="UTF-8"?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/398C9010-61DC-42D3-8A85-B857AC3A9CA0" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question1 />\n\t\t\t\t\t<question9 vellum:ignore="retain" />\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question1" nodeset="/data/question1" type="xsd:string" />\n\t\t\t<bind nodeset="/data/question9" calculate="1 + /data/question1" vellum:ignore="retain"/>\n\t\t</model>\n\t</h:head>\n\t<h:body></h:body>\n</h:html>\n'),p("getMugByPath","/data/question1").p.nodeID="foobar",g(p("createXML"),'<?xml version="1.0" encoding="UTF-8"?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/398C9010-61DC-42D3-8A85-B857AC3A9CA0" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<foobar/>\n\t\t\t\t\t<question9 vellum:ignore="retain"/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/foobar" nodeset="/data/foobar" type="xsd:string"/>\n\t\t\t<bind nodeset="/data/question9" calculate="1 + /data/foobar" vellum:ignore="retain"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default=""/>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body></h:body>\n</h:html>\n')})),it("keeps relative position on delete sibling of ignored element",(function(){o.A.loadXML('<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/4552C9DD-F297-49CD-8606-AB59AD2C4EA7" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<before/>\n\t\t\t\t\t<delete-me/>\n\t\t\t\t\t<ignored vellum:ignore="retain"/>\n\t\t\t\t\t<after/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/before" nodeset="/data/before" type="xsd:string"/>\n\t\t\t<bind vellum:nodeset="#form/delete-me" nodeset="/data/delete-me" type="xsd:string"/>\n\t\t\t<bind nodeset="/data/ignored" type="xsd:string" vellum:ignore="retain"/>\n\t\t\t<bind vellum:nodeset="#form/after" nodeset="/data/after" type="xsd:string"/>\n\t\t\t<setvalue event="when-youre-strange" ref="/data/ignored[inner]" value="super()/flip"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="before-label">\n\t\t\t\t\t\t<value>before</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="delete-me-label">\n\t\t\t\t\t\t<value>delete-me</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="ignored-label" vellum:ignore="retain">\n\t\t\t\t\t\t<value>ignored</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="after-label">\n\t\t\t\t\t\t<value>after</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input vellum:ref="#form/before" ref="/data/before">\n\t\t\t<label ref="jr:itext(\'before-label\')"/>\n\t\t</input>\n\t\t<input vellum:ref="#form/delete-me" ref="/data/delete-me">\n\t\t\t<label ref="jr:itext(\'delete-me-label\')"/>\n\t\t</input>\n\t\t<input ref="/data/ignored" vellum:ignore="retain">\n\t\t\t<label ref="jr:itext(\'ignored-label\')"/>\n\t\t</input>\n\t\t<input vellum:ref="#form/after" ref="/data/after">\n\t\t\t<label ref="jr:itext(\'after-label\')"/>\n\t\t</input>\n\t</h:body>\n</h:html>\n'),o.A.deleteQuestion("delete-me"),g(p("createXML"),'<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/4552C9DD-F297-49CD-8606-AB59AD2C4EA7" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<before/>\n\t\t\t\t\t<ignored vellum:ignore="retain"/>\n\t\t\t\t\t<after/>\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/before" nodeset="/data/before" type="xsd:string"/>\n\t\t\t<bind nodeset="/data/ignored" type="xsd:string" vellum:ignore="retain"/>\n\t\t\t<bind vellum:nodeset="#form/after" nodeset="/data/after" type="xsd:string"/>\n\t\t\t<setvalue event="when-youre-strange" ref="/data/ignored[inner]" value="super()/flip"/>\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="before-label">\n\t\t\t\t\t\t<value>before</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="ignored-label" vellum:ignore="retain">\n\t\t\t\t\t\t<value>ignored</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="after-label">\n\t\t\t\t\t\t<value>after</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input vellum:ref="#form/before" ref="/data/before">\n\t\t\t<label ref="jr:itext(\'before-label\')"/>\n\t\t</input>\n\t\t<input ref="/data/ignored" vellum:ignore="retain">\n\t\t\t<label ref="jr:itext(\'ignored-label\')"/>\n\t\t</input>\n\t\t<input vellum:ref="#form/after" ref="/data/after">\n\t\t\t<label ref="jr:itext(\'after-label\')"/>\n\t\t</input>\n\t</h:body>\n</h:html>\n')})),it("should not duplicate nested ignored nodes",(function(){o.A.loadXML(x),g(p("createXML"),x)})),it("should preserve data node children",(function(){o.A.loadXML(r),g(p("createXML"),r)})),it("should ignore binds and controls associated with ignored data node",(function(){o.A.loadXML(m),o.A.assertJSTreeState("question"),g(p("createXML"),m)})),it("should ignore bind nodes with extra path elements",(function(){o.A.loadXML(i),o.A.assertJSTreeState("question","question2"),g(p("createXML"),i)})),it("should ignore control node",(function(){o.A.loadXML(s),o.A.assertJSTreeState("question","ignored--1"),g(p("createXML"),s)})),it("should load form with unknown/un-ignored element",(function(){o.A.loadXML(f),g(p("createXML"),f)}))}))},1134:(t,e,n)=>{n.d(e,{A:()=>L});var o=n(8449),r=n(8324),a=n.n(r),l=n(6848),i=n.n(l),s=n(3794),m=n.n(s),u=n(4523),d=n(561),h=n.n(d),x=n(1437),f=n.n(x),g=n(3809),p=n.n(g),v=n(705),c=n.n(v),q=n(7229),w=n.n(q),b=(n(1460),n(8803),a().assert),j=["Form Builder clip","version 1"];function y(t,e,n){if((n=u.Ay.defaults(n||{},{normalize_xmlns:!1,not:!1})).normalize_xmlns){var o=w().parseXML(e).find("data").attr("xmlns");t=t.replace(/(data[^>]+xmlns=")(.+?)"/,"$1"+o+'"')}var r,a,l,s,m=(r=t,a=e,l=i().xml(r),s=i().xml(a),i().isEquivalent(l,s,{element_order:!0}));n.not&&(m=!m),m||A(t=D(t),e=D(e),"XML "+(n.not?"should not be equivalent":"mismatch"))}function A(t,e,n){if(t!==e){var o=m().createPatch("",t,e,"actual","expected");o=o.replace(/^Index:/,n||"Not equal:"),b(!1,function(t){var e={"-":31,"+":32};return t.replace(/^.+?$/gm,(function(t){return"["+(e[t[0]]||0)+"m"+t+"[0m"}))}(o))}}function D(t){return(t=t.replace(/^\t+/gm,(function(t){return t.replace(/\t/g,"  ")}))).match(/\n$/)||(t+="\n"),t}function F(t){return M("getCurrentMugInput",t)}function C(t){var e=h()("#vellum").vellum("get"),n=u.Ay.isString(t)?h()("[name="+t+"]"):t;return c().util.getWidget(n,e)}function M(){var t=Array.prototype.slice.call(arguments),e=h()("#vellum");return e.vellum.apply(e,t)}function U(){var t=[],e=u.Ay.map(arguments,(function(e){var n=u.Ay.isString(e)?X(e):e;if(!n||!n.ufid)throw new Error("mug not found: "+e);return t.push(n),n.ufid}));return M("jstree","deselect_all",!0),M("jstree","select_node",e),h()(".collapse-toggle.collapsed").click(),t}function X(t){0!==t.indexOf("/")&&(t="/data/"+t);var e=M("getMugByPath",t);if(!e){var n=t.split("/"),o=M("getMugByPath",n.slice(0,-1).join("/"));if(o&&o.__className.indexOf("Select")>-1){var r=M("getData").core.form.getChildren(o),a=n[n.length-1];if(1===r.length&&"itemset"===a&&"itemset"===r[0].options.tagName)return r[0];for(var l=0;l<r.length;l++)if(r[l].p.nodeID===a)return r[l]}}return e}b.equal=b.strictEqual,b.notEqual=b.notStrictEqual;const L={options:o.A,asyncatch:function(t){return function(){try{var e=Array.prototype.slice.call(arguments);return t.apply(this,e)}catch(t){throw t&&t.stack?new Error(t.stack):t}}},init:function(t){t=t||{};var e=h().extend(!0,{},o.A.options,t),n=h().fn.animate;h().fn.animate=function(t,e,o,r){n.apply(this,[t,0,o,r])},t.javaRosa&&t.javaRosa.langs&&(e.javaRosa.langs=t.javaRosa.langs),e.plugins=u.Ay.without(e.plugins,"atwho"),t.plugins&&(e.plugins=t.plugins),e&&e.features&&u.Ay.isUndefined(e.features.disable_popovers)&&(e.features.disable_popovers=!0),e.core=e.core||{};var r=e.core.saveUrl||function(){};e.core.saveUrl=function(t){return t.xform,r(t)};var a=h()("#vellum"),l=a.vellum("get");l&&(l.destroy(),h()("body > div.modal, body > div.modal-backdrop").remove()),a.empty().vellum(e)},call:M,loadXML:function(t,e,n,o){var r=[],a=M("getData");return o||window.history.replaceState(null,null," "),a.core.parseWarnings=[],M("loadXML",t,e||{}),n?u.Ay.isRegExp(n)&&(r=u.Ay.filter(a.core.parseWarnings,(function(t){return!n.test(t)}))):r=a.core.parseWarnings,b(!r.length,"unexpected parse warnings:\n- "+r.join("\n- ")),delete a.core.parseWarnings,a.core.form},saveAndReload:function(t){M("loadXFormOrError",M("createXML"),t)},getMug:X,getInput:F,getWidget:C,getMediaUploader:function(t){var e,n={},o=C(t);if(!o)throw new Error("media uploader widget not found");if(u.Ay.find([".widget[data-hqmediapath]",".itext-block-container"],(function(n){return(e=t.closest(n)).length})),!e)throw new Error("media uploader element not found");return n.upload=function(t){var n={ref:{path:o.getRandomizedMediaPath(t)},errors:[]};e.trigger("mediaUploadComplete",n)},n},assertEqual:A,assertInputCount:function(t,e,n){u.Ay.isString(t)?(n=" for "+(n?n+" ":"")+t,t=F(t)):n=n?" for "+n:"",b.equal(t.length,e,"wrong number of inputs"+n)},assertXmlEqual:y,assertXmlNotEqual:function(t,e,n){(n=n||{}).not=!0,y(t,e,n)},assertJSTreeState:function(){var t=Array.prototype.slice.call(arguments).join("\n")+"\n";A(function t(e,n){var o,r,a,l=[];for("#"===e.id?n=-1:l.push(Array(2*n+1).join(" ")+e.text),o=0,r=e.children.length;o<r;o++)a=M("jstree","get_node",e.children[o]),l.push(t(a,n+1));return l.join("\n")}(M("jstree","get_node","#"))+"\n",t,"Unexpected jstree state")},assertTreeState:function(t){var e=Array.prototype.slice.call(arguments,1).join("\n")+"\n";A(function t(e,n){var o,r,a,l=[];for(e.isRootNode?n=-1:l.push(Array(2*n+1).join(" ")+e.value.p.nodeID),o=0,r=e.children.length;o<r;o++)a=e.children[o],l.push(t(a,n+1));return l.join("\n")}(t.rootNode,0)+"\n",e,"Unexpected tree state")},addQuestion:function(t,e,n){n=u.Ay.extend({},n),this.prevId&&U(this.prevId);var o=M("addQuestion",t);return e||o.p.nodeID||(e=M("nodeIDFromLabel",o)),e&&(b(u.Ay.isUndefined(n.nodeID),"unexpected attribute for "+t+"["+e+"]"),o.p.labelItext&&o.p.labelItext.set(o.getLabelValue()),o.p.nodeID=e,"Choice"!==t||n.hasOwnProperty("labelItext")||(n.labelItext=e)),u.Ay.each(n,(function(t,e){u.Ay.isBoolean(t)||(t=String(t)),/.+Itext/.test(e)?o.p[e].set(t):o.p[e]=t})),u.Ay.each(M("getSections",o),(function(t){M("collapseSection",t.slug,!1)})),o},paste:function(t,e,n){u.Ay.isString(t)||(t=p().tabDelimit([j].concat(t))),n&&window.console.log(t),b.deepEqual(f().paste(t),e||[])},clickQuestion:U,selectAll:function(){M("jstree","select_all")},deleteQuestion:function(){var t=u.Ay.map(arguments,(function(t){var e=X(t);return b(e,"mug not found: "+t),e}));M("getData").core.form.removeMugsFromForm(t),u.Ay.each(arguments,(function(t){b(!X(t),"mug not removed: "+t)}))},saveButtonEnabled:function(t){var e=M("getData").core.saveButton;if(!u.Ay.isUndefined(t)){var n=t?"save":"saved";e.setStateWhenReady(n),b.equal(e.state,n,"sanity check failed")}return"save"===e.state},expandGroup:function(t){M("jstree","open_node",t.ufid),M("jstree","redraw_node",t.ufid,!0,!1,!1)},collapseGroup:function(t){M("jstree","close_node",t.ufid),M("jstree","redraw_node",t.ufid,!0,!1,!1)},getMessages:function(t){var e=[],n=null;if(u.Ay.isString(t)){var o=t;t=X(o),b(t,"mug not found: "+o)}return t.messages.each((function(t,o){o!==n&&(e.push(o+":"),n=o),e.push("  - "+t.message)})),e.join("\n")},findNode:function(t,e,n){if(u.Ay.isString(e)){var o=e;e=function(t){return t.text===o}}return function n(o){var r,a,l;if(e(o))return o;for(r=0,a=o.children.length;r<a;r++)if(l=n(t.get_node(o.children[r])))return l;return null}(n||t.get_node("#"))},isTreeNodeValid:function(t){if(u.Ay.isString(t)){var e=t;t=X(e),b(t,"mug not found: "+e)}return 0===h()("#vellum").find("#"+t.ufid+" > a").children(".fd-valid-alert-icon").length},markdownVisible:function(){return h()(".itext-block-label-group-default").find(".markdown-output").is(":visible")},parseXML:w().parseXML}}}]);