"use strict";(self.webpackChunkvellum=self.webpackChunkvellum||[]).push([[194],{4194:(t,a,c)=>{c.r(a);var n=c(8324),e=c.n(n),r=c(3809),b=c.n(r),i=e().assert;function u(t,a,c){var n=t.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t");i.deepEqual(function(t,a){for(var c=[],n=b().makeRowParser(t),e=n();e&&(c.push(e),!(a&&c.length>=a));)e=n();return c}(t,a.length+5),a,"parsed '"+n+"'"),c&&i.strictEqual(b().tabDelimit(a),t)}describe("The TSV parser",(function(){it("should parse empty string",(function(){u("",[],!0)})),it("should parse simple TSV",(function(){u("a\tb",[["a","b"]],!0),u("a\tb\r",[["a","b"]]),u("a\tb\n",[["a","b"]]),u("a\tb\u2028",[["a","b"]]),u("a\tb\u2029",[["a","b"]]),u("a\tb\r\n",[["a","b"]]),u("a\tb\n\r",[["a","b"],[""]])})),it("should parse simple mutli-line TSV",(function(){u("a\tb\nc",[["a","b"],["c"]],!0),u("a\tb\rc\r",[["a","b"],["c"]]),u("a\tb\nc\n",[["a","b"],["c"]]),u("a\tb\u2028c\u2028",[["a","b"],["c"]]),u("a\tb\u2029c\u2029",[["a","b"],["c"]]),u("a\tb\r\nc\r\n",[["a","b"],["c"]]),u("a\tb\n\rc\n",[["a","b"],[""],["c"]])})),it("should parse quoted field",(function(){u('a\t"b\tc"',[["a","b\tc"]],!0),u('"a"\t"b\tc"\r',[["a","b\tc"]]),u('"a"\t"b\tc"\n',[["a","b\tc"]]),u('"a"\t"b\tc"\u2028',[["a","b\tc"]]),u('"a"\t"b\tc"\u2029',[["a","b\tc"]]),u('"a"\t"b\tc"\r\n',[["a","b\tc"]]),u('"a"\t"b\tc"\n\r',[["a","b\tc"],[""]]),u('"a"\t"b\tc"\n"a"\t"b\tc"\n',[["a","b\tc"],["a","b\tc"]])})),it("should parse empty quoted field",(function(){u('""\t""\n',[["",""]])})),it("should parse quoted field with escaped quotes",(function(){u('"a""x"\t"b""\t""c"',[['a"x','b"\t"c']],!0),u('"a""x"\t"b""""""c"',[['a"x','b"""c']],!0),u('"a""x"\t"b""\t""c"\n"a""x"\t"b""\t""c"',[['a"x','b"\t"c'],['a"x','b"\t"c']],!0)})),it("should parse quoted multi-line field",(function(){u('"a""x"\t"b\nc\rd\r\ne"',[['a"x',"b\nc\rd\r\ne"]],!0),u('"a""x"\t"b\u2028c\u2029d"',[['a"x',"b\u2028c\u2029d"]],!0),u('"a""x"\t"b\nc\rd\r\ne"\n"a""x"\t"b\nc\rd\r\ne"',[['a"x',"b\nc\rd\r\ne"],['a"x',"b\nc\rd\r\ne"]],!0)})),it("should parse malformed quoted field",(function(){u('abc\t"def"ghi\t"jkl',[["abc",'"def"ghi','"jkl']]),u('abc\t"def"ghi"\t"jkl',[["abc",'"def"ghi"','"jkl']]),u('abc\t"def\t"ghi\t"jkl',[["abc",'"def','"ghi','"jkl']])}))})),describe("The TSV writer",(function(){it("should convert null to empty string",(function(){i.strictEqual(b().escape(null),"")})),it("should convert undefined to empty string",(function(){i.strictEqual(b().escape(void 0),"")})),it("should not convert zero to empty string",(function(){i.strictEqual(b().escape(0),"0")})),it("should escape special characters",(function(){var t=[['""',"\t\t\t","\n\n\n","\r\r\r",""],["  "]],a='""""""\t"\t\t\t"\t"\n\n\n"\t"\r\r\r"\t\n  ';i.strictEqual(b().tabDelimit(t),a),u(a,t,!0)}))}))}}]);