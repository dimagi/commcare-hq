(self.webpackChunkvellum=self.webpackChunkvellum||[]).push([[518],{7229:(e,t,a)=>{var u,n;u=[a(561),a(3946)],void 0===(n=function(e,t){function a(t,a=!1){var u=n(t||""),o=document.implementation.createHTMLDocument().createElement("div");return a?e(o).append(u):e(o).html(u)}function u(u,o){if(!u)return"";if(t.isString(u)){if(!/[<>&]/.test(u))return u;u=function(e){return e.replace(/<(([\w:.-]+)(?:\s[^<]*?|))\/>/g,"<$1></$2>")}(n(u)),u=o?e(u):a(u,!0)}var r=new XMLSerializer,s=u[0];void 0===s&&(s=u);var l=r.serializeToString(s);return l.startsWith("<output")&&(l="<div>"+l+"</div>"),l.replace(/ xmlns="http:\/\/www.w3.org\/1999\/xhtml"/g,"").replace(/^<([\w:.-]+)(?:\s+[\w:.-]+=(["'])[^]*?\2)*\s*(?:\/>|>([^]*)<\/\1>)$/g,"$3").replace(/(<([\w:.-]+)(?:\s[^>]*|))><\/\2>/g,"$1 />").replace(/(<(output)(?:\s[^>]*|))>([\w\W]+)<\/output>/g,"$1 />$3").replace(/&nbsp;|\xa0/g," ").replace(/ xmlns:vellum="http:\/\/commcarehq.org\/xforms\/vellum"([ \/>])/g,"$1")}function n(e){return e.replace(/<(([\w:.-]+)(?:\s[^>]*|))\/>/g,"<$1></$2>")}return{humanize:function(e,a){return e?t.isString(e)&&-1===e.indexOf("&")&&!/<([\w:.-]+)(?:\s[^>]*|)><\/\1>/.test(e)?e:u(e,a).replace(/(?:&lt;(=?\s)|(\s)&gt;|&amp;([^&;\s]+;|.|$))/g,(function(e,t,a,u){return t?"<"+t:a?a+">":";"===u.slice(u.length-1)?e:"&"+u})):""},normalize:u,parseXML:function(t){return t?(t=t.replace(/<(h:)?html\b/,"<h:xdoc").replace(/<\/(h:)?html\b>/,"</h:xdoc>"),e(e.parseXML(t))):e()},query:function(t){var a,u='<xml xmlns="http://www.w3.org/1999/xhtml" xmlns:vellum="http://commcarehq.org/xforms/vellum">'+(t=n(t))+"</xml>";try{a=e(e.parseXML(u))}catch(u){a=e("<xml></xml>").html(t)}return a.toString=function(){return(new XMLSerializer).serializeToString(a[0]).replace(/^<xml\b[^>]*>/,"").replace(/<\/xml>$/,"").replace(/(<([\w:.-]+)(?:\s[^>]*|))><\/\2>/g,"$1 />").replace(/(<(output)(?:\s[^>]*|))>([\w\W]+)<\/output>/g,"$1 />$3").replace(/"\/>/g,'" />').replace(/&nbsp;|\xa0/g," ")},a},xhtml:a}}.apply(t,u))||(e.exports=n)},4518:(e,t,a)=>{"use strict";var u=a(561),n=a.n(u),o=a(4523),r=a(8324),s=a.n(r),l=a(7229),i=a.n(l);const c='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/2002/xforms" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n<value>debug\n\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought" />\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging" />\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests" />\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths" />\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure" />\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary" />\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance" />\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices" />\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices" />\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup" />\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death" />\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera" />\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft" />\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage" />\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind" />\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought" />\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging" />\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests" />\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths" />\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure" />\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary" />\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance" />\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices" />\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices" />\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup" />\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death" />\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera" />\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft" />\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage" />\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind" />\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought" />\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging" />\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests" />\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths" />\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure" />\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary" />\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance" />\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices" />\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices" />\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup" />\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death" />\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera" />\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft" />\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage" />\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind" />\nother: <output value="/data/save/shocks/other" vellum:value="#form/save/shocks/other" /></value>\n</h:html>',v='debug\n\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought"/>\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging"/>\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests"/>\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths"/>\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure"/>\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary"/>\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance"/>\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices"/>\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices"/>\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup"/>\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death"/>\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera"/>\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft"/>\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage"/>\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind"/>\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought"/>\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging"/>\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests"/>\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths"/>\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure"/>\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary"/>\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance"/>\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices"/>\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices"/>\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup"/>\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death"/>\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera"/>\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft"/>\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage"/>\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind"/>\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought"/>\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging"/>\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests"/>\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths"/>\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure"/>\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary"/>\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance"/>\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices"/>\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices"/>\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup"/>\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death"/>\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera"/>\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft"/>\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage"/>\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind"/>\nother: <output value="/data/save/shocks/other" vellum:value="#form/save/shocks/other"/>',p='edd:<output value="/data/edd" vellum:value="#form/edd"></output>\nvisit #:<output value="/data/calendario/visita_numero" vellum:value="#form/calendario/visita_numero"></output>\nclose to edd?: <output value="/data/calendario/visita_perto_do_edd" vellum:value="#form/calendario/visita_perto_do_edd"></output>\nfinal visit?: <output value="/data/calendario/e_visita_final" vellum:value="#form/calendario/e_visita_final"></output><output value="/data/calendario/atualiza_vp_datos/atualiza_vp9" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp9"></output>\n\nNew values:\nvp1:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp1" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp1"></output>\nvp2:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp2" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp2"></output>\nvp3:\nvp4:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp4" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp4"></output>\nvp5:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp5" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp5"></output>  \nvp6:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp6" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp6"></output>\nvp7:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp7" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp7"></output>\nvp8:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp8" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp8"></output>\nvp9:\n\nExisting data:\nvp1:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp1_data" vellum:value="#case/vp1_data"></output>\nvp2:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp2_data" vellum:value="#case/vp2_data"></output>\nvp3:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp3_data" vellum:value="#case/vp3_data"></output>  \nvp4:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp4_data" vellum:value="#case/vp4_data"></output>\nvp5:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp5_data" vellum:value="#case/vp5_data"></output>  \nvp6:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp6_data" vellum:value="#case/vp6_data"></output>\nvp7:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp7_data" vellum:value="#case/vp7_data"></output>\nvp8:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp8_data" vellum:value="#case/vp8_data"></output>\nvp9:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp9_data" vellum:value="#case/vp9_data"></output>';var f=s().assert;describe("The XML normalizer",(function(){function e(e,t,a){var u=i().normalize(e);f.strictEqual(u,t),(o.Ay.isUndefined(a)||a)&&f.strictEqual(i().humanize(u),e)}it("should preserve empty string",(function(){e("","")})),it("should preserve space",(function(){e(" "," ")})),it("should preserve newline",(function(){e(" "," ")})),it("should preserve empty XML node",(function(){e("<output />","<output />")})),it("should escape & character",(function(){e("Mother & Child Reunion","Mother &amp; Child Reunion")})),it("should escape attribute value with < character",(function(){e('<output value="2 < 3" />','<output value="2 &lt; 3" />')})),it("should escape attribute value with > character",(function(){e('<output value="2 > 3" />','<output value="2 &gt; 3" />')})),it("should escape attribute value with <= character",(function(){e('<output value="2 <= 3" />','<output value="2 &lt;= 3" />')})),it("should escape attribute value with >= character",(function(){e('<output value="2 >= 3" />','<output value="2 &gt;= 3" />')})),it("should escape attribute value with < tight",(function(){e('<output value="2<3" />','<output value="2&lt;3" />',!1)})),it("should escape attribute value with > tight",(function(){e('<output value="2>3" />','<output value="2&gt;3" />',!1)})),it("should escape < character",(function(){e("your visit count must be < 5","your visit count must be &lt; 5")})),it("should escape > character",(function(){e("your visit count must be > 5","your visit count must be &gt; 5")})),it("should escape attribute value with > and trailing text (v1)",(function(){e('<output value="2 > 3" /> text','<output value="2 &gt; 3" /> text')})),it("should escape attribute value with > and trailing text (v2)",(function(){e("<output value='2 > 3' /> text",'<output value="2 &gt; 3" /> text',!1)})),it("should escape attribute value with > and trailing text (v3)",(function(){e('<output value="2 > 3"/>text','<output value="2 &gt; 3" />text',!1)})),it("should escape attribute value with > and trailing text (v4)",(function(){e('<output value="2 > 3"></output> text','<output value="2 &gt; 3" /> text',!1)})),it("should escape attribute value with > and trailing text (v5)",(function(){e('<out:p_3-6. h:v-1._="2 > 3" />text','<out:p_3-6. h:v-1._="2 &gt; 3" />text')})),it("should escape attribute value with < and trailing text",(function(){e('<output value="2 < 3" /> text','<output value="2 &lt; 3" /> text')})),it("should escape < character before tag",(function(){e('your visit count must be < <output value="/path" />','your visit count must be &lt; <output value="/path" />')})),it("should escape > character before tag",(function(){e('your visit count must be > <output value="/path" />','your visit count must be &gt; <output value="/path" />')})),it("should preserve attribute value with path",(function(){e('<output value="/path" />','<output value="/path" />')})),it("should preserve output node with text before",(function(){e('text <output value="/path" />','text <output value="/path" />')})),it("should preserve output node with text after",(function(){e('<output value="/path" /> text','<output value="/path" /> text')})),it("should preserve attribute without value",(function(){e("<output attr />",'<output attr="" />',!1)})),it("should preserve attribute value with path, unterminated tag",(function(){e('<output value="/path">','<output value="/path" />',!1)})),it("should preserve newline",(function(){e("line 1\nline2","line 1\nline2")})),it("should preserve attribute with unquoted value",(function(){e("<output attr=value />",'<output attr="value" />',!1)})),it("should escape unquoted attribute value with <",(function(){e("<output value=2<3 />",'<output value="2&lt;3" />',!1)})),it("should fail on escape attribute value with />",(function(){s().expect((function(){e('<output value="../>.." />','<output value="..&gt;.." />',!1)})).to.throw(Error)})),it("should accept jquery node",(function(){e(n()("<value><output /></value>"),"<output />",!1)})),it("should handle malformed tag",(function(){e('<output value="/path"',"",!1)})),it("should replace &nbsp; with space",(function(){e("a &nbsp; b","a   b",!1)})),it("should not cause regexp engine to hang on many output values in jquery object",(function(){e(i().parseXML(c).find("value"),v,!1)})),it("should not cause regexp engine to hang on many output values in string",(function(){var t=i().parseXML(c);e((new XMLSerializer).serializeToString(t.find("value")[0]).replace(/(value="[^"]+)"/g,'$1 > 2"').replace(/^<([\w:.-]+)(?:\s+[\w:.-]+=(["'])[^]*?\2)*\s*(?:\/>|>([^]*)<\/\1>)$/g,"$3"),v.replace(/(value="[^"]+)"/g,'$1 &gt; 2"').replace(/"\/>/g,'" />'),!1)})),it("should not cause regexp engine to hang on many output values in string #2",(function(){e(p,p.replace(/><\/output>/g," />"),!1)}))})),describe("The XML humanizer",(function(){function e(e,t,a){var u=i().humanize(e);f.strictEqual(u,t),a&&f.strictEqual(i().normalize(u),e)}it("should convert free < character",(function(){e("2 &lt; 3","2 < 3",!0)})),it("should convert free > character",(function(){e("2 &gt; 3","2 > 3",!0)})),it("should convert free & character",(function(){e("2 &amp; 3","2 & 3",!0)})),it("should not convert escaped tag",(function(){e(" &lt;div&gt; "," &lt;div&gt; ",!0)})),it("should convert output tag",(function(){e('<output value="1 &amp; 2 &lt; 3" />','<output value="1 & 2 < 3" />',!0)})),it("should not unescape '&amp;' when part of a double escaped character",(function(){e("&amp;amp;","&amp;amp;",!0)})),it("should not convert escaped tag with attribute",(function(){e('&lt;div class="injection"&gt;','&lt;div class="injection"&gt;',!0)})),it("should convert empty tag",(function(){e('<tag attr="value"></tag>','<tag attr="value" />')})),it("should convert child nodes",(function(){e(n()("<value>1 &amp; 2 &lt; 3 <output value='/path' /></value>"),'1 & 2 < 3 <output value="/path" />')})),it("should convert child output node",(function(){e(n()("<value><output value='1 &amp; 2 &lt; 3' /></value>"),'<output value="1 & 2 < 3" />')})),it("should convert empty child nodes",(function(){e(n()("<value />"),"")})),it("should space child node",(function(){e(n()("<value> </value>")," ")})),it("should newline child node",(function(){e(n()("<value>\n</value>"),"\n")})),it("should not cause regexp engine to hang on many output values",(function(){e(i().parseXML(c).find("value"),v,!1)})),it("should not wrap trailing text in output refs",(function(){e(n()("<value>&amp; <output value='/path' /> text-after *should* remain. ~&amp; not #disrupt the\nflow</value>"),'& <output value="/path" /> text-after *should* remain. ~& not #disrupt the\nflow')}))})),describe("The XML query",(function(){var e=f.strictEqual;it("should round-trip XML",(function(){e(i().query("<value>\n</value>").toString(),"<value>\n</value>")})),it("should round-trip XML fragment with leading text",(function(){e(i().query("def <value>abc</value>").toString(),"def <value>abc</value>")})),it("should round-trip XML fragment with trailing text",(function(){e(i().query("<value>abc</value> def").toString(),"<value>abc</value> def")})),it("should escape invalid XML",(function(){e(i().query("<h1>a > & < b</h1>").toString(),"<h1>a &gt; &amp; &lt; b</h1>")})),it("should round-trip empty string",(function(){e(i().query("").toString(),"")})),it("should round-trip newline",(function(){e(i().query("\n").toString(),"\n")})),it("should not insert text inside output refs",(function(){e(i().query('& <output value="/data/question1" vellum:value="#form/question1"> text-after *should* remain. ~& not #disrupt the\nflow</output>').toString(),'&amp; <output value="/data/question1" vellum:value="#form/question1" /> text-after *should* remain. ~&amp; not #disrupt the\nflow')}))}))},3946:function(e,t,a){e.exports=function(){var e="1.13.1",t="object"==typeof self&&self.self===self&&self||"object"==typeof a.g&&a.g.global===a.g&&a.g||Function("return this")()||{},u=Array.prototype,n=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,r=u.push,s=u.slice,l=n.toString,i=n.hasOwnProperty,c="undefined"!=typeof ArrayBuffer,v="undefined"!=typeof DataView,p=Array.isArray,f=Object.keys,h=Object.create,d=c&&ArrayBuffer.isView,m=isNaN,_=isFinite,g=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],b=Math.pow(2,53)-1;function y(e,t){return t=null==t?e.length-1:+t,function(){for(var a=Math.max(arguments.length-t,0),u=Array(a),n=0;n<a;n++)u[n]=arguments[n+t];switch(t){case 0:return e.call(this,u);case 1:return e.call(this,arguments[0],u);case 2:return e.call(this,arguments[0],arguments[1],u)}var o=Array(t+1);for(n=0;n<t;n++)o[n]=arguments[n];return o[t]=u,e.apply(this,o)}}function w(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function x(e){return void 0===e}function j(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)}function z(e){var t="[object "+e+"]";return function(e){return l.call(e)===t}}var S=z("String"),M=z("Number"),A=z("Date"),q=z("RegExp"),E=z("Error"),O=z("Symbol"),$=z("ArrayBuffer"),L=z("Function"),T=t.document&&t.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof T&&(L=function(e){return"function"==typeof e||!1});var X=L,B=z("Object"),N=v&&B(new DataView(new ArrayBuffer(8))),I="undefined"!=typeof Map&&B(new Map),D=z("DataView"),R=N?function(e){return null!=e&&X(e.getInt8)&&$(e.buffer)}:D,F=p||z("Array");function V(e,t){return null!=e&&i.call(e,t)}var W=z("Arguments");!function(){W(arguments)||(W=function(e){return V(e,"callee")})}();var U=W;function P(e){return M(e)&&m(e)}function C(e){return function(){return e}}function K(e){return function(t){var a=e(t);return"number"==typeof a&&a>=0&&a<=b}}function H(e){return function(t){return null==t?void 0:t[e]}}var J=H("byteLength"),G=K(J),Q=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,Y=c?function(e){return d?d(e)&&!R(e):G(e)&&Q.test(l.call(e))}:C(!1),Z=H("length");function ee(e,t){t=function(e){for(var t={},a=e.length,u=0;u<a;++u)t[e[u]]=!0;return{contains:function(e){return t[e]},push:function(a){return t[a]=!0,e.push(a)}}}(t);var a=k.length,u=e.constructor,o=X(u)&&u.prototype||n,r="constructor";for(V(e,r)&&!t.contains(r)&&t.push(r);a--;)(r=k[a])in e&&e[r]!==o[r]&&!t.contains(r)&&t.push(r)}function te(e){if(!w(e))return[];if(f)return f(e);var t=[];for(var a in e)V(e,a)&&t.push(a);return g&&ee(e,t),t}function ae(e,t){var a=te(t),u=a.length;if(null==e)return!u;for(var n=Object(e),o=0;o<u;o++){var r=a[o];if(t[r]!==n[r]||!(r in n))return!1}return!0}function ue(e){return e instanceof ue?e:this instanceof ue?void(this._wrapped=e):new ue(e)}function ne(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,J(e))}ue.VERSION=e,ue.prototype.value=function(){return this._wrapped},ue.prototype.valueOf=ue.prototype.toJSON=ue.prototype.value,ue.prototype.toString=function(){return String(this._wrapped)};var oe="[object DataView]";function re(e,t,a,u){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var n=typeof e;return("function"===n||"object"===n||"object"==typeof t)&&function e(t,a,u,n){t instanceof ue&&(t=t._wrapped),a instanceof ue&&(a=a._wrapped);var r=l.call(t);if(r!==l.call(a))return!1;if(N&&"[object Object]"==r&&R(t)){if(!R(a))return!1;r=oe}switch(r){case"[object RegExp]":case"[object String]":return""+t==""+a;case"[object Number]":return+t!=+t?+a!=+a:0==+t?1/+t==1/a:+t==+a;case"[object Date]":case"[object Boolean]":return+t==+a;case"[object Symbol]":return o.valueOf.call(t)===o.valueOf.call(a);case"[object ArrayBuffer]":case oe:return e(ne(t),ne(a),u,n)}var s="[object Array]"===r;if(!s&&Y(t)){if(J(t)!==J(a))return!1;if(t.buffer===a.buffer&&t.byteOffset===a.byteOffset)return!0;s=!0}if(!s){if("object"!=typeof t||"object"!=typeof a)return!1;var i=t.constructor,c=a.constructor;if(i!==c&&!(X(i)&&i instanceof i&&X(c)&&c instanceof c)&&"constructor"in t&&"constructor"in a)return!1}n=n||[];for(var v=(u=u||[]).length;v--;)if(u[v]===t)return n[v]===a;if(u.push(t),n.push(a),s){if((v=t.length)!==a.length)return!1;for(;v--;)if(!re(t[v],a[v],u,n))return!1}else{var p,f=te(t);if(v=f.length,te(a).length!==v)return!1;for(;v--;)if(!V(a,p=f[v])||!re(t[p],a[p],u,n))return!1}return u.pop(),n.pop(),!0}(e,t,a,u)}function se(e){if(!w(e))return[];var t=[];for(var a in e)t.push(a);return g&&ee(e,t),t}function le(e){var t=Z(e);return function(a){if(null==a)return!1;var u=se(a);if(Z(u))return!1;for(var n=0;n<t;n++)if(!X(a[e[n]]))return!1;return e!==fe||!X(a[ie])}}var ie="forEach",ce=["clear","delete"],ve=["get","has","set"],pe=ce.concat(ie,ve),fe=ce.concat(ve),he=["add"].concat(ce,ie,"has"),de=I?le(pe):z("Map"),me=I?le(fe):z("WeakMap"),_e=I?le(he):z("Set"),ge=z("WeakSet");function ke(e){for(var t=te(e),a=t.length,u=Array(a),n=0;n<a;n++)u[n]=e[t[n]];return u}function be(e){for(var t={},a=te(e),u=0,n=a.length;u<n;u++)t[e[a[u]]]=a[u];return t}function ye(e){var t=[];for(var a in e)X(e[a])&&t.push(a);return t.sort()}function we(e,t){return function(a){var u=arguments.length;if(t&&(a=Object(a)),u<2||null==a)return a;for(var n=1;n<u;n++)for(var o=arguments[n],r=e(o),s=r.length,l=0;l<s;l++){var i=r[l];t&&void 0!==a[i]||(a[i]=o[i])}return a}}var xe=we(se),je=we(te),ze=we(se,!0);function Se(e){if(!w(e))return{};if(h)return h(e);var t=function(){};t.prototype=e;var a=new t;return t.prototype=null,a}function Me(e){return w(e)?F(e)?e.slice():xe({},e):e}function Ae(e){return F(e)?e:[e]}function qe(e){return ue.toPath(e)}function Ee(e,t){for(var a=t.length,u=0;u<a;u++){if(null==e)return;e=e[t[u]]}return a?e:void 0}function Oe(e,t,a){var u=Ee(e,qe(t));return x(u)?a:u}function $e(e){return e}function Le(e){return e=je({},e),function(t){return ae(t,e)}}function Te(e){return e=qe(e),function(t){return Ee(t,e)}}function Xe(e,t,a){if(void 0===t)return e;switch(null==a?3:a){case 1:return function(a){return e.call(t,a)};case 3:return function(a,u,n){return e.call(t,a,u,n)};case 4:return function(a,u,n,o){return e.call(t,a,u,n,o)}}return function(){return e.apply(t,arguments)}}function Be(e,t,a){return null==e?$e:X(e)?Xe(e,t,a):w(e)&&!F(e)?Le(e):Te(e)}function Ne(e,t){return Be(e,t,1/0)}function Ie(e,t,a){return ue.iteratee!==Ne?ue.iteratee(e,t):Be(e,t,a)}function De(){}function Re(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}ue.toPath=Ae,ue.iteratee=Ne;var Fe=Date.now||function(){return(new Date).getTime()};function Ve(e){var t=function(t){return e[t]},a="(?:"+te(e).join("|")+")",u=RegExp(a),n=RegExp(a,"g");return function(e){return e=null==e?"":""+e,u.test(e)?e.replace(n,t):e}}var We={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ue=Ve(We),Pe=Ve(be(We)),Ce=ue.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Ke=/(.)^/,He={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Je=/\\|'|\r|\n|\u2028|\u2029/g;function Ge(e){return"\\"+He[e]}var Qe=/^\s*(\w|\$)+\s*$/,Ye=0;function Ze(e,t,a,u,n){if(!(u instanceof t))return e.apply(a,n);var o=Se(e.prototype),r=e.apply(o,n);return w(r)?r:o}var et=y((function(e,t){var a=et.placeholder,u=function(){for(var n=0,o=t.length,r=Array(o),s=0;s<o;s++)r[s]=t[s]===a?arguments[n++]:t[s];for(;n<arguments.length;)r.push(arguments[n++]);return Ze(e,u,this,this,r)};return u}));et.placeholder=ue;var tt=y((function(e,t,a){if(!X(e))throw new TypeError("Bind must be called on a function");var u=y((function(n){return Ze(e,u,t,this,a.concat(n))}));return u})),at=K(Z);function ut(e,t,a,u){if(u=u||[],t||0===t){if(t<=0)return u.concat(e)}else t=1/0;for(var n=u.length,o=0,r=Z(e);o<r;o++){var s=e[o];if(at(s)&&(F(s)||U(s)))if(t>1)ut(s,t-1,a,u),n=u.length;else for(var l=0,i=s.length;l<i;)u[n++]=s[l++];else a||(u[n++]=s)}return u}var nt=y((function(e,t){var a=(t=ut(t,!1,!1)).length;if(a<1)throw new Error("bindAll must be passed function names");for(;a--;){var u=t[a];e[u]=tt(e[u],e)}return e})),ot=y((function(e,t,a){return setTimeout((function(){return e.apply(null,a)}),t)})),rt=et(ot,ue,1);function st(e){return function(){return!e.apply(this,arguments)}}function lt(e,t){var a;return function(){return--e>0&&(a=t.apply(this,arguments)),e<=1&&(t=null),a}}var it=et(lt,2);function ct(e,t,a){t=Ie(t,a);for(var u,n=te(e),o=0,r=n.length;o<r;o++)if(t(e[u=n[o]],u,e))return u}function vt(e){return function(t,a,u){a=Ie(a,u);for(var n=Z(t),o=e>0?0:n-1;o>=0&&o<n;o+=e)if(a(t[o],o,t))return o;return-1}}var pt=vt(1),ft=vt(-1);function ht(e,t,a,u){for(var n=(a=Ie(a,u,1))(t),o=0,r=Z(e);o<r;){var s=Math.floor((o+r)/2);a(e[s])<n?o=s+1:r=s}return o}function dt(e,t,a){return function(u,n,o){var r=0,l=Z(u);if("number"==typeof o)e>0?r=o>=0?o:Math.max(o+l,r):l=o>=0?Math.min(o+1,l):o+l+1;else if(a&&o&&l)return u[o=a(u,n)]===n?o:-1;if(n!=n)return(o=t(s.call(u,r,l),P))>=0?o+r:-1;for(o=e>0?r:l-1;o>=0&&o<l;o+=e)if(u[o]===n)return o;return-1}}var mt=dt(1,pt,ht),_t=dt(-1,ft);function gt(e,t,a){var u=(at(e)?pt:ct)(e,t,a);if(void 0!==u&&-1!==u)return e[u]}function kt(e,t,a){var u,n;if(t=Xe(t,a),at(e))for(u=0,n=e.length;u<n;u++)t(e[u],u,e);else{var o=te(e);for(u=0,n=o.length;u<n;u++)t(e[o[u]],o[u],e)}return e}function bt(e,t,a){t=Ie(t,a);for(var u=!at(e)&&te(e),n=(u||e).length,o=Array(n),r=0;r<n;r++){var s=u?u[r]:r;o[r]=t(e[s],s,e)}return o}function yt(e){var t=function(t,a,u,n){var o=!at(t)&&te(t),r=(o||t).length,s=e>0?0:r-1;for(n||(u=t[o?o[s]:s],s+=e);s>=0&&s<r;s+=e){var l=o?o[s]:s;u=a(u,t[l],l,t)}return u};return function(e,a,u,n){var o=arguments.length>=3;return t(e,Xe(a,n,4),u,o)}}var wt=yt(1),xt=yt(-1);function jt(e,t,a){var u=[];return t=Ie(t,a),kt(e,(function(e,a,n){t(e,a,n)&&u.push(e)})),u}function zt(e,t,a){t=Ie(t,a);for(var u=!at(e)&&te(e),n=(u||e).length,o=0;o<n;o++){var r=u?u[o]:o;if(!t(e[r],r,e))return!1}return!0}function St(e,t,a){t=Ie(t,a);for(var u=!at(e)&&te(e),n=(u||e).length,o=0;o<n;o++){var r=u?u[o]:o;if(t(e[r],r,e))return!0}return!1}function Mt(e,t,a,u){return at(e)||(e=ke(e)),("number"!=typeof a||u)&&(a=0),mt(e,t,a)>=0}var At=y((function(e,t,a){var u,n;return X(t)?n=t:(t=qe(t),u=t.slice(0,-1),t=t[t.length-1]),bt(e,(function(e){var o=n;if(!o){if(u&&u.length&&(e=Ee(e,u)),null==e)return;o=e[t]}return null==o?o:o.apply(e,a)}))}));function qt(e,t){return bt(e,Te(t))}function Et(e,t,a){var u,n,o=-1/0,r=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=at(e)?e:ke(e)).length;s<l;s++)null!=(u=e[s])&&u>o&&(o=u);else t=Ie(t,a),kt(e,(function(e,a,u){((n=t(e,a,u))>r||n===-1/0&&o===-1/0)&&(o=e,r=n)}));return o}function Ot(e,t,a){if(null==t||a)return at(e)||(e=ke(e)),e[Re(e.length-1)];var u=at(e)?Me(e):ke(e),n=Z(u);t=Math.max(Math.min(t,n),0);for(var o=n-1,r=0;r<t;r++){var s=Re(r,o),l=u[r];u[r]=u[s],u[s]=l}return u.slice(0,t)}function $t(e,t){return function(a,u,n){var o=t?[[],[]]:{};return u=Ie(u,n),kt(a,(function(t,n){var r=u(t,n,a);e(o,t,r)})),o}}var Lt=$t((function(e,t,a){V(e,a)?e[a].push(t):e[a]=[t]})),Tt=$t((function(e,t,a){e[a]=t})),Xt=$t((function(e,t,a){V(e,a)?e[a]++:e[a]=1})),Bt=$t((function(e,t,a){e[a?0:1].push(t)}),!0),Nt=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function It(e,t,a){return t in a}var Dt=y((function(e,t){var a={},u=t[0];if(null==e)return a;X(u)?(t.length>1&&(u=Xe(u,t[1])),t=se(e)):(u=It,t=ut(t,!1,!1),e=Object(e));for(var n=0,o=t.length;n<o;n++){var r=t[n],s=e[r];u(s,r,e)&&(a[r]=s)}return a})),Rt=y((function(e,t){var a,u=t[0];return X(u)?(u=st(u),t.length>1&&(a=t[1])):(t=bt(ut(t,!1,!1),String),u=function(e,a){return!Mt(t,a)}),Dt(e,u,a)}));function Ft(e,t,a){return s.call(e,0,Math.max(0,e.length-(null==t||a?1:t)))}function Vt(e,t,a){return null==e||e.length<1?null==t||a?void 0:[]:null==t||a?e[0]:Ft(e,e.length-t)}function Wt(e,t,a){return s.call(e,null==t||a?1:t)}var Ut=y((function(e,t){return t=ut(t,!0,!0),jt(e,(function(e){return!Mt(t,e)}))})),Pt=y((function(e,t){return Ut(e,t)}));function Ct(e,t,a,u){j(t)||(u=a,a=t,t=!1),null!=a&&(a=Ie(a,u));for(var n=[],o=[],r=0,s=Z(e);r<s;r++){var l=e[r],i=a?a(l,r,e):l;t&&!a?(r&&o===i||n.push(l),o=i):a?Mt(o,i)||(o.push(i),n.push(l)):Mt(n,l)||n.push(l)}return n}var Kt=y((function(e){return Ct(ut(e,!0,!0))}));function Ht(e){for(var t=e&&Et(e,Z).length||0,a=Array(t),u=0;u<t;u++)a[u]=qt(e,u);return a}var Jt=y(Ht);function Gt(e,t){return e._chain?ue(t).chain():t}function Qt(e){return kt(ye(e),(function(t){var a=ue[t]=e[t];ue.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),Gt(this,a.apply(ue,e))}})),ue}kt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=u[e];ue.prototype[e]=function(){var a=this._wrapped;return null!=a&&(t.apply(a,arguments),"shift"!==e&&"splice"!==e||0!==a.length||delete a[0]),Gt(this,a)}})),kt(["concat","join","slice"],(function(e){var t=u[e];ue.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Gt(this,e)}}));var Yt=Qt({__proto__:null,VERSION:e,restArguments:y,isObject:w,isNull:function(e){return null===e},isUndefined:x,isBoolean:j,isElement:function(e){return!(!e||1!==e.nodeType)},isString:S,isNumber:M,isDate:A,isRegExp:q,isError:E,isSymbol:O,isArrayBuffer:$,isDataView:R,isArray:F,isFunction:X,isArguments:U,isFinite:function(e){return!O(e)&&_(e)&&!isNaN(parseFloat(e))},isNaN:P,isTypedArray:Y,isEmpty:function(e){if(null==e)return!0;var t=Z(e);return"number"==typeof t&&(F(e)||S(e)||U(e))?0===t:0===Z(te(e))},isMatch:ae,isEqual:function(e,t){return re(e,t)},isMap:de,isWeakMap:me,isSet:_e,isWeakSet:ge,keys:te,allKeys:se,values:ke,pairs:function(e){for(var t=te(e),a=t.length,u=Array(a),n=0;n<a;n++)u[n]=[t[n],e[t[n]]];return u},invert:be,functions:ye,methods:ye,extend:xe,extendOwn:je,assign:je,defaults:ze,create:function(e,t){var a=Se(e);return t&&je(a,t),a},clone:Me,tap:function(e,t){return t(e),e},get:Oe,has:function(e,t){for(var a=(t=qe(t)).length,u=0;u<a;u++){var n=t[u];if(!V(e,n))return!1;e=e[n]}return!!a},mapObject:function(e,t,a){t=Ie(t,a);for(var u=te(e),n=u.length,o={},r=0;r<n;r++){var s=u[r];o[s]=t(e[s],s,e)}return o},identity:$e,constant:C,noop:De,toPath:Ae,property:Te,propertyOf:function(e){return null==e?De:function(t){return Oe(e,t)}},matcher:Le,matches:Le,times:function(e,t,a){var u=Array(Math.max(0,e));t=Xe(t,a,1);for(var n=0;n<e;n++)u[n]=t(n);return u},random:Re,now:Fe,escape:Ue,unescape:Pe,templateSettings:Ce,template:function(e,t,a){!t&&a&&(t=a),t=ze({},t,ue.templateSettings);var u=RegExp([(t.escape||Ke).source,(t.interpolate||Ke).source,(t.evaluate||Ke).source].join("|")+"|$","g"),n=0,o="__p+='";e.replace(u,(function(t,a,u,r,s){return o+=e.slice(n,s).replace(Je,Ge),n=s+t.length,a?o+="'+\n((__t=("+a+"))==null?'':_.escape(__t))+\n'":u?o+="'+\n((__t=("+u+"))==null?'':__t)+\n'":r&&(o+="';\n"+r+"\n__p+='"),t})),o+="';\n";var r,s=t.variable;if(s){if(!Qe.test(s))throw new Error("variable is not a bare identifier: "+s)}else o="with(obj||{}){\n"+o+"}\n",s="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(s,"_",o)}catch(e){throw e.source=o,e}var l=function(e){return r.call(this,e,ue)};return l.source="function("+s+"){\n"+o+"}",l},result:function(e,t,a){var u=(t=qe(t)).length;if(!u)return X(a)?a.call(e):a;for(var n=0;n<u;n++){var o=null==e?void 0:e[t[n]];void 0===o&&(o=a,n=u),e=X(o)?o.call(e):o}return e},uniqueId:function(e){var t=++Ye+"";return e?e+t:t},chain:function(e){var t=ue(e);return t._chain=!0,t},iteratee:Ne,partial:et,bind:tt,bindAll:nt,memoize:function(e,t){var a=function(u){var n=a.cache,o=""+(t?t.apply(this,arguments):u);return V(n,o)||(n[o]=e.apply(this,arguments)),n[o]};return a.cache={},a},delay:ot,defer:rt,throttle:function(e,t,a){var u,n,o,r,s=0;a||(a={});var l=function(){s=!1===a.leading?0:Fe(),u=null,r=e.apply(n,o),u||(n=o=null)},i=function(){var i=Fe();s||!1!==a.leading||(s=i);var c=t-(i-s);return n=this,o=arguments,c<=0||c>t?(u&&(clearTimeout(u),u=null),s=i,r=e.apply(n,o),u||(n=o=null)):u||!1===a.trailing||(u=setTimeout(l,c)),r};return i.cancel=function(){clearTimeout(u),s=0,u=n=o=null},i},debounce:function(e,t,a){var u,n,o,r,s,l=function(){var i=Fe()-n;t>i?u=setTimeout(l,t-i):(u=null,a||(r=e.apply(s,o)),u||(o=s=null))},i=y((function(i){return s=this,o=i,n=Fe(),u||(u=setTimeout(l,t),a&&(r=e.apply(s,o))),r}));return i.cancel=function(){clearTimeout(u),u=o=s=null},i},wrap:function(e,t){return et(t,e)},negate:st,compose:function(){var e=arguments,t=e.length-1;return function(){for(var a=t,u=e[t].apply(this,arguments);a--;)u=e[a].call(this,u);return u}},after:function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},before:lt,once:it,findKey:ct,findIndex:pt,findLastIndex:ft,sortedIndex:ht,indexOf:mt,lastIndexOf:_t,find:gt,detect:gt,findWhere:function(e,t){return gt(e,Le(t))},each:kt,forEach:kt,map:bt,collect:bt,reduce:wt,foldl:wt,inject:wt,reduceRight:xt,foldr:xt,filter:jt,select:jt,reject:function(e,t,a){return jt(e,st(Ie(t)),a)},every:zt,all:zt,some:St,any:St,contains:Mt,includes:Mt,include:Mt,invoke:At,pluck:qt,where:function(e,t){return jt(e,Le(t))},max:Et,min:function(e,t,a){var u,n,o=1/0,r=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=at(e)?e:ke(e)).length;s<l;s++)null!=(u=e[s])&&u<o&&(o=u);else t=Ie(t,a),kt(e,(function(e,a,u){((n=t(e,a,u))<r||n===1/0&&o===1/0)&&(o=e,r=n)}));return o},shuffle:function(e){return Ot(e,1/0)},sample:Ot,sortBy:function(e,t,a){var u=0;return t=Ie(t,a),qt(bt(e,(function(e,a,n){return{value:e,index:u++,criteria:t(e,a,n)}})).sort((function(e,t){var a=e.criteria,u=t.criteria;if(a!==u){if(a>u||void 0===a)return 1;if(a<u||void 0===u)return-1}return e.index-t.index})),"value")},groupBy:Lt,indexBy:Tt,countBy:Xt,partition:Bt,toArray:function(e){return e?F(e)?s.call(e):S(e)?e.match(Nt):at(e)?bt(e,$e):ke(e):[]},size:function(e){return null==e?0:at(e)?e.length:te(e).length},pick:Dt,omit:Rt,first:Vt,head:Vt,take:Vt,initial:Ft,last:function(e,t,a){return null==e||e.length<1?null==t||a?void 0:[]:null==t||a?e[e.length-1]:Wt(e,Math.max(0,e.length-t))},rest:Wt,tail:Wt,drop:Wt,compact:function(e){return jt(e,Boolean)},flatten:function(e,t){return ut(e,t,!1)},without:Pt,uniq:Ct,unique:Ct,union:Kt,intersection:function(e){for(var t=[],a=arguments.length,u=0,n=Z(e);u<n;u++){var o=e[u];if(!Mt(t,o)){var r;for(r=1;r<a&&Mt(arguments[r],o);r++);r===a&&t.push(o)}}return t},difference:Ut,unzip:Ht,transpose:Ht,zip:Jt,object:function(e,t){for(var a={},u=0,n=Z(e);u<n;u++)t?a[e[u]]=t[u]:a[e[u][0]]=e[u][1];return a},range:function(e,t,a){null==t&&(t=e||0,e=0),a||(a=t<e?-1:1);for(var u=Math.max(Math.ceil((t-e)/a),0),n=Array(u),o=0;o<u;o++,e+=a)n[o]=e;return n},chunk:function(e,t){if(null==t||t<1)return[];for(var a=[],u=0,n=e.length;u<n;)a.push(s.call(e,u,u+=t));return a},mixin:Qt,default:ue});return Yt._=Yt,Yt}()}}]);