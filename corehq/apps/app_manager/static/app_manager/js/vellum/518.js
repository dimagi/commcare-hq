"use strict";(self.webpackChunkvellum=self.webpackChunkvellum||[]).push([[518],{4518:(a,e,t)=>{var s=t(561),u=t.n(s),o=t(4523),l=t(8324),v=t.n(l),i=t(7229),n=t.n(i);const c='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/2002/xforms" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n<value>debug\n\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought" />\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging" />\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests" />\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths" />\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure" />\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary" />\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance" />\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices" />\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices" />\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup" />\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death" />\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera" />\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft" />\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage" />\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind" />\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought" />\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging" />\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests" />\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths" />\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure" />\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary" />\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance" />\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices" />\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices" />\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup" />\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death" />\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera" />\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft" />\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage" />\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind" />\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought" />\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging" />\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests" />\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths" />\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure" />\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary" />\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance" />\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices" />\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices" />\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup" />\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death" />\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera" />\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft" />\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage" />\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind" />\nother: <output value="/data/save/shocks/other" vellum:value="#form/save/shocks/other" /></value>\n</h:html>',r='debug\n\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought"/>\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging"/>\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests"/>\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths"/>\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure"/>\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary"/>\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance"/>\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices"/>\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices"/>\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup"/>\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death"/>\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera"/>\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft"/>\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage"/>\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind"/>\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought"/>\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging"/>\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests"/>\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths"/>\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure"/>\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary"/>\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance"/>\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices"/>\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices"/>\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup"/>\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death"/>\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera"/>\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft"/>\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage"/>\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind"/>\ndrought: <output value="/data/save/shocks/drought" vellum:value="#form/save/shocks/drought"/>\nflood: <output value="/data/save/shocks/flood_water_logging" vellum:value="#form/save/shocks/flood_water_logging"/>\ncrop: <output value="/data/save/shocks/crop_disease_pests" vellum:value="#form/save/shocks/crop_disease_pests"/>\nlivestock: <output value="/data/save/shocks/livestock_disease_deaths" vellum:value="#form/save/shocks/livestock_disease_deaths"/>\nbusiness: <output value="/data/save/shocks/business_failure" vellum:value="#form/save/shocks/business_failure"/>\njob: <output value="/data/save/shocks/lost_job_no_salary" vellum:value="#form/save/shocks/lost_job_no_salary"/>\nassistance <output value="/data/save/shocks/end_assistance" vellum:value="#form/save/shocks/end_assistance"/>\ncrop prices <output value="/data/save/shocks/fall_crop_prices" vellum:value="#form/save/shocks/fall_crop_prices"/>\nfood prices <output value="/data/save/shocks/rise_food_prices" vellum:value="#form/save/shocks/rise_food_prices"/>\nhh breakup <output value="/data/save/shocks/hh_breakup" vellum:value="#form/save/shocks/hh_breakup"/>\nhh death <output value="/data/save/shocks/hh_death" vellum:value="#form/save/shocks/hh_death"/>\nillness <output value="/data/save/shocks/illness_cholera" vellum:value="#form/save/shocks/illness_cholera"/>\ntheft <output value="/data/save/shocks/theft" vellum:value="#form/save/shocks/theft"/>\nfire <output value="/data/save/shocks/fire_damage" vellum:value="#form/save/shocks/fire_damage"/>\nwind <output value="/data/save/shocks/strong_wind" vellum:value="#form/save/shocks/strong_wind"/>\nother: <output value="/data/save/shocks/other" vellum:value="#form/save/shocks/other"/>',h='edd:<output value="/data/edd" vellum:value="#form/edd"></output>\nvisit #:<output value="/data/calendario/visita_numero" vellum:value="#form/calendario/visita_numero"></output>\nclose to edd?: <output value="/data/calendario/visita_perto_do_edd" vellum:value="#form/calendario/visita_perto_do_edd"></output>\nfinal visit?: <output value="/data/calendario/e_visita_final" vellum:value="#form/calendario/e_visita_final"></output><output value="/data/calendario/atualiza_vp_datos/atualiza_vp9" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp9"></output>\n\nNew values:\nvp1:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp1" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp1"></output>\nvp2:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp2" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp2"></output>\nvp3:\nvp4:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp4" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp4"></output>\nvp5:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp5" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp5"></output>  \nvp6:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp6" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp6"></output>\nvp7:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp7" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp7"></output>\nvp8:<output value="/data/calendario/atualiza_vp_datos/atualiza_vp8" vellum:value="#form/calendario/atualiza_vp_datos/atualiza_vp8"></output>\nvp9:\n\nExisting data:\nvp1:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp1_data" vellum:value="#case/vp1_data"></output>\nvp2:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp2_data" vellum:value="#case/vp2_data"></output>\nvp3:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp3_data" vellum:value="#case/vp3_data"></output>  \nvp4:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp4_data" vellum:value="#case/vp4_data"></output>\nvp5:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp5_data" vellum:value="#case/vp5_data"></output>  \nvp6:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp6_data" vellum:value="#case/vp6_data"></output>\nvp7:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp7_data" vellum:value="#case/vp7_data"></output>\nvp8:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp8_data" vellum:value="#case/vp8_data"></output>\nvp9:<output value="instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/vp9_data" vellum:value="#case/vp9_data"></output>';var p=v().assert;describe("The XML normalizer",(function(){function a(a,e,t){var s=n().normalize(a);p.strictEqual(s,e),(o.Ay.isUndefined(t)||t)&&p.strictEqual(n().humanize(s),a)}it("should preserve empty string",(function(){a("","")})),it("should preserve space",(function(){a(" "," ")})),it("should preserve newline",(function(){a(" "," ")})),it("should preserve empty XML node",(function(){a("<output />","<output />")})),it("should escape & character",(function(){a("Mother & Child Reunion","Mother &amp; Child Reunion")})),it("should escape attribute value with < character",(function(){a('<output value="2 < 3" />','<output value="2 &lt; 3" />')})),it("should escape attribute value with > character",(function(){a('<output value="2 > 3" />','<output value="2 &gt; 3" />')})),it("should escape attribute value with <= character",(function(){a('<output value="2 <= 3" />','<output value="2 &lt;= 3" />')})),it("should escape attribute value with >= character",(function(){a('<output value="2 >= 3" />','<output value="2 &gt;= 3" />')})),it("should escape attribute value with < tight",(function(){a('<output value="2<3" />','<output value="2&lt;3" />',!1)})),it("should escape attribute value with > tight",(function(){a('<output value="2>3" />','<output value="2&gt;3" />',!1)})),it("should escape < character",(function(){a("your visit count must be < 5","your visit count must be &lt; 5")})),it("should escape > character",(function(){a("your visit count must be > 5","your visit count must be &gt; 5")})),it("should escape attribute value with > and trailing text (v1)",(function(){a('<output value="2 > 3" /> text','<output value="2 &gt; 3" /> text')})),it("should escape attribute value with > and trailing text (v2)",(function(){a("<output value='2 > 3' /> text",'<output value="2 &gt; 3" /> text',!1)})),it("should escape attribute value with > and trailing text (v3)",(function(){a('<output value="2 > 3"/>text','<output value="2 &gt; 3" />text',!1)})),it("should escape attribute value with > and trailing text (v4)",(function(){a('<output value="2 > 3"></output> text','<output value="2 &gt; 3" /> text',!1)})),it("should escape attribute value with > and trailing text (v5)",(function(){a('<out:p_3-6. h:v-1._="2 > 3" />text','<out:p_3-6. h:v-1._="2 &gt; 3" />text')})),it("should escape attribute value with < and trailing text",(function(){a('<output value="2 < 3" /> text','<output value="2 &lt; 3" /> text')})),it("should escape < character before tag",(function(){a('your visit count must be < <output value="/path" />','your visit count must be &lt; <output value="/path" />')})),it("should escape > character before tag",(function(){a('your visit count must be > <output value="/path" />','your visit count must be &gt; <output value="/path" />')})),it("should preserve attribute value with path",(function(){a('<output value="/path" />','<output value="/path" />')})),it("should preserve output node with text before",(function(){a('text <output value="/path" />','text <output value="/path" />')})),it("should preserve output node with text after",(function(){a('<output value="/path" /> text','<output value="/path" /> text')})),it("should preserve attribute without value",(function(){a("<output attr />",'<output attr="" />',!1)})),it("should preserve attribute value with path, unterminated tag",(function(){a('<output value="/path">','<output value="/path" />',!1)})),it("should preserve newline",(function(){a("line 1\nline2","line 1\nline2")})),it("should preserve attribute with unquoted value",(function(){a("<output attr=value />",'<output attr="value" />',!1)})),it("should escape unquoted attribute value with <",(function(){a("<output value=2<3 />",'<output value="2&lt;3" />',!1)})),it("should fail on escape attribute value with />",(function(){v().expect((function(){a('<output value="../>.." />','<output value="..&gt;.." />',!1)})).to.throw(Error)})),it("should accept jquery node",(function(){a(u()("<value><output /></value>"),"<output />",!1)})),it("should handle malformed tag",(function(){a('<output value="/path"',"",!1)})),it("should replace &nbsp; with space",(function(){a("a &nbsp; b","a   b",!1)})),it("should not cause regexp engine to hang on many output values in jquery object",(function(){a(n().parseXML(c).find("value"),r,!1)})),it("should not cause regexp engine to hang on many output values in string",(function(){var e=n().parseXML(c);a((new XMLSerializer).serializeToString(e.find("value")[0]).replace(/(value="[^"]+)"/g,'$1 > 2"').replace(/^<([\w:.-]+)(?:\s+[\w:.-]+=(["'])[^]*?\2)*\s*(?:\/>|>([^]*)<\/\1>)$/g,"$3"),r.replace(/(value="[^"]+)"/g,'$1 &gt; 2"').replace(/"\/>/g,'" />'),!1)})),it("should not cause regexp engine to hang on many output values in string #2",(function(){a(h,h.replace(/><\/output>/g," />"),!1)}))})),describe("The XML humanizer",(function(){function a(a,e,t){var s=n().humanize(a);p.strictEqual(s,e),t&&p.strictEqual(n().normalize(s),a)}it("should convert free < character",(function(){a("2 &lt; 3","2 < 3",!0)})),it("should convert free > character",(function(){a("2 &gt; 3","2 > 3",!0)})),it("should convert free & character",(function(){a("2 &amp; 3","2 & 3",!0)})),it("should not convert escaped tag",(function(){a(" &lt;div&gt; "," &lt;div&gt; ",!0)})),it("should convert output tag",(function(){a('<output value="1 &amp; 2 &lt; 3" />','<output value="1 & 2 < 3" />',!0)})),it("should not unescape '&amp;' when part of a double escaped character",(function(){a("&amp;amp;","&amp;amp;",!0)})),it("should not convert escaped tag with attribute",(function(){a('&lt;div class="injection"&gt;','&lt;div class="injection"&gt;',!0)})),it("should convert empty tag",(function(){a('<tag attr="value"></tag>','<tag attr="value" />')})),it("should convert child nodes",(function(){a(u()("<value>1 &amp; 2 &lt; 3 <output value='/path' /></value>"),'1 & 2 < 3 <output value="/path" />')})),it("should convert child output node",(function(){a(u()("<value><output value='1 &amp; 2 &lt; 3' /></value>"),'<output value="1 & 2 < 3" />')})),it("should convert empty child nodes",(function(){a(u()("<value />"),"")})),it("should space child node",(function(){a(u()("<value> </value>")," ")})),it("should newline child node",(function(){a(u()("<value>\n</value>"),"\n")})),it("should not cause regexp engine to hang on many output values",(function(){a(n().parseXML(c).find("value"),r,!1)})),it("should not wrap trailing text in output refs",(function(){a(u()("<value>&amp; <output value='/path' /> text-after *should* remain. ~&amp; not #disrupt the\nflow</value>"),'& <output value="/path" /> text-after *should* remain. ~& not #disrupt the\nflow')}))})),describe("The XML query",(function(){var a=p.strictEqual;it("should round-trip XML",(function(){a(n().query("<value>\n</value>").toString(),"<value>\n</value>")})),it("should round-trip XML fragment with leading text",(function(){a(n().query("def <value>abc</value>").toString(),"def <value>abc</value>")})),it("should round-trip XML fragment with trailing text",(function(){a(n().query("<value>abc</value> def").toString(),"<value>abc</value> def")})),it("should escape invalid XML",(function(){a(n().query("<h1>a > & < b</h1>").toString(),"<h1>a &gt; &amp; &lt; b</h1>")})),it("should round-trip empty string",(function(){a(n().query("").toString(),"")})),it("should round-trip newline",(function(){a(n().query("\n").toString(),"\n")})),it("should not insert text inside output refs",(function(){a(n().query('& <output value="/data/question1" vellum:value="#form/question1"> text-after *should* remain. ~& not #disrupt the\nflow</output>').toString(),'&amp; <output value="/data/question1" vellum:value="#form/question1" /> text-after *should* remain. ~&amp; not #disrupt the\nflow')}))}))}}]);