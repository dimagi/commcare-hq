"use strict";(self.webpackChunkvellum=self.webpackChunkvellum||[]).push([[437],{4437:(e,t,a)=>{var n=a(8324),s=a.n(n),o=a(561),r=a.n(o),i=a(4523),d=a(1134),c=a(4854),l=a(7867);const u='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/BDBF500D-13AD-40F0-90B5-EE65A56F92E5" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<question1 />\n\t\t\t\t\t<question2 />\n\t\t\t\t\t<question3 />\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/question1" nodeset="/data/question1" type="xsd:string" />\n\t\t\t<bind vellum:nodeset="#form/question2" nodeset="/data/question2" type="xsd:string" vellum:relevant="#form/question1 = #case/dob" relevant="/data/question1 = instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/dob" />\n\t\t\t<bind vellum:nodeset="#form/question3" nodeset="/data/question3" type="xsd:string" vellum:relevant="#form/question2 = #form/question1" relevant="/data/question2 = /data/question1" />\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t\t<text id="question1-label">\n\t\t\t\t\t\t<value>question1</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question2-label">\n\t\t\t\t\t\t<value>question2</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question3-label">\n\t\t\t\t\t\t<value>question3</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t\t<translation lang="hin">\n\t\t\t\t\t<text id="question1-label">\n\t\t\t\t\t\t<value>question1</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question2-label">\n\t\t\t\t\t\t<value>question2</value>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text id="question3-label">\n\t\t\t\t\t\t<value>question3</value>\n\t\t\t\t\t</text>\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body>\n\t\t<input vellum:ref="#form/question1" ref="/data/question1">\n\t\t\t<label ref="jr:itext(\'question1-label\')" />\n\t\t</input>\n\t\t<input vellum:ref="#form/question2" ref="/data/question2">\n\t\t\t<label ref="jr:itext(\'question2-label\')" />\n\t\t</input>\n\t\t<input vellum:ref="#form/question3" ref="/data/question3">\n\t\t\t<label ref="jr:itext(\'question3-label\')" />\n\t\t</input>\n\t</h:body>\n</h:html>\n';var f=a(3092),h=s().assert,m=d.A.call;function p(e){return e.toXPath()}describe("The logic manager",(function(){before((function(e){d.A.init({core:{onReady:function(){e()}},features:{rich_text:!0}})})),it("should update expressions when a question ID changes",(function(){d.A.loadXML(u),d.A.getMug("question1").p.nodeID="question";var e=d.A.getMug("/data/question2");h.equal(e.p.relevantAttr,"#form/question = #case/dob")})),it("should display error for invalid xpath expression",(function(){d.A.loadXML(f);var e=d.A.getMug("/data/mug");e.p.calculateAttr="#invalid/xpath dob`#case/dob`",h(!d.A.isTreeNodeValid(e),"mug should not be valid")})),it("should not display invalid xpath error for hashtag filter expression",(function(){d.A.loadXML('<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/1F4E4E8D-1C50-45D7-82DB-EFCD982B0046" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<calc />\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<bind vellum:nodeset="#form/calc" nodeset="/data/calc" vellum:calculate="#invalid/xpath count( `#case/dob` [1=1])" calculate="count( instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/dob [1=1])" />\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="" />\n\t\t\t</itext>\n\t\t</model>\n\t</h:head>\n\t<h:body />\n</h:html>\n');var e=d.A.getMug("/data/calc");h(d.A.isTreeNodeValid(e),"calc xpath should be valid")})),it("should not update expressions for model iteration",(function(){d.A.loadXML("");var e=d.A.addQuestion("Repeat","product");e.p.dataSource={instance:{id:"products",src:"jr://fixture/commtrack:products"},idsQuery:"instance('products')/products/product/@id"},m("createXML"),h(d.A.isTreeNodeValid(e),"repeat should be valid")})),describe("without rich text",(function(){before((function(e){d.A.init({core:{onReady:function(){e()}},features:{rich_text:!1}})})),it("should remove references for labels after removal",(function(){var e,t=d.A.loadXML("")._logicManager;d.A.addQuestion("Text","mug"),e=d.A.addQuestion("Text","text"),r()("[name=itext-en-label]").val('<output value="/data/mug" />').change(),h.equal(t.forward[e.ufid].labelItext.length,1),d.A.deleteQuestion("/data/text"),h.deepEqual(t.forward[e.ufid],{})}))})),describe("should add validation error for",(function(){var e=["relevantAttr","calculateAttr","constraintAttr","dataParent","repeat_count","filter","defaultValue","requiredCondition"],t=["constraintAttr"],a=i.Ay.difference(e,t),n={repeat_count:"repeat",filter:"select/itemset"};function s(e,t,a){var s=d.A.getMug(n[e]||"text");h(d.A.isTreeNodeValid(s),"precondition failed:\n"+d.A.getMessages(s)),h.deepEqual(s.messages.get(e),[],"pre-check: mug has messages"),s.p[e]=t;try{a?(h(!d.A.isTreeNodeValid(s),"mug should not be valid"),h(s.messages.get(e).length,e+" should have messages")):(h(d.A.isTreeNodeValid(s),"mug should be valid"),h(0===s.messages.get(e).length,e+" should not have messages"))}finally{s.p[e]=""}h(d.A.isTreeNodeValid(s),"postcondition failed:\n"+d.A.getMessages(s)),h.deepEqual(s.messages.get(e),[],"post-check: mug has messages")}before((function(){d.A.loadXML(""),d.A.addQuestion("Text","text"),d.A.addQuestion("SelectDynamic","select"),d.A.addQuestion("Repeat","repeat")})),i.Ay.each(e,(function(e){it("invalid path in "+e,(function(){s(e,"/data/unknown",!0)}))})),i.Ay.each(a,(function(e){it("self referencing path in "+e,(function(){s(e,".",!0)}))})),i.Ay.each(t,(function(e){it("self referencing path in "+e,(function(){s(e,".",!1)}))}))})),describe("should not add validation error for",(function(){i.Ay.each(["meta/deviceID","meta/instanceID","meta/username","meta/userID","meta/timeStart","meta/timeEnd","meta/location"],(function(e){it(e,(function(){d.A.loadXML("");var t=d.A.addQuestion("Text","text");t.p.calculateAttr="/data/"+e,h(d.A.isTreeNodeValid(t),d.A.getMessages(t))}))}))})),describe("sends case references to HQ",(function(){before((function(e){d.A.init({core:{onReady:function(){e()}}})})),it("should be the correct format",(function(){var e=d.A.loadXML(f)._logicManager;h.deepEqual(e.caseReferences(),{load:{"/data/mug":["#case/parent/edd"]},save:{}})})),it("should not send deleted references",(function(){var e=d.A.loadXML(f)._logicManager;d.A.deleteQuestion("/data/mug"),h.deepEqual(e.caseReferences(),{load:{},save:{}})})),it("should not write unknown case properties to xml",(function(){var e=d.A.loadXML("")._logicManager;d.A.addQuestion("Text","text").p.defaultValue="#case/not-here",h.deepEqual(e.knownExternalReferences(),{})})),it("should send parent path for choice",(function(){var e=d.A.loadXML("")._logicManager;d.A.paste([["id","type","labelItext:en-default"],["/select","Select","select"],["/select/choice","Choice",'<output value="#case/dob" />']]),h.deepEqual(e.caseReferences(),{load:{"/data/select":["#case/dob"]},save:{}})})),it("should send all properties referenced by a question",(function(){var e=d.A.loadXML("")._logicManager;d.A.paste([["id","type","labelItext:en-default"],["/select","Select",'<output value="#case/name" />'],["/select/choice","Choice",'<output value="#case/dob" />'],["/select/other","Choice",'<output value="#user/role" />']]),h.deepEqual(e.caseReferences(),{load:{"/data/select":["#case/name","#case/dob","#user/role"]},save:{}})}))})),describe("findUsages",(function(){var e,t={"#form/question1":{"#form/question2":"Display Condition","#form/question3":"Display Condition"},"#form/question2":{"#form/question3":"Display Condition"}};before((function(t){e=d.A.loadXML(u),t()})),it("should return dictionary of usages",(function(){h.deepEqual(e.findUsages(),t)})),it("should return dictionary of usages when filtered by path",(function(){var a="#form/question1",n="#form/question2";h.deepEqual(e.findUsages(a),{"#form/question1":t[a]}),h.deepEqual(e.findUsages(n),{"#form/question2":t[n]})})),it("should return empty dictionary when question not referenced",(function(){h.deepEqual(e.findUsages("#form/question3"),{})})),it("should not error after deleting reference",(function(){var t=d.A.addQuestion("Text","mug"),a=d.A.getMug("question3");a.p.relevantAttr="#form/mug",e.removeMugsFromForm([t]),a.p.relevantAttr="",h.deepEqual(e.findUsages("#form/question3"),{})}))})),describe("hasBrokenReferences",(function(){var e;beforeEach((function(){e=d.A.loadXML()})),it("should return false for empty form",(function(){h.isNotOk(e.hasBrokenReferences())})),it("should return true for form with broken reference",(function(){d.A.addQuestion("Text","text",{relevantAttr:"/data/unknown"}),h.isOk(e.hasBrokenReferences())})),it("should return false after broken reference is fixed",(function(){d.A.addQuestion("Text","text",{relevantAttr:"/data/other"}),h.isOk(e.hasBrokenReferences(),"should have broken"),d.A.addQuestion("Text","other",{relevantAttr:"/data/other"}),h.isNotOk(e.hasBrokenReferences())}))}))})),describe("Logic expression",(function(){i.Ay.each([["instance('casedb')/cases/case/property",["instance('casedb')/cases/case/property"],["instance('casedb')/cases/case/property"]],["instance('casedb')/cases/case/property[@case_id = /data/caseid]",["instance('casedb')/cases/case/property[@case_id = /data/caseid]","@case_id","/data/caseid"],["instance('casedb')/cases/case/property[@case_id = /data/caseid]"]],["instance('casedb')/cases/case/property[@case_id = /data/caseid] = /data/other_caseid",["instance('casedb')/cases/case/property[@case_id = /data/caseid]","@case_id","/data/caseid","/data/other_caseid"],["instance('casedb')/cases/case/property[@case_id = /data/caseid]","/data/other_caseid"]],["instance('casedb')/cases/case[@case_id = instance('casedb')/cases/case[@case_id = instance('commcaresession')/session/data/case_id]/index/parent]/edd = /data/other_caseid",["instance('casedb')/cases/case[@case_id = instance('casedb')/cases/case[@case_id = instance('commcaresession')/session/data/case_id]/index/parent]/edd","@case_id","instance('casedb')/cases/case[@case_id = instance('commcaresession')/session/data/case_id]/index/parent","instance('commcaresession')/session/data/case_id","/data/other_caseid"],["instance('casedb')/cases/case[@case_id = instance('casedb')/cases/case[@case_id = instance('commcaresession')/session/data/case_id]/index/parent]/edd","/data/other_caseid"]],["selected(instance('casedb')/cases/case/property[@case_id = /data/caseid])",["instance('casedb')/cases/case/property[@case_id = /data/caseid]","@case_id","/data/caseid"],["instance('casedb')/cases/case/property[@case_id = /data/caseid]"]],["(instance('casedb')/cases/case/property[@case_id = /data/caseid] = /data/other_caseid) and (/other/thing = /this/thing)",["instance('casedb')/cases/case/property[@case_id = /data/caseid]","@case_id","/data/caseid","/data/other_caseid","/other/thing","/this/thing"],["instance('casedb')/cases/case/property[@case_id = /data/caseid]","/data/other_caseid","/other/thing","/this/thing"]],["/data/text1 = /data/text2",["/data/text1","/data/text2"],["/data/text1","/data/text2"]]],(function(e){var t=new c.A.LogicExpression(e[0],l.A.createParser(l.A.makeXPathModels()));it("should return all paths: "+e[0],(function(){var a=i.Ay.map(t.getPaths(),p);h.deepEqual(i.Ay.difference(a,e[1]),[]),h.deepEqual(i.Ay.difference(e[1],a),[])})),it("should return top level paths: "+e[0],(function(){var a=i.Ay.map(t.getTopLevelPaths(),p);h.deepEqual(i.Ay.difference(a,e[2]),[]),h.deepEqual(i.Ay.difference(e[2],a),[])}))})),describe("hashtags",(function(){function e(e){return e.toHashtag()}var t={"#form/text1":"/data/text1","#form/text2":"/data/text2"},a={hashtagMap:t,invertedHashtagMap:i.Ay.invert(t),hashtagNamespaces:{form:!0}},n=l.A.createParser(l.A.makeXPathModels(a));function s(t,a){var n=i.Ay.map(t.getHashtags(),e);h.includeMembers(n,a.hashtags)}i.Ay.each([{path:"#form/text1 = #form/text2",hashtags:["#form/text1","#form/text2"],xpath:"/data/text1 = /data/text2"},{path:"/data/not/in/form[#form/text1] = #form/text2",hashtags:["#form/text1","#form/text2"],xpath:"/data/not/in/form[/data/text1] = /data/text2"},{path:"/data/not/in/form[#form/text1 = /data/also/not/in/form[#form/text2]] = #form/text2",hashtags:["#form/text1","#form/text2"],xpath:"/data/not/in/form[/data/text1 = /data/also/not/in/form[/data/text2]] = /data/text2"}],(function(e){var t=new c.A.LogicExpression(e.path,n);it("should return all hashtags: "+e.path,(function(){s(t,e)})),it("should translate "+e.path+" to "+e.xpath,(function(){h.strictEqual(t.parsed.toXPath(),e.xpath)}))})),i.Ay.each([{path:"#wtf/mate",hashtags:[]},{path:"#wtf/mate[filter=filter]",hashtags:[]}],(function(e){var t=new c.A.LogicExpression(e.path,n);it("should return all hashtags: "+e.path,(function(){s(t,e)})),it("should not be able to translate "+e.path,(function(){t.error||h.throws(t.parsed.toXPath,/translate the hashtag/)}))}))}))}))},1134:(e,t,a)=>{a.d(t,{A:()=>E});var n=a(8449),s=a(8324),o=a.n(s),r=a(6848),i=a.n(r),d=a(3794),c=a(4523),l=a(561),u=a.n(l),f=a(1437),h=a(3809),m=a(705),p=a(7229),g=(a(1460),a(9747),o().assert),v=["Form Builder clip","version 1"];function x(e,t,a){if((a=c.Ay.defaults(a||{},{normalize_xmlns:!1,not:!1})).normalize_xmlns){var n=p.A.parseXML(t).find("data").attr("xmlns");e=e.replace(/(data[^>]+xmlns=")(.+?)"/,"$1"+n+'"')}var s,o,r,d,l=(s=e,o=t,r=i().xml(s),d=i().xml(o),i().isEquivalent(r,d,{element_order:!0}));a.not&&(l=!l),l||A(e=b(e),t=b(t),"XML "+(a.not?"should not be equivalent":"mismatch"))}function A(e,t,a){if(e!==t){var n=(0,d.createPatch)("",e,t,"actual","expected");n=n.replace(/^Index:/,a||"Not equal:"),g(!1,function(e){var t={"-":31,"+":32};return e.replace(/^.+?$/gm,(function(e){return"["+(t[e[0]]||0)+"m"+e+"[0m"}))}(n))}}function b(e){return(e=e.replace(/^\t+/gm,(function(e){return e.replace(/\t/g,"  ")}))).match(/\n$/)||(e+="\n"),e}function q(e){return w("getCurrentMugInput",e)}function y(e){var t=u()("#vellum").vellum("get"),a=c.Ay.isString(e)?u()("[name="+e+"]"):e;return m.A.util.getWidget(a,t)}function w(){var e=Array.prototype.slice.call(arguments),t=u()("#vellum");return t.vellum.apply(t,e)}function _(){var e=[],t=c.Ay.map(arguments,(function(t){var a=c.Ay.isString(t)?M(t):t;if(!a||!a.ufid)throw new Error("mug not found: "+t);return e.push(a),a.ufid}));return w("jstree","deselect_all",!0),w("jstree","select_node",t),u()(".collapse-toggle.collapsed").click(),e}function M(e){0!==e.indexOf("/")&&(e="/data/"+e);var t=w("getMugByPath",e);if(!t){var a=e.split("/"),n=w("getMugByPath",a.slice(0,-1).join("/"));if(n&&n.__className.indexOf("Select")>-1){var s=w("getData").core.form.getChildren(n),o=a[a.length-1];if(1===s.length&&"itemset"===o&&"itemset"===s[0].options.tagName)return s[0];for(var r=0;r<s.length;r++)if(s[r].p.nodeID===o)return s[r]}}return t}g.equal=g.strictEqual,g.notEqual=g.notStrictEqual;const E={options:n.A,asyncatch:function(e){return function(){try{var t=Array.prototype.slice.call(arguments);return e.apply(this,t)}catch(e){throw e&&e.stack?new Error(e.stack):e}}},init:function(e){e=e||{};var t=u().extend(!0,{},n.A.options,e),a=u().fn.animate;u().fn.animate=function(e,t,n,s){a.apply(this,[e,0,n,s])},e.javaRosa&&e.javaRosa.langs&&(t.javaRosa.langs=e.javaRosa.langs),t.plugins=c.Ay.without(t.plugins,"atwho"),e.plugins&&(t.plugins=e.plugins),t&&t.features&&c.Ay.isUndefined(t.features.disable_popovers)&&(t.features.disable_popovers=!0),t.core=t.core||{};var s=t.core.saveUrl||function(){};t.core.saveUrl=function(e){return e.xform,s(e)};var o=u()("#vellum"),r=o.vellum("get");r&&(r.destroy(),u()("body > div.modal, body > div.modal-backdrop").remove()),o.empty().vellum(t)},call:w,loadXML:function(e,t,a,n,s=!0){var o=[],r=w("getData");return n||window.history.replaceState(null,null," "),r.core.parseWarnings=[],w("loadXML",e,t||{},{reset:s}),a?c.Ay.isRegExp(a)&&(o=c.Ay.filter(r.core.parseWarnings,(function(e){return!a.test(e)}))):o=r.core.parseWarnings,g(!o.length,"unexpected parse warnings:\n- "+o.join("\n- ")),delete r.core.parseWarnings,r.core.form},saveAndReload:function(e){w("loadXFormOrError",w("createXML"),e)},getMug:M,getInput:q,getWidget:y,getMediaUploader:function(e){var t,a={},n=y(e);if(!n)throw new Error("media uploader widget not found");if(c.Ay.find([".widget[data-hqmediapath]",".itext-block-container"],(function(a){return(t=e.closest(a)).length})),!t)throw new Error("media uploader element not found");return a.upload=function(e){var a={ref:{path:n.getRandomizedMediaPath(e)},errors:[]};t.trigger("mediaUploadComplete",a)},a},assertEqual:A,assertInputCount:function(e,t,a){c.Ay.isString(e)?(a=" for "+(a?a+" ":"")+e,e=q(e)):a=a?" for "+a:"",g.equal(e.length,t,"wrong number of inputs"+a)},assertXmlEqual:x,assertXmlNotEqual:function(e,t,a){(a=a||{}).not=!0,x(e,t,a)},assertJSTreeState:function(){var e=Array.prototype.slice.call(arguments).join("\n")+"\n";A(function e(t,a){var n,s,o,r=[];for("#"===t.id?a=-1:r.push(Array(2*a+1).join(" ")+t.text),n=0,s=t.children.length;n<s;n++)o=w("jstree","get_node",t.children[n]),r.push(e(o,a+1));return r.join("\n")}(w("jstree","get_node","#"))+"\n",e,"Unexpected jstree state")},assertTreeState:function(e){var t=Array.prototype.slice.call(arguments,1).join("\n")+"\n";A(function e(t,a){var n,s,o,r=[];for(t.isRootNode?a=-1:r.push(Array(2*a+1).join(" ")+t.value.p.nodeID),n=0,s=t.children.length;n<s;n++)o=t.children[n],r.push(e(o,a+1));return r.join("\n")}(e.rootNode,0)+"\n",t,"Unexpected tree state")},addQuestion:function(e,t,a){a=c.Ay.extend({},a),this.prevId&&_(this.prevId);var n=w("addQuestion",e);return t||n.p.nodeID||(t=w("nodeIDFromLabel",n)),t&&(g(c.Ay.isUndefined(a.nodeID),"unexpected attribute for "+e+"["+t+"]"),n.p.labelItext&&n.p.labelItext.set(n.getLabelValue()),n.p.nodeID=t,"Choice"!==e||a.hasOwnProperty("labelItext")||(a.labelItext=t)),c.Ay.each(a,(function(e,t){c.Ay.isBoolean(e)||(e=String(e)),/.+Itext/.test(t)?n.p[t].set(e):n.p[t]=e})),c.Ay.each(w("getSections",n),(function(e){w("collapseSection",e.slug,!1)})),n},paste:function(e,t,a){c.Ay.isString(e)||(e=h.A.tabDelimit([v].concat(e))),a&&window.console.log(e),g.deepEqual(f.A.paste(e),t||[])},clickQuestion:_,selectAll:function(){w("jstree","select_all")},deleteQuestion:function(){var e=c.Ay.map(arguments,(function(e){var t=M(e);return g(t,"mug not found: "+e),t}));w("getData").core.form.removeMugsFromForm(e),c.Ay.each(arguments,(function(e){g(!M(e),"mug not removed: "+e)}))},saveButtonEnabled:function(e){var t=w("getData").core.saveButton;if(!c.Ay.isUndefined(e)){var a=e?"save":"saved";t.setStateWhenReady(a),g.equal(t.state,a,"sanity check failed")}return"save"===t.state},expandGroup:function(e){w("jstree","open_node",e.ufid),w("jstree","redraw_node",e.ufid,!0,!1,!1)},collapseGroup:function(e){w("jstree","close_node",e.ufid),w("jstree","redraw_node",e.ufid,!0,!1,!1)},getMessages:function(e){var t=[],a=null;if(c.Ay.isString(e)){var n=e;e=M(n),g(e,"mug not found: "+n)}return e.messages.each((function(e,n){n!==a&&(t.push(n+":"),a=n),t.push("  - "+e.message)})),t.join("\n")},findNode:function(e,t,a){if(c.Ay.isString(t)){var n=t;t=function(e){return e.text===n}}return function a(n){var s,o,r;if(t(n))return n;for(s=0,o=n.children.length;s<o;s++)if(r=a(e.get_node(n.children[s])))return r;return null}(a||e.get_node("#"))},isTreeNodeValid:function(e){if(c.Ay.isString(e)){var t=e;e=M(t),g(e,"mug not found: "+t)}return 0===u()("#vellum").find("#"+e.ufid+" > a").children(".fd-valid-alert-icon").length},markdownVisible:function(){return u()(".itext-block-label-group-default").find(".markdown-output").is(":visible")},parseXML:p.A.parseXML}},3092:e=>{e.exports='<?xml version="1.0" encoding="UTF-8" ?>\n<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:orx="http://openrosa.org/jr/xforms" xmlns="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:vellum="http://commcarehq.org/xforms/vellum">\n\t<h:head>\n\t\t<h:title>Untitled Form</h:title>\n\t\t<model>\n\t\t\t<instance>\n\t\t\t\t<data xmlns:jrm="http://dev.commcarehq.org/jr/xforms" xmlns="http://openrosa.org/formdesigner/DC38FCC5-930C-4385-AE6C-5B15ED1F95B1" uiVersion="1" version="1" name="Untitled Form">\n\t\t\t\t\t<mug />\n\t\t\t\t</data>\n\t\t\t</instance>\n\t\t\t<instance src="jr://instance/casedb" id="casedb" />\n\t\t\t<instance id="commcaresession" src="jr://instance/session" />\n\t\t\t<bind vellum:nodeset="#form/mug" nodeset="/data/mug" vellum:calculate="#case/parent/edd" calculate="instance(\'casedb\')/cases/case[@case_id = instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/index/parent]/edd" />\n\t\t\t<itext>\n\t\t\t\t<translation lang="en" default="">\n\t\t\t\t</translation>\n\t\t\t</itext>\n\t\t</model>\n\t\t<vellum:hashtags>\n\t\t\t{&quot;#case/parent/edd&quot;:null}\n\t\t</vellum:hashtags>\n\t\t<vellum:hashtagTransforms>{&quot;prefixes&quot;:{&quot;#case/parent/&quot;:&quot;instance(\'casedb\')/cases/case[@case_id = instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/index/parent]/&quot;,&quot;#case/&quot;:&quot;instance(\'casedb\')/cases/case[@case_id = instance(\'commcaresession\')/session/data/case_id]/&quot;}}</vellum:hashtagTransforms>\n\t</h:head>\n\t<h:body>\n\t</h:body>\n</h:html>\n'}}]);