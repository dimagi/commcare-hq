{% extends "hqadmin/hqadmin_base_report.html" %}
{% block head %}{{ block.super }}
    <style>
        .datatable {
            width: 100%;
        }
    </style>{% endblock %}
{% block report-title %}Number of Active Users by Domain{% endblock %}

{% block reportcontent %}
            <table class="datatable">
            <thead>
                <tr>
                    <th>Domain</th>
                    {% for landmark in landmarks %}
                        <th>Last {{ landmark }} Days</th>
                    {% endfor %}
                    <th>All Users</th>
                </tr>
            </thead>
            <tbody>
            {% for domain in domains %}
                {% if domain.users %}
                    <tr>
                        <td><a href="{% url default_report domain.name %}">{{ domain.name }}</a></td>
                        {% for users in domain.user_sets %}
                            <td title="{% for _, user in users.items %}{{ user.raw_username }} {% endfor %}">{{ users|length }}</td>
                        {% endfor %}
                        <td title="{% for _, user in domain.users.items %}{{ user.raw_username }} {% endfor %}">{{ domain.users|length }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
            </tbody>
            </table>
{% endblock %}