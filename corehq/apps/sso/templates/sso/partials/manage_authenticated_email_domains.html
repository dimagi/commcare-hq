{% load i18n %}

{# requires sso/js/edit_identity_provider #}

<div id="email-domain-manager"
     class="ko-template">
  <div class="card card-modern-gray card-form-only mb-3">
    <div class="card-body">
      <fieldset>
        <legend>{% trans "Authenticated Email Domains" %}</legend>
        <p>
          {% blocktrans %}
            Users with email addresses ending in these domain names must
            log in with SSO if the Identity Provider is active.
          {% endblocktrans %}
        </p>
        <p data-bind="if: showNoObjectsMessage">
          {% blocktrans %}
            There are no email domains associated with this identity provider.
            Please add one below.
          {% endblocktrans %}
        </p>
        <ul data-bind="foreach: linkedObjects">
          <li>
            @ <strong class="pe-2" data-bind="text: $data"></strong>
            (<button type="button"
                     class="btn btn-link"
                     data-bind="click: $parent.removeObject">remove</button>)
          </li>
        </ul>
        <p class="text-danger"
           data-bind="text: asyncHandlerError,
                      visible: asyncHandlerError"></p>
      </fieldset>
    </div>
  </div>

  <div class="card card-modern-gray card-form-only">
    <div class="card-body row align-items-center">
      <div class="col-2">
        <div class="input-group">
          <div class="input-group-text">@</div>
          <input data-bind="textInput: newObject"
                 type="text"
                 class="form-control" />
        </div>
      </div>
      <button type="button"
              data-bind="click: addObject,
                         enable: isNewObjectValid(),
                         "
              class="btn btn-primary col-auto">
        {% trans "Add Email Domain" %}
      </button>
      <span class="text-danger col-auto"
            data-bind="text: addObjectError,
                       visible: addObjectError"></span>
    </div>
  </div>
</div>
