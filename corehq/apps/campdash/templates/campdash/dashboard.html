{% extends 'hqwebapp/bootstrap3/base_navigation.html' %}
{% load compress %}
{% load hq_shared_tags %}
{% load i18n %}

{% block title %}{% trans "Campaign Dashboard" %}{% endblock %}

{% block js %}
  {{ block.super }}
  <!-- HTMX and Alpine.js -->
  <script src="https://unpkg.com/htmx.org@1.9.6"></script>
  <script
    defer
    src="https://unpkg.com/alpinejs@3.13.0/dist/cdn.min.js"
  ></script>
  <script src="{% static 'jquery/dist/jquery.min.js' %}"></script>
{% endblock %}

{% block content %}
  {% initial_page_data 'mapbox_access_token' mapbox_access_token %}


  <div class="container-fluid" id="campaign-dashboard">
    <div class="row mb-4">
      <div class="col-12">
        <h1 class="mb-3 mt-4">{% trans "Campaign Dashboard" %}</h1>
      </div>
    </div>

    <!-- Gauges Section -->
    <div class="row mb-4">
      <div class="col-12"></div>
    </div>

    <!-- Report and Map Section -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="d-flex justify-content-between mb-3">
          <h3>{% trans "Reports & Maps" %}</h3>
          <div>
            <button
              class="btn btn-primary"
              hx-get='{% url "campaign_map_report" request.domain "46b6f9a56a3d41bf7d2e4bac320031a4" %}'
              hx-target="#map-reports-container"
              hx-swap="beforeend"
              hx-trigger="click"
              hx-indicator="#loading-indicator"
            >
              <i class="fa fa-map-marker me-1"></i> {% trans "Add Map Report" %}
            </button>

          </div>
        </div>
        
        <div id="loading-indicator" class="htmx-indicator">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
        
        <!-- Container for map reports -->
        <div id="map-reports-container" >
          <div id="map-container" style="height: 500px"></div>
          <!-- Map reports will be loaded here -->
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
