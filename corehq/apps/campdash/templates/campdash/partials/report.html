{% load i18n %}

<div x-data="{ report: initialPageData.get('report') }">
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <template x-for="(header, index) in report.headers" :key="index">
            <th x-text="header"></th>
          </template>
        </tr>
      </thead>
      <tbody>
        <template x-for="(row, rowIndex) in report.rows" :key="rowIndex">
          <tr>
            <template x-for="(cell, cellIndex) in row" :key="cellIndex">
              <td x-text="cell"></td>
            </template>
          </tr>
        </template>
      </tbody>
    </table>
  </div>
  
  <div class="mt-3 text-center" x-show="report.rows.length === 0">
    <p class="text-muted">{% trans "No data available" %}</p>
  </div>
  
  <div class="mt-3 d-flex justify-content-between align-items-center">
    <div>
      <span class="text-muted">{% trans "Total rows:" %} <span x-text="report.rows.length"></span></span>
    </div>
    <div>
      <button class="btn btn-sm btn-outline-primary" 
              hx-get="{% url 'campaign_dashboard_data' domain %}" 
              hx-target="#report-container" 
              hx-indicator="#report-loading">
        <i class="fa fa-refresh"></i> {% trans "Refresh" %}
      </button>
    </div>
  </div>
  
  <div id="report-loading" class="htmx-indicator text-center mt-3">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">{% trans "Loading..." %}</span>
    </div>
  </div>
</div> 