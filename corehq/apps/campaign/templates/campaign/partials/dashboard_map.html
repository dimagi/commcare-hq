{% load hq_shared_tags %}
{% load i18n %}

<div id="map-widget-{{ widget.id }}" class="paginated-map-widget margin-bottom-10">
  <div class="panel panel-default">
    <div class="panel-heading clearfix">
      <h3 class="panel-title pull-left">{{ widget.title }}</h3>
      <div class="pull-right">
        {% include "campaign/partials/edit_widget_button.html" with widget_type='map' %}
      </div>
    </div>

    <!-- TODO: This needs pagination support -->
    <div class="panel-body no-padding">
      <div id="error-alert-{{ widget.id }}" class="alert alert-danger hide">
        {% blocktrans %}
          Something went wrong while loading this widget! Please try again.
        {% endblocktrans %}
      </div>
      <div class="row">
        <!-- Left Column: Filter Space -->
        <div class="col-md-4 border-right">
          <div id="map-widget-filters-{{ widget.id }}" class="padding-10">
            {% include "reports/standard/partials/bootstrap3/filter_panel.html" %}
          </div>
        </div>

        <!-- Right Column: Map -->
        <div class="col-md-8">
          <div class="position-relative">
            <div
              id="map-container-{{ widget.id }}"
              data-case-type="{{ widget.case_type }}"
              data-gps-prop="{{ widget.gps_prop_name }}"
              class="map-container"
              style="height:500px"
            ></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Popup for map markers -->
<script type="text/html" id="select-case">
  <small data-bind="html: getItemType()"></small>
  <div class="checkbox">
    <label
      data-bind="html: $data.link, attr: {for: selectCssId}"
    ></label>
  </div>
</script>
