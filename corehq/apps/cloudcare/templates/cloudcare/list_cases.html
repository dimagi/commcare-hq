{% extends base_template %}
{% load i18n %}
{% load hq_shared_tags %}

{% block head %}{{ block.super }}
    <link href="{% static 'formdesigner/css/chosen.css' %}" rel="stylesheet" />
    <style>
        #main_container {
            padding: 10px;
        }
        #main_container {
            min-width: 500px;
            position: relative;
        }
        #case-list {
            float: left;
            width: 30%;
        }
        #case-list table {
            float: left;
            width: 100%;
        }
        #case-details {
            margin-left: 4em;
        }
        .clear {
            clear: both;
        }
        tr.active {
            background-color: #f5f5ff;
        }
    </style>
{% endblock %}

{% block js %}{{ block.super }}
    <script src="{% static 'formdesigner/js/chosen.jquery.min.js' %}"></script>
    <script src="{% static 'hqwebapp/javascripts/jquery.textchange.min.js' %}"></script>
    <script src="{% static 'hqwebapp/javascripts/underscore-1.3.1.js' %}"></script>
    <script src="{% static 'hqwebapp/js/ui-element.js' %}"></script>
    <script src="{% static 'case/js/cheapxml.js' %}"></script>
    <script src="{% static 'case/js/casexml.js' %}"></script>
    <script src="{% static 'cloudcare/js/case-edit-form.js' %}"></script>
    <script src="{% static 'hqwebapp/javascripts/backbone.js' %}"></script>
    <script src="{% static 'cloudcare/js/util.js' %}"></script>
    <script src="{% static 'cloudcare/js/backbone/shared.js' %}"></script>
    <script src="{% static 'cloudcare/js/backbone/cases.js' %}"></script>
{% endblock %}
{% block js-inline %}{{ block.super }}
    <script>
        $(function () {
            var language = "{{ language }}";
            var listDetails = {{case_short|safe}};
            var summaryDetails = {{case_long|safe}};
            var cases = {{ cases|safe }};
            window.mainView = new CaseMainView({
			    el: "#main-container",
			    listDetails: listDetails,
			    summaryDetails: summaryDetails,
			    cases: cases,
			    language: language
			});
			Backbone.history.start();
			// TODO: when we figure out what to do about get params, use this
			// Backbone.history.start({pushState: true, root: "{% url cloudcare_case_list domain %}"});
            
        }());
    </script>
{% endblock %}

{% block content %}
    <div id="main-container" />
{% endblock %}