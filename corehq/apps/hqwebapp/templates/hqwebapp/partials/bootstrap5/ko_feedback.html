{% load i18n %}
{% load hq_shared_tags %}
<!-- used by corehq/apps/hqwebapp/static/hqwebapp/js/components/bootstrap5/feedback.js -->
<script type="text/html" id="ko-feedback-template">
  <a class="btn btn-link"
     href="#modal-feedback-form-widget"
     data-bs-toggle="modal">
    {% trans "Give Feedback" %}
    <i class="fa fa-thumbs-up"></i>
  </a>

  <div class="modal fade modal-lg"
       id="modal-feedback-form-widget"
       tabindex="-1"
       aria-labelledby="feedbackFormModalTitle"
       aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="feedbackFormModalTitle">
            {% blocktrans %}
              We would love to get your feedback
            {% endblocktrans %}
          </h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body"
             data-bind="visible: !showSuccess()">
          <div class="mb-3">
            <label class="form-label">
              {% blocktrans %}
                How would you rate this feature?
              {% endblocktrans %}
            </label>
            <div class="row mb-3 feedback-smiles">
              <div class="col-sm-4">
                <button type="button"
                        data-bind="click: rateBad, css: { selected: rating() === 1 }"
                        class="btn btn-link rate-bad">
                  <i class="fa fa-frown-o"></i>
                  {% trans "Don't Like It / Not Useful" %}
                </button>
              </div>
              <div class="col-sm-4">
                <button type="button"
                        data-bind="click: rateOk, css: { selected: rating() === 2 }"
                        class="btn btn-link rate-ok">
                  <i class="fa fa-meh-o"></i>
                  {% trans "Not Sure / Confusing" %}
                </button>
              </div>
              <div class="col-sm-4">
                <button type="button"
                        data-bind="click: rateGood, css: { selected: rating() === 3 }"
                        class="btn btn-link rate-good">
                  <i class="fa fa-smile-o"></i>
                  {% trans "Love It / Useful" %}
                </button>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">
              {% trans "Any other comments?" %}
            </label>
            <textarea data-bind="value: additionalFeedback"
                      class="form-control vertical-resize"></textarea>
          </div>
        </div>
        <div class="modal-body"
             data-bind="visible: showSuccess">
          <p class="lead">
            {% blocktrans %}
              Thank you for your feedback! We appreciate it.
            {% endblocktrans %}
          </p>
        </div>
        <div class="modal-footer">
          <button type="button"
                  class="btn btn-outline-primary"
                  data-bs-dismiss="modal">{% trans "Close" %}</button>
          <button type="button"
                  class="btn btn-primary"
                  data-bind="click: submit, visible: !!rating() && !showSuccess()">
            {% trans "Submit Feedback" %}
          </button>
          <button type="button"
                  class="btn btn-primary disabled"
                  disabled="disabled"
                  data-bind="visible: !rating()">
            {% trans "Submit Feedback" %}
          </button>
        </div>
      </div>
    </div>
  </div>
</script>
