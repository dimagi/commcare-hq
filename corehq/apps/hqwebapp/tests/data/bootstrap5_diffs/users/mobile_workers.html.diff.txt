--- 
+++ 
@@ -1,9 +1,9 @@
-{% extends "hqwebapp/bootstrap3/base_section.html" %}
+{% extends "hqwebapp/bootstrap5/base_section.html" %}
 {% load compress %}
 {% load i18n %}
 {% load hq_shared_tags %}
 {% load crispy_forms_tags %}
-{% js_entry_b3 'users/js/bootstrap3/mobile_workers' %}
+{% js_entry 'users/js/bootstrap5/mobile_workers' %}
 
 {% block page_content %}
   {% initial_page_data 'can_access_all_locations' can_access_all_locations %}
@@ -29,7 +29,7 @@
 
   <div>
     <div class="row">
-      <div class="col-sm-12">
+      <div class="col-md-12">
         <p class="lead">
           {% blocktrans %}
             Mobile Workers can log into applications in this project space and
@@ -49,14 +49,14 @@
             >.
           {% endblocktrans %}
         </p>
-        <div class="btn-toolbar" style="margin-bottom: 20px;">
+        <div class="btn-toolbar" style="margin-bottom: 20px;">  {# todo B5: inline-style #}
           {% if not request.is_view_only %}
             <button
               type="button"
               class="btn btn-primary ko-template"
               id="new-user-modal-trigger"
-              data-toggle="modal"
-              data-target="#new-user-modal"
+              data-bs-toggle="modal"
+              data-bs-target="#new-user-modal"
               data-bind="click: initializeUser"
             >
               <i class="fa fa-plus"></i> {% trans "Create Mobile Worker" %}
@@ -76,7 +76,7 @@
             {% if can_bulk_edit_users %}
               <a
                 id="bulk_upload"
-                class="btn btn-default"
+                class="btn btn-outline-primary"
                 href="{% url "upload_commcare_users" domain %}"
               >
                 <i class="fa-solid fa-cloud-arrow-up"></i>
@@ -86,7 +86,7 @@
             {% if request|toggle_enabled:"CLEAR_MOBILE_WORKER_DATA" %}
               <a
                 id="clear-data"
-                class="btn btn-danger"
+                class="btn btn-outline-danger"
                 href="{% url "clear_commcare_users" domain %}"
               >
                 <i class="fa fa-eraser"></i>
@@ -95,14 +95,14 @@
             {% endif %}
             {% if request|request_has_privilege:"FILTERED_BULK_USER_DOWNLOAD" %}
               <a
-                class="btn btn-danger"
+                class="btn btn-outline-danger"
                 href="{% url "delete_commcare_users" domain %}"
               >
                 <i class="fa-regular fa-trash-can"></i>
                 {% trans "Bulk Delete Mobile Workers" %}
               </a>
               <a
-                class="btn btn-default"
+                class="btn btn-outline-primary"
                 href="{% url "commcare_users_lookup" domain %}"
               >
                 <i class="fa fa-search"></i>
@@ -120,7 +120,7 @@
             <form novalidate data-bind="submit: submitNewUser">
               <div class="modal-content">
                 <div class="modal-header">
-                  <button type="button" class="close" data-dismiss="modal">
+                  <button type="button" class="btn-close" data-bs-dismiss="modal">  {# todo B5: css-close #}
                     <span aria-hidden="true">&times;</span>
                     <span class="sr-only">{% trans 'Close' %}</span>
                   </button>
@@ -130,17 +130,17 @@
                 </div>
                 <div class="modal-body" data-bind="if: stagedUser">
                   <div class="form-horizontal" data-bind="with: stagedUser">
-                    {% crispy new_mobile_worker_form %}
+                    {% crispy new_mobile_worker_form %}  {# todo B5: crispy #}
                     {% if custom_fields_form.fields %}
-                      {% crispy custom_fields_form %}
+                      {% crispy custom_fields_form %}  {# todo B5: crispy #}
                     {% endif %}
                   </div>
                 </div>
                 <div class="modal-footer">
                   <button
                     type="button"
-                    class="btn btn-default"
-                    data-dismiss="modal"
+                    class="btn btn-outline-primary"
+                    data-bs-dismiss="modal"
                   >
                     {% trans 'Cancel' %}
                   </button>
@@ -159,7 +159,7 @@
           <div class="modal-dialog">
             <div class="modal-content">
               <div class="modal-header">
-                <button type="button" class="close" data-dismiss="modal">
+                <button type="button" class="btn-close" data-bs-dismiss="modal">  {# todo B5: css-close #}
                   <span aria-hidden="true">&times;</span>
                   <span class="sr-only">{% trans 'Close' %}</span>
                 </button>
@@ -202,8 +202,8 @@
               <div class="modal-footer">
                 <button
                   type="button"
-                  class="btn btn-default"
-                  data-dismiss="modal"
+                  class="btn btn-outline-primary"
+                  data-bs-dismiss="modal"
                 >
                   {% trans 'Cancel' %}
                 </button>
@@ -221,21 +221,21 @@
     {% endif %}
 
     <div
-      class="panel panel-info ko-template"
+      class="card text-bg-info ko-template"  {# todo B5: css-panel #}
       id="new-users-list"
       data-bind="visible: newUsers().length"
     >
-      <div class="panel-heading">
-        <h3 class="panel-title">{% trans 'New Mobile Workers' %}</h3>
+      <div class="card-header">
+        <h3 class="card-title">{% trans 'New Mobile Workers' %}</h3>
       </div>
-      <div class="panel-body">
+      <div class="card-body">
         <table class="table table-striped">
           <thead>
             <tr>
-              <th class="col-xs-3">{% trans "Username" %}</th>
-              <th class="col-xs-3">{% trans "First Name" %}</th>
-              <th class="col-xs-3">{% trans "Last Name" %}</th>
-              <th class="col-xs-3">{% trans "Status" %}</th>
+              <th class="col-sm-3">{% trans "Username" %}</th>
+              <th class="col-sm-3">{% trans "First Name" %}</th>
+              <th class="col-sm-3">{% trans "Last Name" %}</th>
+              <th class="col-sm-3">{% trans "Status" %}</th>
             </tr>
           </thead>
           <tbody data-bind="foreach: newUsers">
@@ -287,13 +287,13 @@
     </div>
   </div>
   <div id="users-list" class="ko-template">
-    <div class="panel panel-default">
-      <div class="panel-heading">
-        <h3 class="panel-title">{% trans 'Mobile Workers' %}</h3>
+    <div class="card ">  {# todo B5: css-panel #}
+      <div class="card-header">
+        <h3 class="card-title">{% trans 'Mobile Workers' %}</h3>
       </div>
-      <div class="panel-body">
+      <div class="card-body">
         <div class="row">
-          <div class="col-sm-6">
+          <div class="col-md-6">
             <search-box
               data-apply-bindings="false"
               params="value: query,
@@ -301,11 +301,11 @@
                                             placeholder: '{% trans_html_attr "Search Workers..." %}'"
             ></search-box>
           </div>
-          <div class="col-sm-6">
+          <div class="col-md-6">
             <button
               id="gtm-show-disabled-mobile-workers"
               type="button"
-              class="btn btn-default pull-right"
+              class="btn btn-outline-primary float-end"
               data-bind="visible: !deactivatedOnly(), click: function() { deactivatedOnly(true); }"
             >
               {% trans 'Show Deactivated Mobile Workers' %}
@@ -313,7 +313,7 @@
             <button
               id="gtm-show-enabled-mobile-workers"
               type="button"
-              class="btn btn-default pull-right"
+              class="btn btn-outline-primary float-end"
               data-bind="visible: deactivatedOnly(), click: function() { deactivatedOnly(false); }"
             >
               {% trans 'Show Active Mobile Workers' %}
@@ -359,25 +359,25 @@
         </div>
         <table
           class="table table-striped table-responsive"
-          style="margin-bottom: 0;"
+          style="margin-bottom: 0;"  {# todo B5: inline-style #}
           data-bind="visible: showTable"
         >
           <thead>
             <tr>
-              <th class="col-xs-3">{% trans "Username" %}</th>
-              <th class="col-xs-3">{% trans "First Name" %}</th>
-              <th class="col-xs-2">{% trans "Last Name" %}</th>
-              <th class="col-xs-2">{% trans 'Date Registered' %}</th>
+              <th class="col-sm-3">{% trans "Username" %}</th>
+              <th class="col-sm-3">{% trans "First Name" %}</th>
+              <th class="col-sm-2">{% trans "Last Name" %}</th>
+              <th class="col-sm-2">{% trans 'Date Registered' %}</th>
               {% if two_stage_user_confirmation %}
-                <th class="col-xs-2" data-bind="visible: deactivatedOnly()">
+                <th class="col-sm-2" data-bind="visible: deactivatedOnly()">
                   {% trans 'Status' %}
                 </th>
               {% endif %}
               {% if request|toggle_enabled:"COMMCARE_CONNECT" %}
-                <th class="col-xs-2">{% trans 'PersonalID Status' %}</th>
+                <th class="col-sm-2">{% trans 'PersonalID Status' %}</th>
               {% endif %}
               {% if not request.is_view_only %}
-                <th class="col-xs-2">{% trans 'Action' %}</th>
+                <th class="col-sm-2">{% trans 'Action' %}</th>
               {% endif %}
             </tr>
           </thead>
@@ -400,17 +400,17 @@
               {% if request|toggle_enabled:"COMMCARE_CONNECT" %}
                 <td>
                   <span
-                    class="label label-info"
+                    class="badge text-bg-info"
                     data-bind="visible: is_personalid_link_active() === true"
                     >{% trans 'Active' %}</span
                   >
                   <span
-                    class="label label-danger"
+                    class="badge text-bg-danger"
                     data-bind="visible: is_personalid_link_active() === false"
                     >{% trans 'Inactive' %}</span
                   >
                   <span
-                    class="label label-warning"
+                    class="badge text-bg-warning"
                     data-bind="visible: is_personalid_link_active() === null"
                     >{% trans 'Not Linked' %}</span
                   >
@@ -421,9 +421,9 @@
                   <div data-bind="visible: !is_active()">
                     <button
                       type="button"
-                      class="btn btn-default"
-                      data-toggle="modal"
-                      data-bind="attr: {'data-target': '#activate_' + user_id()}"
+                      class="btn btn-outline-primary"
+                      data-bs-toggle="modal"
+                      data-bind="attr: {'data-bs-target': '#activate_' + user_id()}"
                     >
                       {% trans "Reactivate" %}
                     </button>
@@ -433,13 +433,13 @@
                     </p>
                   </div>
                   {% if request|toggle_enabled:"COMMCARE_CONNECT" %}
-                    {% include "users/partials/bootstrap3/personalid_activation_modals.html" %}
+                    {% include "users/partials/bootstrap5/personalid_activation_modals.html" %}
                     <div data-bind="visible: is_personalid_link_active">
                       <button
                         type="button"
-                        class="btn btn-default"
-                        data-toggle="modal"
-                        data-bind="attr: {'data-target': '#deactivate_personalid_link_' + user_id()}"
+                        class="btn btn-outline-primary"
+                        data-bs-toggle="modal"
+                        data-bind="attr: {'data-bs-target': '#deactivate_personalid_link_' + user_id()}"
                       >
                         {% trans "Unlink PersonalID" %}
                       </button>
@@ -449,9 +449,9 @@
                     >
                       <button
                         type="button"
-                        class="btn btn-default"
-                        data-toggle="modal"
-                        data-bind="attr: {'data-target': '#activate_personalid_link_' + user_id()}"
+                        class="btn btn-outline-primary"
+                        data-bs-toggle="modal"
+                        data-bind="attr: {'data-bs-target': '#activate_personalid_link_' + user_id()}"
                       >
                         {% trans "Link PersonalID" %}
                       </button>
@@ -460,9 +460,9 @@
                   <div data-bind="visible: is_active()">
                     <button
                       type="button"
-                      class="btn btn-default"
-                      data-toggle="modal"
-                      data-bind="attr: {'data-target': '#deactivate_' + user_id()}"
+                      class="btn btn-outline-primary"
+                      data-bs-toggle="modal"
+                      data-bind="attr: {'data-bs-target': '#deactivate_' + user_id()}"
                     >
                       {% trans "Deactivate" %}
                     </button>
@@ -480,8 +480,8 @@
                         <div class="modal-header">
                           <button
                             type="button"
-                            class="close"
-                            data-dismiss="modal"
+                            class="btn-close"  {# todo B5: css-close #}
+                            data-bs-dismiss="modal"
                           >
                             <span aria-hidden="true">&times;</span>
                             <span class="sr-only">{% trans "Close" %}</span>
@@ -519,8 +519,8 @@
                         <div class="modal-footer">
                           <button
                             type="button"
-                            class="btn btn-default"
-                            data-dismiss="modal"
+                            class="btn btn-outline-primary"
+                            data-bs-dismiss="modal"
                           >
                             {% trans "Cancel" %}
                           </button>
@@ -544,8 +544,8 @@
                         <div class="modal-header">
                           <button
                             type="button"
-                            class="close"
-                            data-dismiss="modal"
+                            class="btn-close"  {# todo B5: css-close #}
+                            data-bs-dismiss="modal"
                           >
                             <span aria-hidden="true">&times;</span>
                             <span class="sr-only">{% trans "Close" %}</span>
@@ -583,14 +583,14 @@
                         <div class="modal-footer">
                           <button
                             type="button"
-                            class="btn btn-default"
-                            data-dismiss="modal"
+                            class="btn btn-outline-primary"
+                            data-bs-dismiss="modal"
                           >
                             {% trans "Cancel" %}
                           </button>
                           <button
                             type="button"
-                            class="btn btn-danger gtm-mobile-worker-disable"
+                            class="btn btn-outline-danger gtm-mobile-worker-disable"
                             data-bind="click: function(user) { user.is_active(false); }"
                           >
                             {% trans 'Deactivate' %}
@@ -616,7 +616,7 @@
             <strong>There was an issue contacting the server.</strong>
             Please check your internet connection. If this issue continues,
             please
-            <a href="#modalReportIssue" data-toggle="modal">report an issue</a>.
+            <a href="#modalReportIssue" data-bs-toggle="modal">report an issue</a>.
           {% endblocktrans %}
         </div>
         <pagination
@@ -634,17 +634,17 @@
   </div>
   {% if two_stage_user_confirmation %}
     <div
-      class="panel panel-info ko-template"
+      class="card text-bg-info ko-template"  {# todo B5: css-panel #}
       id="mobile-worker-confirmation-panel"
     >
-      <div class="panel-heading">
+      <div class="card-header">
         <div class="row">
-          <div class="col-sm-6">
-            <h3 class="panel-title" style="padding-top: 7px;">
+          <div class="col-md-6">
+            <h3 class="card-title" style="padding-top: 7px;">  {# todo B5: inline-style #}
               {% trans 'Pending Account Confirmations' %}
             </h3>
           </div>
-          <div class="col-sm-6">
+          <div class="col-md-6">
             <search-box
               data-apply-bindings="false"
               params="value: query,
@@ -655,7 +655,7 @@
           </div>
         </div>
       </div>
-      <div class="panel-body">
+      <div class="card-body">
         <div class="alert alert-info" data-bind="visible: showNoUsers">
           {% blocktrans %}
             No pending account confirmations were found that matched your query.
@@ -719,11 +719,11 @@
               <td>
                 <!-- ko text: confirmationSentAtText --><!-- /ko -->
                 <span
-                  class="label label-default"
+                  class="badge text-bg-secondary"
                   data-bind="visible: !isExpired(), text: minutesRemainingText()"
                 ></span>
                 <span
-                  class="label label-danger"
+                  class="badge text-bg-danger"
                   data-bind="visible: isExpired()"
                   >{% trans "Expired" %}</span
                 >
@@ -731,9 +731,9 @@
               <td>
                 <button
                   type="button"
-                  class="btn btn-default"
-                  data-toggle="modal"
-                  data-bind="attr: {'data-target': '#confirm_' + user_id()}"
+                  class="btn btn-outline-primary"
+                  data-bs-toggle="modal"
+                  data-bind="attr: {'data-bs-target': '#confirm_' + user_id()}"
                 >
                   {% if request|toggle_enabled:"TWO_STAGE_USER_PROVISIONING_BY_SMS" %}
                     {% trans "Send Confirmation SMS" %}
@@ -750,8 +750,8 @@
                       <div class="modal-header">
                         <button
                           type="button"
-                          class="close"
-                          data-dismiss="modal"
+                          class="btn-close"  {# todo B5: css-close #}
+                          data-bs-dismiss="modal"
                         >
                           <span aria-hidden="true">&times;</span>
                           <span class="sr-only">{% trans "Close" %}</span>
@@ -797,8 +797,8 @@
                       <div class="modal-footer">
                         <button
                           type="button"
-                          class="btn btn-default"
-                          data-dismiss="modal"
+                          class="btn btn-outline-primary"
+                          data-bs-dismiss="modal"
                         >
                           {% trans "Cancel" %}
                         </button>
@@ -839,7 +839,7 @@
             <strong>There was an issue contacting the server.</strong>
             Please check your internet connection. If this issue continues,
             please
-            <a href="#modalReportIssue" data-toggle="modal">report an issue</a>.
+            <a href="#modalReportIssue" data-bs-toggle="modal">report an issue</a>.
           {% endblocktrans %}
         </div>
         <pagination
