{% extends "reports/report_base.html" %}
{% load xforms_extras %}

{% block head %}
    {{ block.super }}
    <style>
        th {
            text-align: left;
        }
        table.export_data a {
            color: #0067B1;
        }
        table.export_data {
            border: 1px solid #ccc;
            margin: auto;
        }
    </style>
{% endblock %}

{% block reportcontent %}
    <div class="padded">
    {% if forms %}
        <table class="export_data">
            <tr>
                <th>Application</th>
                <th>Module</th>
                <th>Form</th>
                <th></th>
            </tr>
            {% for form in forms %}
                <tr class="{% cycle "odd" "even" %}">
                    <td>
                        {% ifchanged %}
                            {% if form.app %}
                                {{ form.app.name }}
                            {% else %}
                                Unknown Forms <!---->
                            {% endif %}
                        {% endifchanged %}
                    </td>
                    <td>
                        {% ifchanged %}
                            {% if form.app %}
                                <!--Make sure to check if {{ form.app.name }} changed-->
                                {{ form.module.name|trans:form.app.langs }}
                            {% else %}
                                <!---->
                            {% endif %}
                        {% endifchanged %}
                    </td>
                    <td>
                            {% if form.app %}
                                {{ form.form.name|trans:form.app.langs }}

                            {% else %}
                                {{ form.xmlns }} {% if form.duplicate %}(XMLNS Conflict){% endif %}
                            {% endif %}
                    </td>
                    <td>
                        <a href='{% url corehq.apps.reports.views.export_data domain %}?export_tag={% if form.xmlns != None %}"{{ form.xmlns }}"{% endif %}&startdate={{ datespan.startdate_param }}&enddate={{ datespan.enddate_param }}'>
                            Download
                        </a>
                    </td>
                </tr>
            {% endfor %}
        </table>
    {% endif %}

    </div>
{% endblock %}