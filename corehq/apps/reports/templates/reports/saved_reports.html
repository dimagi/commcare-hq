{% extends "reports/base_template.html" %}
{% load case_tags %}
{% load hq_shared_tags %}

{% block js-inline %}{{ block.super }}
<script>
$(function() {
    $("#reportConfigList").reportConfigList({
        items: {{ configs|JSON }},
        saveUrl: '{% url add_report_config domain %}'
    });
});
</script>
{% endblock %}

{% block main_column %}
<div id="reportConfigList">
    <h2>Saved Reports</h2>

    <!-- ko ifnot: reportConfigs().length -->
    <div class="alert">You don't have any saved reports.  You can create a new saved report while viewing a report.</div>
    <!-- /ko -->
    <!-- ko if: reportConfigs().length -->
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Report</th>
                <th>Saved Report Name</th>
                <th>Description</th>
                <th>Date Range</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <!-- ko foreach: reportConfigs -->
            <tr>
                <td data-bind="text: report_name"></td>
                <td><a data-bind="attr: { href: url }, text: name"></a></td>
                <td data-bind="text: description"></td>
                <td data-bind="text: date_description"></td>
                <td>
                    <button class="btn btn-danger"
                        data-bind="click: $root.deleteConfig">
                        Delete
                    </button>
                </td>
            </tr>
            <!-- /ko -->
        </tbody>
    </table>
    <!-- /ko -->
</div>
{% endblock %}
