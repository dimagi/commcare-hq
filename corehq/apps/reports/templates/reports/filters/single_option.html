{% extends 'reports/filters/base.html' %}
{% load hq_shared_tags %}
{% block filter_content %}
    <div class="reports-filters-single-option">
        <div class="initial-data hide">
            {
                {% if pagination.enabled %}
                    "pagination": true,
                    "url": "{{ pagination.url }}",
                    "handler": "{{ pagination.handler }}",
                    "action": "{{ pagination.action }}"
                {% else %}
                    "pagination": false,
                    "selectOptions": {{ select.options|JSON }},
                    "selectCurrent": "{{ select.selected|safe|default:'' }}"
                {% endif %}
            }
        </div>
    {% if pagination.enabled %}
        <input id="{{ css_id }}"
               class="input form-control"
               style="width: 100%"
               placeholder="{{ select.default_text }}"
               value="{{ select.selected|default:'' }}"
               name="{{ slug }}" />
    {% else %}
        <select id="{{ css_id }}"
                style="width: 100%"
                data-bind="options: select_params, optionsText: 'text', optionsValue: 'val', {% if select.default_text %}optionsCaption: '{{ select.default_text }}', {% endif %}value: current_selection"
                name="{{ slug }}"></select>
    {% endif %}
    </div>
{% endblock %}

{% block filter_js %}
<script>
    if (!USE_REQUIREJS) {
        $.when(
            $.getScript("{% static 'reports/javascripts/filters.js' %}")
        ).done(function() {
            hqImport('reports/javascripts/filters.js').init();
        });
    }
</script>
{% endblock %}
