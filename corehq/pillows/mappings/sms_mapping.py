from corehq.util.elastic import es_index
from pillowtop.es_utils import ElasticsearchIndexInfo

SMS_INDEX = es_index("smslogs_708c77f8e5fe00286fa5791e9fa7d45f")
SMS_MAPPING={'_meta': {'comment': 'Autogenerated [corehq.apps.sms.models.SMSLog] mapping from ptop_generate_mapping 09/23/2013',
           'created': None},
 'date_detection': False,
 'date_formats': ['yyyy-MM-dd',
                  "yyyy-MM-dd'T'HH:mm:ssZZ",
                  "yyyy-MM-dd'T'HH:mm:ss.SSSSSS",
                  "yyyy-MM-dd'T'HH:mm:ss.SSSSSS'Z'",
                  "yyyy-MM-dd'T'HH:mm:ss'Z'",
                  "yyyy-MM-dd'T'HH:mm:ssZ",
                  "yyyy-MM-dd'T'HH:mm:ssZZ'Z'",
                  "yyyy-MM-dd'T'HH:mm:ss.SSSZZ",
                  "yyyy-MM-dd'T'HH:mm:ss",
                  "yyyy-MM-dd' 'HH:mm:ss",
                  "yyyy-MM-dd' 'HH:mm:ss.SSSSSS",
                  "mm/dd/yy' 'HH:mm:ss"],
 'dynamic': False,
 'properties': {'backend_api': {'type': 'string'},
                'backend_id': {'type': 'string'},
                'base_doc': {'type': 'string'},
                'billed': {'type': 'boolean'},
                'couch_recipient': {'type': 'string'},
                'couch_recipient_doc_type': {'type': 'string'},
                'date': {'format': "yyyy-MM-dd||yyyy-MM-dd'T'HH:mm:ssZZ||yyyy-MM-dd'T'HH:mm:ss.SSSSSS||yyyy-MM-dd'T'HH:mm:ss.SSSSSS'Z'||yyyy-MM-dd'T'HH:mm:ss'Z'||yyyy-MM-dd'T'HH:mm:ssZ||yyyy-MM-dd'T'HH:mm:ssZZ'Z'||yyyy-MM-dd'T'HH:mm:ss.SSSZZ||yyyy-MM-dd'T'HH:mm:ss||yyyy-MM-dd' 'HH:mm:ss||yyyy-MM-dd' 'HH:mm:ss.SSSSSS||mm/dd/yy' 'HH:mm:ss",
                         'type': 'date'},
                'direction': {'type': 'string'},
                'doc_type': {'index': 'not_analyzed', 'type': 'string'},
                'domain': {'fields': {'domain': {'index': 'analyzed',
                                                 'type': 'string'},
                                      'exact': {'index': 'not_analyzed',
                                                'type': 'string'}},
                           'type': 'multi_field'},
                'phone_number': {'type': 'string'},
                'reminder_id': {'type': 'string'},
                'text': {'type': 'string'},
                'workflow': {'type': 'string'},
                'xforms_session_couch_id': {'type': 'string'}}}

SMS_META = {
    "settings": {
        "analysis": {
            "analyzer": {
                "default": {
                    "type": "custom",
                    "tokenizer": "whitespace",
                    "filter": ["lowercase"]
                },
            }
        }
    }
}

SMS_TYPE = 'sms'


SMS_INDEX_INFO = ElasticsearchIndexInfo(
    index=SMS_INDEX,
    alias="smslogs",
    type=SMS_TYPE,
    meta=SMS_META,
    mapping=SMS_MAPPING,
)
