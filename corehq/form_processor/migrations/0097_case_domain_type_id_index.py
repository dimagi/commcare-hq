# Generated by Django 4.2.20 on 2025-05-13 20:23

from django.db import migrations


FORWARD_SQL = """
CREATE INDEX CONCURRENTLY IF NOT EXISTS "form_processor_commcarecasesql_domain_type_id_f1789d5f_idx"
  ON "form_processor_commcarecasesql" ("domain", "type", "id");
DROP INDEX CONCURRENTLY IF EXISTS "form_processor_commcarecasesql_domain_type_05e599e0_idx";
"""
REVERSE_SQL = """
CREATE INDEX CONCURRENTLY IF NOT EXISTS "form_processor_commcarecasesql_domain_type_05e599e0_idx"
    ON "form_processor_commcarecasesql" ("domain", "type");
DROP INDEX CONCURRENTLY IF EXISTS "form_processor_commcarecasesql_domain_type_id_f1789d5f_idx";
"""


class Migration(migrations.Migration):
    atomic = False

    dependencies = [
        ('form_processor', '0096_add_partial_index_cases'),
    ]

    operations = [
        migrations.RunSQL(FORWARD_SQL, REVERSE_SQL, state_operations=[
            migrations.AlterIndexTogether(
                name='commcarecase',
                index_together={
                    ('owner_id', 'server_modified_on'),
                    ('domain', 'external_id', 'type'),
                    ('domain', 'owner_id', 'closed'),
                    ('domain', 'type', 'id'),
                },
            ),
        ]),
    ]
