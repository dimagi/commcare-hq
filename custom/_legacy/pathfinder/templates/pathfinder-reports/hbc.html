{% extends "reports/base_template.html" %}
{% load i18n %}

{% block title %}
    {% trans "Home-Based Care Monthly Report" %}
{% endblock %}

{% block reportcontent %}

    {% if ward and p %}
    {% if p.male or p.female %}
        <h2 align="center">Home Based Care Monthly Summary Report</h2>

        <h4 align="center">Ward: {{ ward.name }}</h4>
        <h5 align="center">Date: {{ date|date:"F Y"}}</h5>
{#        <div align="center"><a href="{% url ' domain' %}?ward={{ ward }}&year={{ date|date:"Y"}}&month={{date|date:"m"}}">#}
{#            View ward summary for {{ ward }}, {{ date|date:"F Y" }}</a></div>#}
        <div>
            <table class="table table-striped table-bordered table-condensed">
                <tr>
                    <td style="width:275px">Number of providers - who reported this month:</td>
                    <td style="width:30px">{{ chws.reported|length }}</td>
                    <td style="width:200px">- who did not report this month:</td>
                    <td style="width:30px">{{ chws.not_reported|length }}</td>
                    <td></td>
                </tr>
            </table>
        </div>
        <table style="text-align:center;" class="table table-striped table-bordered table-condensed">
            <thead>
            <tr>
                <th rowspan=2>Age:</th>
                <th colspan=2>All</th>
                <th colspan=2>Under 15</th>
                <th colspan=2>15 to 24</th>
                <th colspan=2>25 to 49</th>
                <th colspan=2>50 and above</th>
                <th></th>
            </tr>
            <tr>
                <th>M</th>
                <th>F</th>
                <th>M</th>
                <th>F</th>
                <th>M</th>
                <th>F</th>
                <th>M</th>
                <th>F</th>
                <th>M</th>
                <th>F</th>
                <th></th>
            </tr>
            </thead>
            <tr>
                <td style="width:375px">1. Number of New Clients enrolled this month</td>
                <td style="width:32px">{{ p.new__male|length }}</td>
                <td style="width:32px">{{ p.new__female|length}}</td>
                <td style="width:32px">{{ p.new__0to14__male|length }}</td>
                <td style="width:32px">{{ p.new__0to14__female|length }}</td>
                <td style="width:32px">{{ p.new__15to24__male|length }}</td>
                <td style="width:32px">{{ p.new__15to24__female|length }}</td>
                <td style="width:32px">{{ p.new__25to49__male|length }}</td>
                <td style="width:32px">{{ p.new__25to49__female|length }}</td>
                <td style="width:32px">{{ p.new__50plus__male|length }}</td>
                <td style="width:32px">{{ p.new__50plus__female|length }}</td>
                <td></td>
            </tr>
        </table>
        <table style="text-align:center;">
            <tr>
                <td style="width:375px">2. New and continuing clients receiving services this month</td>
                <td style="width:32px">{{ p.f__male|length }}</td>
                <td style="width:32px">{{ p.f__female|length}}</td>
                <td style="width:32px">{{ p.f__0to14__male|length }}</td>
                <td style="width:32px">{{ p.f__0to14__female|length }}</td>
                <td style="width:32px">{{ p.f__15to24__male|length }}</td>
                <td style="width:32px">{{ p.f__15to24__female|length }}</td>
                <td style="width:32px">{{ p.f__25to49__male|length }}</td>
                <td style="width:32px">{{ p.f__25to49__female|length }}</td>
                <td style="width:32px">{{ p.f__50plus__male|length }}</td>
                <td style="width:32px">{{ p.f__50plus__female|length }}</td>
                <td></td>
            </tr>
        </table>
        <div>HIV status</div>
        <table style="text-align:center;">
            <tr>
                <td style="width:375px">Positive</td>
                <td style="width:32px">{{ p.f__hiv_pos__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_pos__female|length }}</td>
                <td style="width:32px">{{ p.f__hiv_pos__0to14__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_pos__0to14__female|length }}</td>
                <td style="width:32px">{{ p.f__hiv_pos__15to24__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_pos__15to24__female|length }}</td>
                <td style="width:32px">{{ p.f__hiv_pos__25to49__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_pos__25to49__female|length }}</td>
                <td style="width:32px">{{ p.f__hiv_pos__50plus__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_pos__50plus__female|length }}</td>
                <td></td>
            </tr>
            <tr>
                <td style="width:375px">Negative</td>
                <td style="width:32px">{{ p.f__hiv_neg__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_neg__female|length}}</td>
                <td style="width:32px">{{ p.f__hiv_neg__0to14__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_neg__0to14__female|length }}</td>
                <td style="width:32px">{{ p.f__hiv_neg__15to24__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_neg__15to24__female|length }}</td>
                <td style="width:32px">{{ p.f__hiv_neg__25to49__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_neg__25to49__female|length }}</td>
                <td style="width:32px">{{ p.f__hiv_neg__50plus__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_neg__50plus__female|length }}</td>
                <td></td>
            </tr>
            <tr>
                <td style="width:375px">Unknown</td>
                <td style="width:32px">{{ p.f__hiv_unk__male|length}}</td>
                <td style="width:32px">{{ p.f__hiv_unk__female|length }}</td>
                <td style="width:32px">{{ p.f__hiv_unk__0to14__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_unk__0to14__female|length }}</td>
                <td style="width:32px">{{ p.f__hiv_unk__15to24__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_unk__15to24__female|length }}</td>
                <td style="width:32px">{{ p.f__hiv_unk__25to49__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_unk__25to49__female|length }}</td>
                <td style="width:32px">{{ p.f__hiv_unk__50plus__male|length }}</td>
                <td style="width:32px">{{ p.f__hiv_unk__50plus__female|length }}</td>
                <td></td>
            </tr>
        </table>
        <div>CTC enrollment status</div>
        <table style="text-align:center;">
            <tr>
                <td style="width:375px">Enrolled in CTC but not on ARVs</td>
                <td style="width:32px">{{ p.f__ctc_no_arv__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_arv__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_arv__0to14__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_arv__0to14__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_arv__15to24__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_arv__15to24__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_arv__25to49__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_arv__25to49__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_arv__50plus__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_arv__50plus__female|length }}</td>
                <td></td>
            </tr>
            <tr>
                <td style="width:375px">Enrolled in CTC and on ARVs</td>
                <td style="width:32px">{{ p.f__ctc_arv__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_arv__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_arv__0to14__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_arv__0to14__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_arv__15to24__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_arv__15to24__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_arv__25to49__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_arv__25to49__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_arv__50plus__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_arv__50plus__female|length }}</td>
                <td></td>
            </tr>
            <tr>
                <td style="width:375px">Not enrolled in CTC</td>
                <td style="width:32px">{{ p.f__ctc_no_reg__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_reg__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_reg__0to14__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_reg__0to14__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_reg__15to24__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_reg__15to24__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_reg__25to49__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_reg__25to49__female|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_reg__50plus__male|length }}</td>
                <td style="width:32px">{{ p.f__ctc_no_reg__50plus__female|length }}</td>
                <td></td>
            </tr>
        </table>
        <table style="text-align:center;">
            <tr>
                <td style="width:375px">3. Number of clients ever enrolled in HBC</td>
                <td style="width:32px">{{ p.male|length }}</td>
                <td style="width:32px">{{ p.female|length}}</td>
                <td></td>
            </tr>
        </table>
        <table style="text-align:center;">
            <thead>
            <tr>
                <th></th>
                <th>Died</th>
                <th>Lost</th>
                <th>Transferred to other HBC services</th>
                <th>Migrated</th>
                <th>No longer in need of services</th>
                <th>Opted out</th>
                <th>Total</th>
            </tr>
            </thead>
            <tr>
                <td>4. Number of clients no longer receiving services</td>
                <td>{{ p.deaths|length }}</td>
                <td>{{ p.losses|length }}</td>
                <td>{{ p.transfers|length}}</td>
                <td>{{ p.migrations|length }}</td>
                <td>{{ p.no_need|length }}</td>
                <td>{{ p.opted_out|length }}</td>
                <td>{{ p.deaths|add:p.losses|add:p.transfers|add:p.no_need|add:p.migrations|add:p.opted_out|length }}</td>
            </tr>
        </table> 
    {% else %}
       There is no data for this period.

    {% endif %}

    {% else %}
        You need to select a ward, month, and year.
    {% endif %}

{% endblock %}

