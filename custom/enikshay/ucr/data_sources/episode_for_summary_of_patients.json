{
    "domains": [
        "enikshay",
        "enikshay-performance-test"
    ],
    "server_environment": [
        "enikshay"
    ],
    "config": {
        "referenced_doc_type": "CommCareCase",
        "asynchronous": true,
        "engine_id": "ucr",
        "description": "",
        "base_item_expression": {
        },
        "table_id": "episode_for_summary_of_patients",
        "display_name": "Episode for Summary of Patients Report",
        "configured_filter": {
            "type": "and",
            "filters": [
                {
                    "operator": "eq",
                    "expression": {
                        "datatype": null,
                        "type": "property_name",
                        "property_name": "type"
                    },
                    "type": "boolean_expression",
                    "property_value": "episode"
                },
                {
                    "operator": "eq",
                    "expression": {
                        "type": "property_name",
                        "property_name": "enrolled_in_private"
                    },
                    "type": "boolean_expression",
                    "property_value": "false"
                },
                {
                    "operator": "in",
                    "expression": {
                        "type": "property_name",
                        "property_name": "episode_type"
                    },
                    "type": "boolean_expression",
                    "property_value": ["confirmed_tb", "confirmed_drtb"]
                },
                {
                    "operator": "eq",
                    "expression": {
                        "type": "property_name",
                        "property_name": "dstb_to_drtb_transition_no_initiation"
                    },
                    "type": "boolean_expression",
                    "property_value": "NOT"
                },
                {
                    "type": "not",
                    "filter": {
                        "operator": "in",
                        "expression": {
                            "type": "property_name",
                            "property_name": "close_reason"
                        },
                        "type": "boolean_expression",
                        "property_value": ["invalid_episode", "duplicate", "invalid_registration"]
                    }
                },
                {
                    "operator": "not_eq",
                    "expression": {
                        "value_expression": {
                            "type": "property_name",
                            "property_name": "owner_id"
                        },
                        "type": "related_doc",
                        "related_doc_type": "CommCareCase",
                        "doc_id_expression": {
                            "datatype": null,
                            "type": "named",
                            "name": "person_id"
                        }
                    },
                    "type": "boolean_expression",
                    "property_value": "_invalid_"
                }
            ]
        },
        "configured_indicators": [
            {
                "comment": null,
                "create_index": true,
                "display_name": "date_of_diagnosis",
                "datatype": "date",
                "expression": {
                    "datatype": null,
                    "type": "property_name",
                    "property_name": "date_of_diagnosis"
                },
                "is_primary_key": false,
                "transform": {},
                "is_nullable": true,
                "type": "expression",
                "column_id": "date_of_diagnosis"
            },
            {
                "comment": null,
                "create_index": true,
                "display_name": "person/owner_id",
                "datatype": "string",
                "expression": {
                    "type": "named",
                    "name": "person_owner_id"
                },
                "transform": {},
                "is_primary_key": false,
                "is_nullable": true,
                "type": "expression",
                "column_id": "person_owner_id"
            },
            {
                "comment": null,
                "create_index": true,
                "display_name": "diagnosing_facility_id",
                "datatype": "string",
                "expression": {
                    "datatype": null,
                    "type": "property_name",
                    "property_name": "diagnosing_facility_id"
                },
                "is_primary_key": false,
                "transform": {},
                "is_nullable": true,
                "type": "expression",
                "column_id": "diagnosing_facility_id"
            },
            {
                "type": "boolean",
                "column_id": "confirmed_tb",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "episode_type"
                    },
                    "operator": "eq",
                    "property_value": "confirmed_tb"
                }
            },
            {
                "type": "boolean",
                "column_id": "confirmed_drtb",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "episode_type"
                    },
                    "operator": "eq",
                    "property_value": "confirmed_drtb"
                }
            },
            {
                "type": "boolean",
                "column_id": "drtb_patients_on_treatment",
                "datatype": "integer",
                "filter": {
                    "type": "and",
                    "filters": [
                        {
                            "type": "boolean_expression",
                            "expression": {
                                "type": "property_name",
                                "property_name": "episode_type"
                            },
                            "operator": "eq",
                            "property_value": "confirmed_drtb"
                        },
                        {
                            "type": "not",
                            "filter": {
                                "type": "boolean_expression",
                                "expression": {
                                    "type": "property_name",
                                    "property_name": "treatment_initiation_date"
                                },
                                "operator": "in",
                                "property_value": [null, ""]
                            }
                        }
                    ]
                }
            },
            {
                "type": "boolean",
                "column_id": "patients_on_ip",
                "datatype": "integer",
                "filter": {
                    "type": "and",
                    "filters": [
                        {
                            "type": "boolean_expression",
                            "expression": {
                                "type": "property_name",
                                "property_name": "episode_type"
                            },
                            "operator": "eq",
                            "property_value": "confirmed_tb"
                        },
                        {
                            "type": "not",
                            "filter": {
                                "type": "boolean_expression",
                                "expression": {
                                    "type": "property_name",
                                    "property_name": "treatment_initiation_date"
                                },
                                "operator": "in",
                                "property_value": [null, ""]
                            }
                        },
                        {
                            "type": "boolean_expression",
                            "expression": {
                                "type": "property_name",
                                "property_name": "cp_initiated"
                            },
                            "operator": "not_eq",
                            "property_value": "yes"
                        }
                    ]
                }
            },
            {
                "type": "boolean",
                "column_id": "patients_on_cp",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "cp_initiated"
                    },
                    "operator": "eq",
                    "property_value": "yes"
                }
            },
            {
                "type": "boolean",
                "column_id": "treatment_outcome",
                "datatype": "integer",
                "filter": {
                    "type": "not",
                    "filter": {
                        "type": "boolean_expression",
                        "expression": {
                            "type": "property_name",
                            "property_name": "treatment_outcome"
                        },
                        "operator": "in",
                        "property_value": [null, ""]
                    }
                }
            },
            {
                "type": "boolean",
                "column_id": "weight_band_adult_25_39",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "weight_band"
                    },
                    "operator": "eq",
                    "property_value": "adult_25-39"
                }
            },
            {
                "type": "boolean",
                "column_id": "weight_band_adult_40_54",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "weight_band"
                    },
                    "operator": "eq",
                    "property_value": "adult_40-54"
                }
            },
            {
                "type": "boolean",
                "column_id": "weight_band_adult_55_69",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "weight_band"
                    },
                    "operator": "eq",
                    "property_value": "adult_55-69"
                }
            },
            {
                "type": "boolean",
                "column_id": "weight_band_adult_gt_70",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "weight_band"
                    },
                    "operator": "eq",
                    "property_value": "adult_greater_than_70"
                }
            },
            {
                "type": "boolean",
                "column_id": "weight_band_6_10",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "weight_band"
                    },
                    "operator": "eq",
                    "property_value": "6-10"
                }
            },
            {
                "type": "boolean",
                "column_id": "weight_band_11_17",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "weight_band"
                    },
                    "operator": "eq",
                    "property_value": "11-17"
                }
            },
            {
                "type": "boolean",
                "column_id": "weight_band_18_25",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "weight_band"
                    },
                    "operator": "eq",
                    "property_value": "18-25"
                }
            },
            {
                "type": "boolean",
                "column_id": "weight_band_26_30",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "weight_band"
                    },
                    "operator": "eq",
                    "property_value": "26-30"
                }
            },
            {
                "type": "boolean",
                "column_id": "weight_band_31_60",
                "datatype": "integer",
                "filter": {
                    "type": "boolean_expression",
                    "expression": {
                        "type": "property_name",
                        "property_name": "weight_band"
                    },
                    "operator": "eq",
                    "property_value": "31-60"
                }
            }
        ],
        "named_filters": {},
        "named_expressions": {
            "person_id": {
                "value_expression": {
                    "type": "nested",
                    "value_expression": {
                        "datatype": null,
                        "type": "property_name",
                        "property_name": "referenced_id"
                    },
                    "argument_expression": {
                        "type": "array_index",
                        "array_expression": {
                            "datatype": null,
                            "type": "property_name",
                            "property_name": "indices"
                        },
                        "index_expression": {
                            "type": "constant",
                            "constant": 0
                        }
                    }
                },
                "type": "related_doc",
                "related_doc_type": "CommCareCase",
                "doc_id_expression": {
                    "value_expression": {
                        "datatype": null,
                        "type": "property_name",
                        "property_name": "referenced_id"
                    },
                    "type": "nested",
                    "argument_expression": {
                        "type": "array_index",
                        "array_expression": {
                            "datatype": null,
                            "type": "property_name",
                            "property_name": "indices"
                        },
                        "index_expression": {
                            "type": "constant",
                            "constant": 0
                        }
                    }
                }
            },
            "person_owner_id": {
                "value_expression": {
                    "test": {
                        "operator": "eq",
                        "expression": {
                            "datatype": null,
                            "type": "property_name",
                            "property_name": "owner_id"
                        },
                        "type": "boolean_expression",
                        "comment": null,
                        "property_value": "_archive_"
                    },
                    "expression_if_true": {
                        "datatype": null,
                        "type": "property_name",
                        "property_name": "last_owner"
                    },
                    "type": "conditional",
                    "expression_if_false": {
                        "datatype": null,
                        "type": "property_name",
                        "property_name": "owner_id"
                    }
                },
                "type": "related_doc",
                "related_doc_type": "CommCareCase",
                "doc_id_expression": {
                    "datatype": null,
                    "type": "named",
                    "name": "person_id"
                }
            }
        }
    }
}
